(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{657:function(e,t,n){var content=n(689);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(76).default)("250a54fe",content,!0,{sourceMap:!1})},665:function(e,t,n){"use strict";n.r(t);n(34),n(84),n(7),n(5),n(6),n(3),n(10);var r=n(42),o=n(12),c=n(35),l=n(36),f=n(40),h=n(41),d=n(25),v=n(21),w=(n(49),n(4),n(1),n(56),n(55),n(17)),m=n(67),y=n(114),O=n(115),j=n(52),_=n(104),x=n(153);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var k=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},P=function(e){Object(f.a)(d,e);var t,n,r,h=R(d);function d(){var e;return Object(c.a)(this,d),(e=h.apply(this,arguments)).name="LoginSwitcher",e.user=_.a.user(),e}return Object(l.a)(d,[{key:"logged",get:function(){return 0!==this.user.accountId}},{key:"login",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.auth.login({redirect_uri:location.href,nofollow:1});case 2:t=e.sent,(data=t.data)&&(window.location.href=data.location);case 5:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"logout",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.auth.logout(t);case 2:return e.next=4,O.b.auth.logout(t);case 4:j.a.storage.removeUser(),this.user.resetUser(),location.assign("/");case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleLogoutConfirm",value:function(e){var t=j.a.storage.getUser();t&&(e&&this.logout(t.access_token),this.logoutConfirmRef.doClose())}},{key:"handleSwitcher",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.a.storage.getUser()){e.next=6;break}return e.next=4,this.login();case 4:e.next=8;break;case 6:return e.next=8,this.logoutConfirmRef.doOpen();case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),d}(w.Vue);k([Object(w.Ref)("logoutConfirm")],P.prototype,"logoutConfirmRef",void 0),P=k([Object(w.Component)({components:{CDialog:x.default,CButton:y.default,login:function(){return Promise.resolve().then(n.t.bind(null,492,7))},logout:function(){return Promise.resolve().then(n.t.bind(null,493,7))}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(m.d)(_.a.breakpoints,["isTablet"]))})],P);var D=P,S=(n(688),n(37)),component=Object(S.a)(D,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"login-switcher"},[e.isTablet?e._e():t("div",{staticClass:"login-switcher__username"},[t("span",{staticClass:"login-switcher__username-text"},[e._v("\n      "+e._s(e.user.name)+"\n    ")])]),e._v(" "),t("CButton",{staticClass:"login-switcher__btn",attrs:{"is-text":"","is-square":"",align:"center",title:e.logged?"Выйти":"Войти"},on:{click:e.handleSwitcher}},[t(e.logged?"logout":"login",{tag:"component"})],1),e._v(" "),t("CDialog",{ref:"logoutConfirm",attrs:{title:"Выход из аккаунта","append-to-body":""}},[t("div",{staticStyle:{margin:"0 0 1em"}},[e._v("\n      Вы уверены, что хотите выйти из аккаунта?\n    ")]),e._v(" "),t("div",{staticStyle:{"text-align":"right"}},[t("CButton",{attrs:{align:"center",width:"80px"},on:{click:function(t){return e.handleLogoutConfirm(!0)}}},[e._v("\n        Да\n      ")]),e._v(" "),t("CButton",{attrs:{align:"center",width:"80px"},on:{click:function(t){return e.handleLogoutConfirm(!1)}}},[e._v("\n        Нет\n      ")])],1)])],1)}),[],!1,null,null,null);t.default=component.exports},688:function(e,t,n){"use strict";n(657)},689:function(e,t,n){var r=n(75)((function(i){return i[1]}));r.push([e.i,".login-switcher{align-items:center;display:flex;position:relative}.login-switcher__username{align-self:center;display:inline-flex;max-width:200px;padding:0 8px;position:relative}.login-switcher__username-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""]),r.locals={},e.exports=r}}]);