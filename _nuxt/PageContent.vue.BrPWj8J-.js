import{_ as N,a as I,h as z,d as J}from"./disableScroll.DDlwJlcl.js";import{_ as D}from"./nuxt-link.C4UY2yYj.js";import{f as S,g as P,i as h,o as s,c as m,a as e,k as n,t as C,j as p,w as u,d as B,F,m as k,r as R,b as l,C as Y,K as W,D as Q,X as ee,A as te,Y as ne,z as H,Z as oe,$ as ae,a0 as se,s as T,q as ie,E as re,a1 as ce}from"./entry.ctIX2KUb.js";import{a as le,_ as X}from"./ContentBox.vue.P4GZ3NJK.js";import{_ as _e,g as de,b as ue}from"./CDialog.vue.B3NqeRuW.js";import{a as O,u as L,b as j}from"./index.CNUfbNKa.js";import{u as ge}from"./user.DYZIlJiw.js";import{s as q,a as A}from"./request.C9u4Wmp-.js";import{a as me}from"./index.VOeJb_dr.js";import pe from"./leader.BrrCgns1.js";import{_ as Z}from"./client-only.vVwufuq4.js";import he from"./dark-mode.D05sLCSW.js";import fe from"./light-mode.cIfBeaYA.js";import{a as be}from"./debounce.C8GFgnJ3.js";const ve={class:"breadcrumbs-navigation"},ye={class:"breadcrumbs-navigation__inner"},ke={key:0,class:"breadcrumbs-navigation__root"},$e=e("span",{class:"breadcrumbs-navigation__separator"},null,-1),Se={class:"breadcrumbs-navigation__current"},we=S({__name:"BreadcrumbsNavigation",setup(g){const i=P(),t=h(()=>{var c;return((c=String(i.name).split("-"))==null?void 0:c[0])??"index"}),r=h(()=>String(i.name??"")),o=h(()=>r===t);return(c,_)=>{const a=D;return s(),m("div",ve,[e("div",ye,[n(o)?(s(),m("span",ke,C(c.$formatter.route.getTitle(n(t))),1)):(s(),p(a,{key:1,class:"breadcrumbs-navigation__root link",to:{name:n(t)}},{default:u(()=>[B(C(c.$formatter.route.getTitle(n(t))),1)]),_:1},8,["to"])),n(o)?k("",!0):(s(),m(F,{key:2},[$e,e("span",Se,C(c.$formatter.route.getTitle(n(r))),1)],64))])])}}}),Ce={class:"login-switcher"},xe={key:0,class:"login-switcher__username"},Te={class:"login-switcher__username-text"},Me=e("div",{style:{margin:"0 0 1em"}}," Вы уверены, что хотите выйти из аккаунта? ",-1),Be={style:{"text-align":"right"}},Ne=S({__name:"LoginSwitcher",setup(g){const i=R(null),t=ge(),r=O(),o=L(),c=h(()=>t.accountId!==0),_=h(()=>o.isTablet||r.isTablet||r.isMobile);async function a(){try{const{data:d}=await A.auth.login({redirect_uri:location.href,nofollow:1});d&&(window.location.href=d.location)}catch(d){z(d,{title:"Вход в аккаунт"})}}async function v(){await A.auth.logout()}async function f(){await me.auth.logout(),q.storage.removeUser(),t.resetUser(),location.assign("/")}async function b(){try{await v(),await f()}catch(d){z(d,{title:"Вход из аккаунта"})}}function $(d){q.storage.getUser()&&(d&&b(),i.value.doClose())}async function w(){q.storage.getUser()?await i.value.doOpen():await a()}return(d,y)=>{const M=N,x=I,U=_e;return s(),m("div",Ce,[n(_)?k("",!0):(s(),m("div",xe,[e("span",Te,C(n(t).name),1)])),l(x,{class:"login-switcher__btn","is-text":"","is-square":"",align:"center",title:n(c)?"Выйти":"Войти",onClick:w},{default:u(()=>[l(M,{name:n(c)?"logout":"login"},null,8,["name"])]),_:1},8,["title"]),l(U,{ref_key:"logoutConfirmRef",ref:i,title:"Выход из аккаунта","append-to-body":""},{default:u(()=>[Me,e("div",Be,[l(x,{align:"center",width:"80px",onClick:y[0]||(y[0]=E=>$(!0))},{default:u(()=>[B(" Да ")]),_:1}),l(x,{align:"center",width:"80px",onClick:y[1]||(y[1]=E=>$(!1))},{default:u(()=>[B(" Нет ")]),_:1})])]),_:1},512)])}}}),Oe={class:"page-header__inner"},Le={class:"page-header__col page-header__col--left"},Re={key:0,class:"page-header__col-item"},Ie={class:"page-header__col-item"},Pe={class:"page-header__col page-header__col--right"},Ee={class:"page-header__col-item"},qe={class:"page-header__col page-header__col--right"},He={class:"page-header__col-item"},De={class:"page-header__col-item"},je=S({__name:"PageHeader",props:{height:{type:Number,required:!0},isSticky:{type:Boolean,default:!1}},setup(g){const i=O(),t=L(),r=j(),o=h(()=>t.isTablet||i.isTablet||i.isMobile);function c(){r.toggleMainSearch(!0)}function _(){r.toggleMobileMenu(),J(!0)}return(a,v)=>{const f=N,b=I,$=we,w=le,d=Ne;return s(),m("div",{class:Y(["page-header",[g.isSticky?"page-header--is-sticky":"",n(o)?"page-header--is-mobile-view":""]]),style:W({height:g.height+"px"})},[e("div",Oe,[e("div",Le,[n(o)?(s(),m("div",Re,[l(b,{"is-square":"","is-text":"",onClick:_},{default:u(()=>[l(f,{name:"menu"})]),_:1})])):k("",!0),e("div",Ie,[l($)])]),e("div",Pe,[e("div",Ee,[n(o)?k("",!0):(s(),p(w,{key:0,class:"page-header__search"}))])]),e("div",qe,[e("div",He,[n(o)?(s(),p(b,{key:0,"is-square":"","is-text":"",onClick:c},{default:u(()=>[l(f,{name:"search"})]),_:1})):k("",!0)]),e("div",De,[l(d)])])])],6)}}}),Ue={class:"page-sidebar-header"},Ve={class:"page-sidebar-header__inner"},ze={class:"page-sidebar-header__logo-icon"},Ae=e("span",{class:"page-sidebar-header__logo-text"}," Blitz Commander ",-1),Fe=S({__name:"PageSidebarHeader",emits:["close"],setup(g,{emit:i}){const t=L(),r=O(),o=i,c=h(()=>t.isTablet||r.isTablet||r.isMobile);return(_,a)=>{const v=N,f=I;return s(),m("div",Ue,[e("div",Ve,[(s(),p(Q((_._.provides[ee]||_.$route).name==="index"?"span":n(D)),{class:"page-sidebar-header__logo",to:"/"},{default:u(()=>[e("span",ze,[l(n(pe),{style:{width:"24px",height:"24px"}})]),Ae]),_:1})),n(c)?(s(),p(f,{key:0,"is-square":"","is-text":"",class:"page-sidebar-header__close",onClick:a[0]||(a[0]=b=>o("close"))},{default:u(()=>[l(v,{name:"close"})]),_:1})):k("",!0)])])}}}),Ye={class:"navigation-list"},We={class:"navigation-list__list"},Xe={key:0,class:"navigation-list__link navigation-list__link--is-active"},Ze=S({__name:"NavigationList",props:{navigation:{type:Array,required:!0,default:()=>[]}},setup(g){const i=P();function t(r){return i.matched.some(o=>{const c=String(o.name).split("-")[0]??"index",_=String(r.to.name).split("-")[0]??"index";return c===_})}return(r,o)=>{const c=N,_=D;return s(),m("nav",Ye,[e("ul",We,[(s(!0),m(F,null,te(g.navigation.filter(a=>!a.isHidden),a=>(s(),m("li",{key:a.key,class:"navigation-list__item"},[t(a)?(s(),m("span",Xe,[a.icon?(s(),p(c,{key:0,name:a.icon,class:"navigation-list__icon"},null,8,["name"])):k("",!0),B(" "+C(a.label),1)])):(s(),p(_,{key:1,class:"navigation-list__link",to:a.to},{default:u(()=>[a.icon?(s(),p(c,{key:0,name:a.icon,class:"navigation-list__icon"},null,8,["name"])):k("",!0),B(" "+C(a.label),1)]),_:2},1032,["to"]))]))),128))])])}}}),Ke=()=>ne("color-mode").value,Ge=S({__name:"ThemeSwitcher",setup(g){const i=Ke(),t=h(()=>i.value==="system"?"":i.value==="dark"?"light":"dark");function r(){const o=i.value==="light";i.preference=o?"dark":"light"}return(o,c)=>{const _=Z,a=I;return s(),p(a,{class:"theme-switcher","is-text":"","is-square":"",title:"Переключить тему",onClick:r},{default:u(()=>[l(_,null,{default:u(()=>[n(t)==="dark"?(s(),p(n(he),{key:0,class:"theme-switcher__icon"})):n(t)==="light"?(s(),p(n(fe),{key:1,class:"theme-switcher__icon"})):k("",!0)]),_:1})]),_:1})}}}),Je={class:"page-sidebar__body"},Qe={class:"page-sidebar__footer"},et={class:"page-sidebar__prop"},tt=e("span",{class:"page-sidebar__prop-title"},"Тема",-1),nt={target:"_blank",href:"https://t.me/+kpbNPjc8nyZlMmIy",class:"page-sidebar__prop link"},ot=e("span",{class:"page-sidebar__prop-title"},"Комьюнити",-1),at={target:"_blank",href:"https://yoomoney.ru/to/4100118432687922",class:"page-sidebar__prop link"},st=e("span",{class:"page-sidebar__prop-title"},"Поблагодарить",-1),it={class:"page-sidebar__version"},rt=S({__name:"PageSidebar",props:{isOpen:{type:Boolean,default:!1},navigation:{type:Array,default:()=>[]},headerHeight:{type:Number,default:0}},setup(g){const i=se(),t=j(),r=L(),o=O(),c=P(),_=h(()=>r.isTablet||o.isTablet||o.isMobile),a=h(()=>i.public.clientVersion);H(_,()=>{_.value||t.toggleMobileMenu(!1)}),H(()=>c.name,(f,b)=>{f!==b&&setTimeout(()=>t.toggleMobileMenu(!1),300)},{immediate:!0});function v(){t.toggleMobileMenu(!1)}return(f,b)=>{const $=Fe,w=Ze,d=Ge,y=N,M=X;return s(),p(ae,{name:"page-sidebar-",duration:600},{default:u(()=>[g.isOpen?(s(),m("div",{key:0,class:Y(["page-sidebar",[n(_)?"page-sidebar--mobile-view":""]]),onClick:oe(v,["self"])},[l(M,{class:"page-sidebar__panel","inner-class":"page-sidebar__inner"},{default:u(()=>[l($,{class:"page-sidebar__header",style:W({height:g.headerHeight+"px"}),onClose:v},null,8,["style"]),e("div",Je,[l(w,{class:"page-sidebar__navigation",navigation:g.navigation},null,8,["navigation"])]),e("div",Qe,[e("label",et,[l(d),tt]),e("a",nt,[l(y,{name:"telegram",style:{margin:"6px"}}),ot]),e("a",at,[l(y,{name:"savings",style:{margin:"6px"}}),st]),e("div",it," v"+C(n(a)),1)])]),_:1})],2)):k("",!0)]),_:1})}}});var ct=be,lt=ue,_t="Expected a function";function dt(g,i,t){var r=!0,o=!0;if(typeof g!="function")throw new TypeError(_t);return lt(t)&&(r="leading"in t?!!t.leading:r,o="trailing"in t?!!t.trailing:o),ct(g,i,{leading:r,maxWait:i,trailing:o})}var ut=dt;const gt=de(ut),mt={class:"page-content__header"},pt={class:"page-content__main"},ht={class:"page-content__sidebar"},Ot=S({__name:"PageContent",emits:["scroll"],setup(g,{emit:i}){const t=P(),r=O(),o=j(),c=L(),_=R(!1),a=R(!1),v=R(54),f=[{label:T.route.getTitle("index"),key:"main",to:{name:"index"},icon:"home"},{label:T.route.getTitle("account"),key:"account",to:{name:"account"},icon:"person"},{label:T.route.getTitle("clan"),key:"clan",to:{name:"clan"},icon:"groups"},{label:T.route.getTitle("leaderboards"),key:"leaderboards",to:{name:"leaderboards"},icon:"leaderboard"},{label:T.route.getTitle("tournaments"),key:"tournaments",to:{name:"tournaments"},icon:"emoji-events"},{label:T.route.getTitle("widgets"),key:"widgets",to:{name:"widgets"},icon:"widgets"}],b=h(()=>c.isTablet||r.isMobileOrTablet),$=h(()=>!b.value||o.mobileMenuOpened),w=i;H(()=>t,()=>{o.toggleMobileMenu(!1)}),ie(()=>{_.value=!0,window==null||window.addEventListener("scroll",d),d()});const d=gt(y,60);function y(){w("scroll",window.scrollY),M()}function M(){return a.value=window.scrollY>10}return(x,U)=>{const E=je,V=X,K=rt,G=Z;return s(),p(G,null,{default:u(()=>[e("div",ce({class:"page-content"},x.$attrs,{class:[{"page-content--is-scrolled":n(a),"page-content--mobile-view":n(b)}]}),[e("header",mt,[l(V,null,{default:u(()=>[l(E,{"is-sticky":n(a),height:n(v)},null,8,["is-sticky","height"])]),_:1})]),e("main",pt,[l(V,null,{default:u(()=>[re(x.$slots,"default")]),_:3})]),e("aside",ht,[l(K,{navigation:f,"is-open":n($),"header-height":n(v)},null,8,["is-open","header-height"])])],16)]),_:3})}}});export{Ot as _};
