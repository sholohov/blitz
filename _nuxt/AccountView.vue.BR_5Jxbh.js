import{N as Se}from"./nuxt-icon.DMN9Msny.js";import{I as Pe,o as d,c as b,a as o,f as U,i as L,s as x,b as v,C as J,k as r,t as A,m as I,r as z,n as K,j as R,w,d as T,F as j,A as Q,q as De,y as It,T as Ke,x as fe,v as We,D as Xe,J as Z,_ as ee,K as Je,L as X,M as Bt,z as xt,g as Rt,N as Ot,O as be,P as Ae,G as we}from"./entry.DP5yAQ98.js";import{_ as Mt,m as se}from"./RatingIcon.vue.VdPeuJ-p.js";import{_ as Qe}from"./nuxt-link.Co6L5LJl.js";import{u as ve,_ as pe,a as te}from"./disableScroll.DjVa_9z0.js";import{_ as ie}from"./ContentLoader.vue.BNVRvGyj.js";import{_ as re,a as Et,i as Vt,g as Lt}from"./CDialog.vue.CALeW1zY.js";import{a as ne,s as Y}from"./request.5IkpOjNq.js";import{a as ce}from"./index.DVpF3T2t.js";import{c as Ut,m as ae,_ as Ye,s as $e}from"./index.Dn1G66RF.js";import{a as le,_ as Ft}from"./CSelect.vue.CduMh7id.js";import{u as qt,a as Nt,b as jt}from"./index.DoNr5vfs.js";import{_ as Ht}from"./PageSection.vue.DWIOeWYk.js";import{_ as Ie}from"./CImage.vue.iwduTxQ3.js";import{f as Ze,m as Gt}from"./index.r8hdWUfc.js";import{_ as Be}from"./WinRate.vue.DT9Oisv9.js";import{_ as et}from"./CTable.vue.K25daDRq.js";import{s as E}from"./index.gZPKXVCX.js";import{_ as zt,a as Kt,b as Wt,d as Xt,e as Jt,i as Qt,f as Yt,g as Zt,c as oe}from"./cloneDeep.6lvBH_wr.js";import{e as ea}from"./isArrayLike.CHHlI3Q0.js";import{u as ta}from"./user.ZEoePuA8.js";const aa={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 62 62"},na=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M28.5 43c8.56 0 15.5-3.134 15.5-7v6c0 3.866-6.94 7-15.5 7S13 45.866 13 42v-6c0 3.866 6.94 7 15.5 7","clip-rule":"evenodd"},null,-1),sa=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M34.5 36c8.56 0 15.5-3.134 15.5-7v6c0 3.866-6.94 7-15.5 7S19 38.866 19 35v-6c0 3.866 6.94 7 15.5 7","clip-rule":"evenodd"},null,-1),oa=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M44 19c0 3.866-6.94 7-15.5 7S13 22.866 13 19v6c0 3.866 6.94 7 15.5 7S44 28.866 44 25zm-1 0c0 1.296-1.21 2.8-3.951 4.038C36.4 24.234 32.672 25 28.5 25s-7.9-.766-10.549-1.962C15.211 21.801 14 20.296 14 19s1.21-2.8 3.951-4.038C20.6 13.766 24.328 13 28.5 13s7.9.766 10.549 1.962C41.789 16.199 43 17.704 43 19","clip-rule":"evenodd"},null,-1),ca=[na,sa,oa];function ia(t,c){return d(),b("svg",aa,[...ca])}const Oe={render(){return Pe(Se,{icon:{render:ia},name:"gold"})}},la={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 62 62"},ra=o("path",{stroke:"currentColor","stroke-width":"4",d:"m31 13.472 3.486 10.73.45 1.382H47.67l-9.127 6.63-1.176.855.45 1.382 3.486 10.73-9.127-6.632L31 37.695l-1.176.854-9.127 6.631 3.487-10.73.449-1.381-1.176-.854-9.127-6.631h12.735l.449-1.382z"},null,-1),ua=[ra];function da(t,c){return d(),b("svg",la,[...ua])}const _a={render(){return Pe(Se,{icon:{render:da},name:"xp"})}},ma={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 62 62"},fa=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M49.306 27.104 44.133 9l9.483 11.574zm-14.426 25L56 23.654v13.793l-14.655 7.759h12.069l-7.759 5.172zm-21.552-25L18.5 9 9.017 20.574zm13.793 25L6 23.656v13.793l14.655 7.758H8.586l7.759 5.173zM21 20l10-4 10 4v16l-10 8-10-8zm6 12.5L29 22l5.5-1-2 7 4-.5-7 11 2-8z","clip-rule":"evenodd"},null,-1),va=[fa];function pa(t,c){return d(),b("svg",ma,[...va])}const ha={render(){return Pe(Se,{icon:{render:pa},name:"prem"})}},ka={class:"account-resources"},ga={class:"account-resources__inner"},ya={key:0,class:"account-resources__item"},ba={class:"account-resources__text"},Aa={class:"account-resources__item"},wa={class:"account-resources__text"},$a={class:"account-resources__item"},Ca={class:"account-resources__text"},Ta={class:"account-resources__item"},Sa={class:"account-resources__text"},Pa=U({__name:"AccountResources",props:{resources:{type:Object,required:!0,default:()=>({})}},setup(t){const c=t,i=L(()=>{const f=c.resources.premium_expires_at*1e3;return f-Date.now()<=0?"":x.date.toTimePassed(f,Date.now(),!0)});return(f,g)=>(d(),b("div",ka,[o("div",ga,[t.resources.is_premium.toLocaleString()?(d(),b("div",ya,[v(r(ha),{class:J(["account-resources__icon",[{"account-resources__icon--prem":r(i)}]])},null,8,["class"]),o("div",ba,A(r(i)||"0 дн."),1)])):I("",!0),o("div",Aa,[v(r(Oe),{class:"account-resources__icon account-resources__icon--gold"}),o("div",wa,A(t.resources.gold.toLocaleString()),1)]),o("div",$a,[v(r(Oe),{class:"account-resources__icon account-resources__icon--credits"}),o("div",Ca,A(t.resources.credits.toLocaleString()),1)]),o("div",Ta,[v(r(_a),{class:"account-resources__icon account-resources__icon--xp"}),o("div",Sa,A(t.resources.free_xp.toLocaleString()),1)])])]))}}),Da={class:"account-preview-details__body"},Ia={class:"account-preview-details__section"},Ba={class:"account-preview-details__props-title"},xa={class:"account-preview-details__props"},Ra={class:"account-preview-details__prop"},Oa=o("span",{class:"account-preview-details__prop-title"}," Дата создания ",-1),Ma={class:"account-preview-details__prop"},Ea=o("span",{class:"account-preview-details__prop-title"}," Дата обновления ",-1),Va={key:0,class:"account-preview-details__section"},La={class:"account-preview-details__props-title"},Ua={class:"account-preview-details__props"},Fa={class:"account-preview-details__prop"},qa=o("span",{class:"account-preview-details__prop-title"}," Зарегистрирован ",-1),Na={class:"account-preview-details__prop"},ja=o("span",{class:"account-preview-details__prop-title"}," Последний визит ",-1),Ha={class:"account-preview-details__section"},Ga={class:"account-preview-details__props-title"},za={key:0,class:"account-preview-details__props"},Ka={class:"account-preview-details__prop"},Wa=o("span",{class:"account-preview-details__prop-title"}," Командир ",-1),Xa={class:"account-preview-details__prop"},Ja=o("span",{class:"account-preview-details__prop-title"}," Участников ",-1),Qa={class:"account-preview-details__prop"},Ya=o("span",{class:"account-preview-details__prop-title"}," Создан ",-1),Za={class:"account-preview-details__prop"},en=o("span",{class:"account-preview-details__prop-title"}," Роль ",-1),tn={class:"account-preview-details__prop"},an=o("span",{class:"account-preview-details__prop-title"}," Вступил ",-1),nn={key:1,class:"account-preview-details__props"},sn=o("div",{class:"account-preview-details__prop"}," Не состоит в клане ",-1),on=[sn],cn={key:1,class:"account-preview-details__section"},ln={class:"account-preview-details__props-title"},rn={class:"account-preview-details__props"},un={class:"account-preview-details__prop"},dn=o("span",{class:"account-preview-details__prop-title"}," Данные собираются со дня регистрации на сайте. ",-1),_n={key:0,class:"account-preview-details__clan-history"},mn={class:"account-preview-details__clan-history-date"},fn={key:1,class:"account-preview-details__clan-history-link"},vn={style:{display:"flex","justify-content":"space-between"}},pn=o("span",null,null,-1),hn=U({__name:"AccountPreviewDetails",props:{account:{type:[Object,null],required:!0},clanAccount:{type:[Object,null],required:!0}},setup(t,{expose:c}){const i=(n,a)=>{var M,F;if(!(n!=null&&n.raw)&&n.timestamp)return x.date.toDate(n.timestamp);const $=a?a.raw?a.raw.joined_at*1e3:a.timestamp:Date.now(),D=n.raw?((M=n.raw)==null?void 0:M.joined_at)*1e3:n.timestamp,P=x.date.toDate(n.raw?((F=n.raw)==null?void 0:F.joined_at)*1e3:n==null?void 0:n.timestamp),O=x.date.toDaysPassed($,D,!0);return`${P} (${O})`},f=t,g=z(null),u=ve(),m=K({user:null,clan:null,clanHistory:[],loading:0,isOpened:!1});async function p(n){m.loading++;try{const{data:a}=await ne.clan.getInfo({clan_id:n});m.clan=a?a[n]:null}catch(a){u.add({type:"error",message:"Получение данных клана"}),console.error(a)}m.loading--}async function l(n){m.loading++;try{const{data:a}=await ce.user.get(n);m.user=a}catch(a){if(console.error(a),ce.isResponse(a)&&a.status===404)return;u.add({type:"error",title:"Получение данных пользователя",message:a instanceof Error?a.message:"Неизвестная ошибка"})}finally{m.loading--}}async function e(n){m.loading++;try{const{data:a}=await ne.clan.getInfo({clan_id:n.join(","),fields:"clan_id,name,tag"});return a??null}catch(a){return u.add({type:"error",title:"Получение данных кланов",message:a instanceof Error?a.message:"Неизвестная ошибка"}),null}finally{m.loading--}}function _(n,a){m.clanHistory=n.map(($,D)=>{const{raw:P,timestamp:O}=$,M=P&&a?a[P.clan_id]:null;return{key:O,date:i($,n[D-1]),info:M&&P?`[${M.tag}] ${x.clan.role(P.role)}`:"Не в клане",clanId:(P==null?void 0:P.clan_id)??null}})}async function k(n){m.loading++;try{const{data:a}=await ce.stat.clansAccounts.getList({id:n});return a??[]}catch(a){return console.error(a),ce.isResponse(a)&&a.status===404?[]:(u.add({type:"error",title:"Получение данных пользователя",message:a instanceof Error?a.message:"Неизвестная ошибка"}),[])}finally{m.loading--}}async function C(){var a;if(m.isOpened||!f.account||(m.isOpened=!0,(a=f.clanAccount)!=null&&a.clan_id&&await p(f.clanAccount.clan_id),await l(f.account.account_id),!m.user))return;const n=await k(f.account.account_id);if(n.length){const $=n.filter(({raw:P})=>P==null?void 0:P.clan_id).map(({raw:P})=>P==null?void 0:P.clan_id),D=await e($);_(n,D)}}function y(){var n;(n=g.value)==null||n.doClose()}async function s(){var n;await C(),await((n=g.value)==null?void 0:n.doOpen())}return c({close:y,open:s}),(n,a)=>{const $=pe,D=Qe,P=ie,O=te,M=re;return t.account?(d(),R(M,{key:0,ref_key:"detailedDialogRef",ref:g,class:"account-preview-details",title:"Дополнительная информация",width:"600px"},{footer:w(()=>[o("div",vn,[pn,v(O,{onClick:y},{default:w(()=>[T(" Закрыть ")]),_:1})])]),default:w(()=>{var F,B,G,ue;return[o("div",Da,[o("div",Ia,[o("h5",Ba,[v($,{class:"account-preview-details__prop-title-icon",name:"sports-esports"}),T(" Аккаунт игрока ")]),o("div",xa,[o("div",Ra,[Oa,T(" "+A(n.$formatter.date.toDate(t.account.created_at*1e3)),1)]),o("div",Ma,[Ea,T(" "+A(n.$formatter.date.toDate(t.account.updated_at*1e3)),1)])])]),r(m).user?(d(),b("div",Va,[o("h5",La,[v($,{class:"account-preview-details__prop-title-icon",name:"person"}),T(" Пользователь ресурса ")]),o("div",Ua,[o("div",Fa,[qa,T(" "+A(n.$formatter.date.toDate((F=r(m).user)==null?void 0:F.createAt)),1)]),o("div",Na,[ja,T(" "+A(n.$formatter.date.toDate((B=r(m).user)==null?void 0:B.visitedAt)),1)])])])):I("",!0),o("div",Ha,[o("h5",Ga,[v($,{class:"account-preview-details__prop-title-icon",name:"groups"}),T(" Клан игрока ")]),r(m).clan&&t.clanAccount?(d(),b("div",za,[o("div",Ka,[Wa,r(m).clan.leader_id?(d(),R(D,{key:0,class:"account-preview-details__clan-history-link link",to:{name:"account-id",params:{id:r(m).clan.leader_id}}},{default:w(()=>{var H;return[T(A((H=r(m).clan)==null?void 0:H.leader_name),1)]}),_:1},8,["to"])):I("",!0)]),o("div",Xa,[Ja,T(" "+A(n.$formatter.number.toInteger((G=r(m).clan)==null?void 0:G.members_count)),1)]),o("div",Qa,[Ya,T(" "+A(n.$formatter.date.toDate(((ue=r(m).clan)==null?void 0:ue.created_at)*1e3)),1)]),o("div",Za,[en,T(" "+A(n.$formatter.clan.role(t.clanAccount.role)),1)]),o("div",tn,[an,T(" "+A(n.$formatter.date.toDate(t.clanAccount.joined_at*1e3)),1)])])):(d(),b("div",nn,on))]),r(m).user?(d(),b("div",cn,[o("h5",ln,[v($,{class:"account-preview-details__prop-title-icon",name:"history"}),T(" Клановая история ")]),o("div",rn,[o("div",un,[dn,r(m).clanHistory.length?(d(),b("div",_n,[(d(!0),b(j,null,Q(r(m).clanHistory,H=>(d(),b("div",{key:H.key,class:"account-preview-details__clan-history-item"},[o("span",mn,A(H.date),1),H.clanId?(d(),R(D,{key:0,class:"account-preview-details__clan-history-link link",to:{name:"clan-id",params:{id:H.clanId}}},{default:w(()=>[T(A(H.info),1)]),_:2},1032,["to"])):(d(),b("span",fn,A(H.info),1))]))),128))])):(d(),b(j,{key:1},[T(" Данные собираются. ")],64))])])])):I("",!0)]),v(P,{"backdrop-light":"",loading:r(m).loading>0},null,8,["loading"])]}),_:1},512)):I("",!0)}}}),kn={class:"account-preview"},gn={key:0,class:"account-preview__inner"},yn={class:"account-preview__league"},bn={class:"account-preview__info"},An={class:"account-preview__nickname"},wn={class:"account-preview__nickname-text"},$n={class:"account-preview__clan-text"},Cn={class:"account-preview__props"},Tn={class:"account-preview__prop"},Sn=o("span",{class:"account-preview__prop-title"}," Последний бой ",-1),Pn={class:"account-preview__prop-value"},Dn={key:0,class:"account-preview__prop"},In=o("span",{class:"account-preview__prop-title"}," Должность ",-1),Bn={class:"account-preview__prop-value"},xn={class:"account-preview__actions"},Rn=U({__name:"AccountPreview",props:{account:{type:[Object,null],default:null,required:!0},clanAccount:{type:[Object,null],default:null,required:!0},loading:{type:Boolean,default:!1}},setup(t){const c=z(null),i=t,f=ve(),g=K({isFavorite:!0,clan:null,detailsLoading:!1});De(()=>{m()});async function u(){var _;g.detailsLoading=!0,await((_=c.value)==null?void 0:_.open()),g.detailsLoading=!1}async function m(){if(!i.account)return;const _=await Y.indexedDB.accountsFavorites.get(i.account.account_id);g.isFavorite=_?_==null?void 0:_.isFavorite:!1}async function p(){i.account&&(g.isFavorite=!g.isFavorite,await Y.indexedDB.accountsFavorites.set(i.account.account_id,{id:i.account.account_id,isFavorite:g.isFavorite}))}function l(){p()}async function e(){var k,C,y,s;await Ut(`${(k=i.account)==null?void 0:k.nickname}/${(C=i.account)==null?void 0:C.account_id}`)?f.add({type:"success",title:"Скопировано",message:`${(y=i.account)==null?void 0:y.nickname}/${(s=i.account)==null?void 0:s.account_id}`,duration:3e3}):f.add({type:"error",message:"При копировании что-то пошло не так",duration:3e3})}return(_,k)=>{const C=Mt,y=Qe,s=pe,n=te,a=ie,$=hn;return d(),b("div",kn,[t.account?(d(),b("div",gn,[o("div",yn,[v(C,{large:"",rating:t.account.statistics.rating},null,8,["rating"])]),o("div",bn,[o("div",An,[o("span",wn,A(t.account.nickname),1)]),t.clanAccount&&t.clanAccount.clan?(d(),R(y,{key:0,class:"account-preview__clan link",title:"Перейти к клану",to:{name:"clan-id",params:{id:t.clanAccount.clan_id}}},{default:w(()=>[o("span",$n," ["+A(t.clanAccount.clan.tag)+"] "+A(t.clanAccount.clan.name),1)]),_:1},8,["to"])):I("",!0),o("div",Cn,[o("div",Tn,[Sn,o("span",Pn,A(_.$formatter.date.toRelativeTime(t.account.last_battle_time*1e3)),1)]),t.clanAccount?(d(),b("div",Dn,[In,o("span",Bn,A(_.$formatter.clan.role(t.clanAccount.role)),1)])):I("",!0)])]),o("div",xn,[v(n,{"is-text":"",class:"account-preview__actions-btn",title:"Копировать (nickname/ID)",onClick:e},{default:w(()=>[v(s,{name:"content-copy"})]),_:1}),v(n,{"is-text":"",class:"account-preview__actions-btn",title:"Добавить в избранные",onClick:l},{default:w(()=>[r(g).isFavorite?(d(),R(s,{key:0,name:"star"})):(d(),R(s,{key:1,name:"star-border"}))]),_:1}),v(n,{"is-text":"",disabled:r(g).detailsLoading,class:"account-preview__actions-btn",title:"Дополнительная информация",onClick:u},{default:w(()=>[v(s,{name:"info"})]),_:1},8,["disabled"])])])):I("",!0),v(a,{loading:t.loading},null,8,["loading"]),v($,{ref_key:"accountPreviewDetailsRef",ref:c,account:t.account,"clan-account":t.clanAccount},null,8,["account","clan-account"])])}}}),On=window.setInterval,Mn={class:"session-panel"},En={class:"session-panel__inner"},Vn={class:"session-panel__item"},Ln={class:"session-panel__buttons"},Un={key:0,class:"session-panel__item session-panel__item--time"},Fn={class:"session-panel__time"},qn=o("span",{class:"session-panel__time-title"}," Время начала ",-1),Nn=o("div",{style:{margin:"0 0 1em"}}," Вы уверены, что хотите сбросить сессию? ",-1),jn={style:{"text-align":"right"}},Me=60,Hn=U({__name:"SessionPanel",props:{updateAt:{type:Number,required:!0,default:0},sessionActive:{type:Boolean,required:!0,default:!1},hideAutoUpdate:{type:[Boolean],default:!1},loading:{type:Boolean,required:!0,default:!1}},emits:["reset","update","session-active"],setup(t,{emit:c}){const i=t,f=qt(),g=Nt(),u=z(null),m=K({autoUpdateChecked:!1,autoUpdateInterval:Me,autoUpdateCounter:Me,autoUpdateTimer:0}),p=L(()=>f.isMobile||g.isMobile);It(()=>{clearInterval(m.autoUpdateTimer)});const l=c;function e(){var y;(y=u.value)==null||y.doOpen()}function _(y){var s;y&&l("reset"),(s=u.value)==null||s.doClose()}function k(){l("session-active",!i.sessionActive)}function C(){if(m.autoUpdateChecked=!m.autoUpdateChecked,m.autoUpdateCounter=m.autoUpdateInterval,!m.autoUpdateChecked){clearInterval(m.autoUpdateTimer);return}const y=()=>{if(clearInterval(m.autoUpdateTimer),m.autoUpdateTimer=On(y,1e3),m.autoUpdateCounter>0){m.autoUpdateCounter--;return}m.autoUpdateCounter=m.autoUpdateInterval,l("update")};l("update"),y()}return(y,s)=>{const n=le,a=pe,$=te,D=ie,P=re;return d(),b("div",Mn,[o("div",En,[o("div",Vn,[o("div",Ln,[v(n,{"model-value":t.sessionActive,class:"session-panel__btn",title:"Просмотр статистики за сессию",onChange:k},{default:w(()=>[T(" Сессия ")]),_:1},8,["model-value"]),t.hideAutoUpdate===!1?(d(),R($,{key:0,class:"session-panel__btn",title:"Автоматическое обновление данных",onClick:C},{before:w(()=>[v(a,{name:"refresh-auto"})]),default:w(()=>[r(p)?I("",!0):(d(),b(j,{key:0},[T(" Обновление ")],64)),T(" "+A(r(m).autoUpdateCounter)+" сек. ",1)]),_:1})):I("",!0),v($,{class:"session-panel__btn",title:"Сброс данных сессии",onClick:e},{default:w(()=>[v(a,{name:"close"})]),_:1})])]),t.updateAt?(d(),b("div",Un,[o("span",Fn,[qn,T(" "+A(y.$formatter.date.toDateTime(t.updateAt)),1)])])):I("",!0)]),v(D,{loading:t.loading},null,8,["loading"]),v(P,{ref_key:"confirmDialogRef",ref:u,title:"Сброс сессии"},{default:w(()=>[Nn,o("div",jn,[v($,{align:"center",width:"80px",onClick:s[0]||(s[0]=O=>_(!0))},{default:w(()=>[T(" Да ")]),_:1}),v($,{align:"center",width:"80px",onClick:s[1]||(s[1]=O=>_(!1))},{default:w(()=>[T(" Нет ")]),_:1})])]),_:1},512)])}}}),Gn=["onClick"],zn={class:"achievements-list__item-inner"},Kn={class:"achievements-list__item-img-wrapper"},Wn={key:0,class:"achievements-list__item-count"},Xn={key:0,class:"achievements-list__item-series"},Jn={key:1,class:"achievements-list__item-details"},Qn=U({__name:"AchievementsList",props:{achievements:{type:Array,default:()=>[]},hideName:{type:[Boolean,String],default:!1}},emits:["medal-click"],setup(t,{emit:c}){const i=c;function f(g){i("medal-click",g)}return(g,u)=>{const m=Ie;return d(),b("div",{class:J(["achievements-list",[t.hideName?"achievements-list--small":""]])},[t.achievements.length?(d(),R(Ke,{key:0,tag:"ul",class:"achievements-list__list",name:"achievements-list__item-"},{default:w(()=>[(d(!0),b(j,null,Q(t.achievements,p=>(d(),b("li",{key:p.key,class:J(["achievements-list__item",[!p.count&&!p.series?"achievements-list__item--no-count":""]])},[o("button",{class:"achievements-list__item-btn",onClick:l=>f(p)},[o("span",zn,[o("span",Kn,[v(m,{class:"achievements-list__item-img",src:p.image,alt:p.key,"data-name":p.name},null,8,["src","alt","data-name"])]),p.count||p.series?(d(),b("span",Wn,[T(A(p.count)+" ",1),p.series?(d(),b("span",Xn," / "+A(p.series),1)):I("",!0)])):I("",!0),t.hideName?I("",!0):(d(),b("span",Jn,A(p.name),1))])],8,Gn)],2))),128))]),_:1})):I("",!0)],2)}}}),Yn={key:0,class:"achievements-block__details"},Zn={class:"achievements-block__details-header"},es={class:"achievements-block__details-name"},ts={class:"achievements-block__details-body"},as=["textContent"],ns=["textContent"],ss={class:"achievements-block__details-footer"},os=U({__name:"AchievementsDetails",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t,{expose:c}){const i=fe(t,"modelValue"),f=z(null),g=z(!1);function u(){g.value=!1}function m(){var p;(p=f.value)==null||p.doOpen()}return c({open:m}),(p,l)=>{const e=Ie,_=te,k=re;return d(),R(k,{ref_key:"detailsRef",ref:f,width:"640px",onOpen:u},{footer:w(()=>[o("div",ss,[v(_,{onClick:l[0]||(l[0]=C=>{var y;return(y=r(f))==null?void 0:y.doClose()})},{default:w(()=>[T(" Закрыть ")]),_:1})])]),default:w(()=>{var C;return[i.value?(d(),b("div",Yn,[o("div",Zn,[v(e,{class:"achievements-block__details-img",src:i.value.image,alt:i.value.key},null,8,["src","alt"]),o("span",es,A((C=i.value)==null?void 0:C.name),1),o("div",ts,[i.value.description?(d(),b("div",{key:0,textContent:A(i.value.description)},null,8,as)):I("",!0),i.value.condition?(d(),b("div",{key:1,textContent:A(i.value.condition)},null,8,ns)):I("",!0)])])])):I("",!0)]}),_:1},512)}}}),cs={key:0,class:"achievements-block__inner"},is={class:"achievements-block__filter"},ls={class:"achievements-block__filter-item"},rs={class:"achievements-block__filter-item"},us={class:"achievements-block__filter-item"},ds={class:"achievements-block__section-title"},_s={key:1,class:"achievements-block__empty"},ms={key:1,class:"achievements-block__empty"},tt=U({__name:"AchievementsBlock",props:{achievements:{type:Object,required:!0,default:()=>({})},achievementsInfo:{type:Object,required:!0,default:()=>({})},filters:{type:Object,required:!0,default:()=>Ze.makeAccountFilters()}},emits:["filters-changed"],setup(t,{emit:c}){const i=["markOfMastery","markOfMasteryI","markOfMasteryII","markOfMasteryIII","heroesOfRassenay","medalLafayettePool","medalRadleyWalters","warrior","medalKolobanov","mainGun","sniper","camper","medalBrothersInArms","medalCrucialContribution"],f=["battle","epic","title","commemorative","step","platoon"],g=t,u=z(),m=z(),p=K({currentMedal:null,showAll:!1}),l=L(()=>{const s=Object.keys(g.achievements.achievements),n=Object.keys(g.achievements.achievements);return s.length||n.length}),e=L(()=>{if(g.filters.achievementsShow==="important"){const n=[];return Object.keys(g.achievements.achievements).forEach(a=>{const $=se.achievementsMedal({key:a,achievements:g.achievements,encyclopedia:g.achievementsInfo});n.push($)}),i.reduce((a,$)=>{const D=n.find(P=>P.key===$);return D?[...a,D]:a},[])}const s=Object.keys(g.achievementsInfo);return g.filters.achievementsShow==="deserved"?s.map(n=>se.achievementsMedal({key:n,achievements:g.achievements,encyclopedia:g.achievementsInfo})).filter(n=>g.achievements.achievements[n.key]||g.achievements.max_series[n.key]).sort((n,a)=>n.key.localeCompare(a.key)):s.map(n=>se.achievementsMedal({key:n,achievements:g.achievements,encyclopedia:g.achievementsInfo})).toSorted((n,a)=>n.key.localeCompare(a.key))}),_=L(()=>{const s={};return e.value.forEach(n=>{s[n.section]||(s[n.section]={name:n.section,items:[]}),s[n.section].items.push(n)}),Object.values(s).sort((n,a)=>f.indexOf(n.name)-f.indexOf(a.name))}),k=c;function C({key:s}){var n;p.currentMedal=e.value.find(a=>a.key===s)??null,(n=m.value)==null||n.open()}function y(s){k("filters-changed",{...g.filters,achievementsShow:s})}return(s,n)=>{const a=le,$=Qn,D=os;return d(),b("div",{ref_key:"mainRef",ref:u,class:"achievements-block"},[r(l)?(d(),b("div",cs,[o("div",is,[o("div",ls,[v(a,{"model-value":t.filters.achievementsShow==="important",onChange:n[0]||(n[0]=P=>y("important"))},{default:w(()=>[T(" Значимые ")]),_:1},8,["model-value"])]),o("div",rs,[v(a,{"model-value":t.filters.achievementsShow==="deserved",onChange:n[1]||(n[1]=P=>y("deserved"))},{default:w(()=>[T(" Заслуженные ")]),_:1},8,["model-value"])]),o("div",us,[v(a,{"model-value":t.filters.achievementsShow===null,onChange:n[2]||(n[2]=P=>y(null))},{default:w(()=>[T(" Все ")]),_:1},8,["model-value"])])]),r(e).length?(d(),b(j,{key:0},[t.filters.achievementsShow==="important"?(d(),R($,{key:0,achievements:r(e),"hide-name":!0,onMedalClick:C},null,8,["achievements"])):(d(!0),b(j,{key:1},Q(r(_),P=>(d(),b("div",{key:P.name,class:"achievements-block__section"},[o("div",ds,A(s.$formatter.achievements.section(P.name)),1),v($,{achievements:P.items,"hide-count":r(p).showAll,onMedalClick:C},null,8,["achievements","hide-count"])]))),128))],64)):(d(),b("div",_s," Нет значимых достижений ")),v(D,{ref_key:"detailsRef",ref:m,modelValue:r(p).currentMedal,"onUpdate:modelValue":n[3]||(n[3]=P=>r(p).currentMedal=P)},null,8,["modelValue"])])):(d(),b("div",ms," Нет достижений "))],512)}}}),he=U({__name:"TankType",props:We({size:{type:Number,default:24},isPremium:{type:Boolean,default:!1},isCollectible:{type:[Boolean,String],default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const c={lightTank:Z(()=>ee(()=>import("./light-tank.BbMMrulR.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),mediumTank:Z(()=>ee(()=>import("./medium-tank.0Lm3c3hb.js"),__vite__mapDeps([5,1,2,3,4]),import.meta.url)),heavyTank:Z(()=>ee(()=>import("./heavy-tank.BVnvFa0q.js"),__vite__mapDeps([6,1,2,3,4]),import.meta.url)),"AT-SPG":Z(()=>ee(()=>import("./at-spg.Dnvzawdm.js"),__vite__mapDeps([7,1,2,3,4]),import.meta.url))},i=fe(t,"modelValue"),f=L(()=>["AT-SPG","heavyTank","lightTank","mediumTank"].includes(i.value)?i.value:(console.warn("Not valid tank type - ",i.value),"span"));return(g,u)=>(d(),R(Xe(c[r(f)]),{filled:!0,"font-controlled":!1,class:J(["tank-type",[t.isPremium?"tank-type--is-premium":"",t.isCollectible?"tank-type--is-collectible":""]]),width:t.size,height:t.size},null,8,["class","width","height"]))}}),fs=["src","alt"],at=U({__name:"TankNation",props:We({size:{type:[Number,String],default:24}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const c=fe(t,"modelValue");return(i,f)=>(d(),b("img",{style:Je({width:`${t.size}px`,height:`${t.size}px`}),src:`/img/nations/nation-${c.value}.svg`,alt:c.value,class:"tank-nation"},null,12,fs))}}),vs={class:"account-infographics"},ps={class:"account-infographics__filters"},hs={class:"account-infographics__filters-chips"},ks={class:"account-infographics__chart-list"},gs={class:"account-infographics__chart-label"},ys={class:"account-infographics__line-icon"},bs={key:2},As={key:"battles",class:"account-infographics__line-value"},ws={key:"damagePerBattle",class:"account-infographics__line-value"},$s=U({__name:"AccountInfographics",props:{tanks:{type:Array,default:()=>[],required:!0}},setup(t){const c=t,i=z("battles"),f=[{value:"battles",label:x.stat.accountProp("battles")},{value:"winRate",label:x.stat.accountProp("winRate")},{value:"damagePerBattle",label:x.stat.accountProp("damagePerBattle")}],g=L(()=>[{label:"По нации",key:"nation",value:u("nation")},{label:"По уровню",key:"tier",value:u("tier")},{label:"По типу",key:"type",value:u("type")}]);function u(p){var e;const l={};if(!((e=c.tanks)!=null&&e.length))return l;c.tanks.forEach(_=>{const k=_[p];_.tier&&(k in l||(l[k]={key:k,battles:0,winRate:0,damagePerBattle:0,lineHeight:0}),l[k].battles+=_.all.battles,l[k].winRate+=_.all.wins,l[k].damagePerBattle+=_.all.damage_dealt)});for(const _ in l){const k=l[_].battles;l[_].winRate=k?l[_].winRate/(k/100):0,l[_].damagePerBattle=k?l[_].damagePerBattle/k:0}for(const _ in l){const C=Math.min(...Object.values(l).map(s=>s[i.value])),y=Math.max(...Object.values(l).map(s=>s[i.value]))-C/1.1;l[_].lineHeight=(l[_][i.value]-C/1.1)/(y/100)}return l}function m(p){i.value=p}return(p,l)=>{const e=le,_=he,k=at,C=Be;return d(),b("div",vs,[o("div",ps,[o("div",hs,[(d(),b(j,null,Q(f,y=>v(e,{key:y.value,"model-value":y.value===r(i),onChange:s=>m(y.value)},{default:w(()=>[T(A(y.label),1)]),_:2},1032,["model-value","onChange"])),64))])]),o("div",ks,[(d(!0),b(j,null,Q(r(g),y=>(d(),b("div",{key:y.key,class:J(["account-infographics__chart",[`account-infographics__chart--${y.key}`]])},[o("span",gs,A(y.label),1),(d(!0),b(j,null,Q(y.value,s=>(d(),b("div",{key:s.key,class:"account-infographics__line"},[o("span",ys,[y.key==="type"?(d(),R(_,{key:0,modelValue:s.key,"onUpdate:modelValue":n=>s.key=n},null,8,["modelValue","onUpdate:modelValue"])):y.key==="nation"?(d(),R(k,{key:1,modelValue:s.key,"onUpdate:modelValue":n=>s.key=n,size:"22"},null,8,["modelValue","onUpdate:modelValue"])):y.key==="tier"?(d(),b("span",bs,A(p.$formatter.encyclopedia.tier(s.key)),1)):(d(),b(j,{key:3},[T(A(s.key),1)],64))]),v(Ke,{tag:"span",name:"account-infographics__line-value-",class:"account-infographics__line-progress",style:Je({"--chart-line-width":s.lineHeight/100})},{default:w(()=>[r(i)==="battles"?(d(),b("span",As,A(p.$formatter.number.toInteger(s.battles)),1)):I("",!0),r(i)==="winRate"?(d(),R(C,{key:"winRate",modelValue:s.winRate,"onUpdate:modelValue":n=>s.winRate=n,class:"account-infographics__line-value"},null,8,["modelValue","onUpdate:modelValue"])):I("",!0),r(i)==="damagePerBattle"?(d(),b("span",ws,A(p.$formatter.number.toInteger(s.damagePerBattle)),1)):I("",!0)]),_:2},1032,["style"])]))),128))],2))),128))])])}}}),Cs=U({__name:"MarkOfMastery",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t){const c={1:Z(()=>ee(()=>import("./3.DmM6oIfm.js"),__vite__mapDeps([8,1,2,3,4]),import.meta.url)),2:Z(()=>ee(()=>import("./2.BBaeKgit.js"),__vite__mapDeps([9,1,2,3,4]),import.meta.url)),3:Z(()=>ee(()=>import("./1.BTeCVUWO.js"),__vite__mapDeps([10,1,2,3,4]),import.meta.url)),4:Z(()=>ee(()=>import("./М.-X8ZSvff.js"),__vite__mapDeps([11,1,2,3,4]),import.meta.url))},i=fe(t,"modelValue");return(f,g)=>(d(),R(Xe(i.value?c[i.value]:"span"),{class:J(["mark-of-mastery",[i.value?"mark-of-mastery--"+i.value:""]])},null,8,["class"]))}}),Ts={class:"account-tanks-table"},Ss={key:0,class:"account-tanks-table__total"},Ps={class:"account-tanks-table__total-value"},Ds={class:"account-tanks-table__table"},Is=["title"],Bs={class:"account-tanks-table__name-text"},xs={key:0,class:"account-tanks-table__diff"},Rs={key:0,class:"account-tanks-table__diff"},Os={key:0,class:"account-tanks-table__diff"},Ms={key:0,class:"account-tanks-table__diff"},Es={key:0,class:"account-tanks-table__diff"},Vs={key:0,class:"account-tanks-table__diff"},Ls={key:0,class:"account-tanks-table__diff"},Us={key:0,class:"account-tanks-table__diff"},Fs={class:"account-tanks-table__diff"},nt=U({__name:"AccountTanksTable",props:{tanks:{type:Array,default:()=>[],required:!0},tanksSessions:{type:Array,default:null,required:!1},showDiff:{type:[Boolean,String],default:!1},noCount:{type:[Boolean,String],default:!1},height:{type:String,default:void 0},maxHeight:{type:String,default:void 0},sort:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["sort","item-click"],setup(t,{emit:c}){const i=t,f=[{key:"type",label:"Тип",width:60,sortable:!0},{key:"name",label:"Название",sortable:!0},{key:"tier",label:"I-X",sortable:!0},{key:"battles",label:"Бои",sortable:!0,sortMethod(l,e){const _=l,k=e;return _.all.battles-k.all.battles},formatter:l=>x.number.toInteger(l)},{key:"winRate",label:"Победы",sortable:!0,sortMethod(l,e){const _=l,k=e;return _.all.winRate-k.all.winRate},formatter:l=>x.number.toFloatPercent(l)},{key:"damagePerBattle",label:"Урон",sortable:!0,sortMethod(l,e){const _=l,k=e;return _.all.damagePerBattle-k.all.damagePerBattle},formatter:l=>x.number.toInteger(l)},{key:"xpPerBattle",label:"Опыт",sortable:!0,sortMethod(l,e){const _=l,k=e;return _.all.xpPerBattle-k.all.xpPerBattle},formatter:l=>x.number.toInteger(l)},{key:"fragPerBattle",label:"Уничт.",tooltip:"Уничтожено За Бой",sortable:!0,sortMethod(l,e){const _=l,k=e;return _.all.fragPerBattle-k.all.fragPerBattle},formatter:l=>x.number.toFloatNumber(l)},{key:"hitRate",label:"Точн.",tooltip:"Точность стрельбы",sortable:!0,sortMethod(l,e){const _=l,k=e;return _.all.hitRate-k.all.hitRate},formatter:l=>x.number.toFloatPercent(l)},{key:"surviveRate",label:"Выж.",tooltip:"Выживаемость",sortable:!0,sortMethod(l,e){const _=l,k=e;return _.all.surviveRate-k.all.surviveRate},formatter:l=>x.number.toFloatPercent(l)},{key:"spottedPerBattle",label:"Обн.",tooltip:"Обнаружено за бой",sortable:!0,sortMethod(l,e){const _=l,k=e;return _.all.spottedPerBattle-k.all.spottedPerBattle},formatter:l=>x.number.toFloatNumber(l)},{key:"mark_of_mastery",label:"M",tooltip:"Знак классности",sortable:!0,formatter:l=>x.stat.markOfMastery(Number(l))||"---"},{key:"last_battle_time",label:"Последний бой",sortable:!0}],g=L(()=>{let l={};return i.tanks.forEach((e,_)=>{_?l=E.sum(l,e.all):l=e.all}),E.tank(l)}),u=c;function m(l){u("item-click",l)}function p(l,e){var n,a,$;const _=l,k=((n=i.tanksSessions)==null?void 0:n.find(D=>D.tank_id===_.tank_id))??null,C=k?E.diff(_.all,E.tank(k.all)):null,y=(C==null?void 0:C[e])||0,s=($=(a=f.find(D=>D.key===e))==null?void 0:a.formatter)==null?void 0:$.call(a,y);return y>0?"+"+s:s}return(l,e)=>{const _=he,k=te,C=Be,y=Cs,s=et,n=ie;return d(),b("div",Ts,[t.noCount===!1?(d(),b("div",Ss,[T(" Кол-во: "),o("span",Ps,A(t.tanks.length||0),1)])):I("",!0),o("div",Ds,[v(s,{headers:f,data:t.tanks,summary:r(g),"default-sort":t.sort,"scroll-auto-disabling":"","no-wrap":"","row-key":"tank_id",height:t.height,"max-height":t.maxHeight,onSort:e[0]||(e[0]=a=>u("sort",a))},{index:w(({index:a})=>[T(A(a+1),1)]),type:w(({row:a})=>[o("div",{class:"account-tanks-table__type",title:a.is_premium?"Премиум танк":""},[v(_,{modelValue:a.type,"onUpdate:modelValue":$=>a.type=$,"is-premium":a.is_premium,"is-collectible":a.is_collectible},null,8,["modelValue","onUpdate:modelValue","is-premium","is-collectible"])],8,Is)]),name:w(({row:a})=>[v(k,{class:"account-tanks-table__name","is-text":"",onClick:$=>m(a)},{default:w(()=>[o("span",Bs,A(a.name??`Tank ID: ${a.tank_id}`),1)]),_:2},1032,["onClick"])]),battles:w(({row:a})=>[T(A(a.all.battles)+" ",1),t.showDiff!==!1?(d(),b("div",xs,A(p(a,"battles")),1)):I("",!0)]),winRate:w(({row:a})=>[v(C,{"model-value":a.all.winRate,class:"account-tanks-table__win-rate"},null,8,["model-value"]),t.showDiff!==!1?(d(),b("div",Rs,A(p(a,"winRate")),1)):I("",!0)]),damagePerBattle:w(({row:a})=>[T(A(a.all.damagePerBattle)+" ",1),t.showDiff!==!1?(d(),b("div",Os,A(p(a,"damagePerBattle")),1)):I("",!0)]),xpPerBattle:w(({row:a})=>[T(A(a.all.xpPerBattle)+" ",1),t.showDiff!==!1?(d(),b("div",Ms,A(p(a,"xpPerBattle")),1)):I("",!0)]),fragPerBattle:w(({row:a})=>[T(A(a.all.fragPerBattle)+" ",1),t.showDiff!==!1?(d(),b("div",Es,A(p(a,"fragPerBattle")),1)):I("",!0)]),hitRate:w(({row:a})=>[T(A(l.$formatter.number.toFloatPercent(a.all.hitRate))+" ",1),t.showDiff!==!1?(d(),b("div",Vs,A(p(a,"hitRate")),1)):I("",!0)]),surviveRate:w(({row:a})=>[T(A(l.$formatter.number.toFloatPercent(a.all.surviveRate))+" ",1),t.showDiff!==!1?(d(),b("div",Ls,A(p(a,"surviveRate")),1)):I("",!0)]),spottedPerBattle:w(({row:a})=>[T(A(a.all.spottedPerBattle)+" ",1),t.showDiff!==!1?(d(),b("div",Us,A(p(a,"spottedPerBattle")),1)):I("",!0)]),mark_of_mastery:w(({row:a})=>[v(y,{"model-value":a.mark_of_mastery,title:"Знак классности",width:"20",height:"20"},null,8,["model-value"])]),last_battle_time:w(({row:a})=>[T(A(l.$formatter.date.toRelativeTime(a.last_battle_time*1e3))+" ",1),o("div",Fs,A(l.$formatter.date.toDateTime(a.last_battle_time*1e3)),1)]),_:1},8,["data","summary","default-sort","height","max-height"]),v(n,{loading:t.loading},null,8,["loading"])])])}}}),qs={class:"account-daily-stat"},Ns={class:"account-daily-stat__count"},js=o("span",{class:"account-daily-stat__count-title"}," Кол-во: ",-1),Hs={class:"account-daily-stat__table"},Gs={style:{display:"flex","justify-content":"flex-end"}},zs=U({__name:"AccountDailyStat",props:{accountId:{type:[Number,String],default:0,required:!0},vehicles:{type:Object,default:()=>({}),required:!0}},emits:["sort"],setup(t,{emit:c}){const i=t,f=z(null),g=ve(),u=K({loading:0,summary:{},items:[],currentItem:null,accounts:[],tanks:[]}),m=K({order:"desc",prop:"last_battle_time"}),p=[{key:"index",label:"#"},{key:"date",label:"Дата"},{key:"tanks",label:"Танков"},{key:"tier",label:"I-X",formatter:s=>X(s)?x.number.toFloatNumber(s):"---"},{key:"battles",label:"Бои",formatter:s=>X(s)?x.number.toInteger(s):"---"},{key:"winRate",label:"Победы",formatter:s=>X(s)?x.number.toFloatPercent(s):"---"},{key:"damagePerBattle",label:"Урон",formatter:s=>X(s)?x.number.toInteger(s):"---"},{key:"xpPerBattle",label:"Опыт",formatter:s=>X(s)?x.number.toInteger(s):"---"},{key:"fragPerBattle",label:"Уничт.",tooltip:"Уничтожено За Бой",formatter:s=>X(s)?x.number.toFloatNumber(s):"---"},{key:"hitRate",label:"Точн.",tooltip:"Точность стрельбы",formatter:s=>X(s)?x.number.toFloatPercent(s):"---"},{key:"surviveRate",label:"Выж.",tooltip:"Выживаемость",formatter:s=>X(s)?x.number.toFloatPercent(s):"---"},{key:"spottedPerBattle",label:"Обн.",tooltip:"Обнаружено за бой",formatter:s=>X(s)?x.number.toFloatNumber(s):"---"}],l=L(()=>u.currentItem?se.accountTanks(u.currentItem.tanks,i.vehicles,[]):[]);De(async()=>{i.accountId&&(await _(i.accountId),k())});const e=c;async function _(s){const n=new Date,a=new Date;n.setDate(n.getDate()-90);const $={id:s,dateStart:n.toISOString(),dateEnd:a.toISOString()};try{const[D,P]=await Promise.all([ce.stat.accounts.getDiff($),ce.stat.tanks.getDiff($)]);u.tanks=P.data,u.accounts=D.data}catch(D){g.add({type:"error",title:"Получение дневной статистики",message:D instanceof Error?D.message:"Неизвестная ошибка"}),console.error(D)}}function k(){let s=null;u.accounts.forEach(n=>{var P;const a=E.accountAll(n.raw.statistics.all),$=(P=u.tanks.find(O=>{const M=x.date.toDate(O.timestamp),F=x.date.toDate(n.timestamp);return M===F}))==null?void 0:P.raw,D=()=>{const O=($==null?void 0:$.length)??0;return(($==null?void 0:$.reduce((M,F)=>M+i.vehicles[F.tank_id].tier||0,0))??0)/O};u.items.push({id:n.id,date:x.date.toDate(n.timestamp),battles:a.battles,winRate:a.winRate,damagePerBattle:a.damagePerBattle,xpPerBattle:a.xpPerBattle,fragPerBattle:a.fragPerBattle,hitRate:a.hitRate,surviveRate:a.surviveRate,spottedPerBattle:a.spottedPerBattle,tanks:$||[],tier:D()}),s=s?E.sum(s,a):a}),u.summary=s?E.accountAll(s):{}}async function C(s){var n;u.currentItem=s,await Bt(),(n=f.value)==null||n.doOpen()}function y(){var s;u.currentItem=null,(s=f.value)==null||s.doClose()}return(s,n)=>{var F;const a=te,$=Be,D=et,P=ie,O=nt,M=re;return d(),b("div",qs,[o("div",Ns,[js,T(" "+A(r(u).items.length),1)]),o("div",Hs,[v(D,{headers:p,data:r(u).items,"default-sort":r(m),summary:r(u).summary,"scroll-auto-disabling":"","no-wrap":"","row-key":"timestamp","max-height":"375px",onSort:n[0]||(n[0]=B=>e("sort",B))},{index:w(({index:B})=>[T(A(B+1),1)]),date:w(({row:B})=>[v(a,{"is-text":"",onClick:G=>C(B)},{default:w(()=>[T(A(B.date),1)]),_:2},1032,["onClick"])]),tanks:w(({row:B})=>[T(A(B.tanks?s.$formatter.number.toInteger(B.tanks.length):"---"),1)]),winRate:w(({row:B})=>[v($,{modelValue:B.winRate,"onUpdate:modelValue":G=>B.winRate=G,class:"account-daily-stat__win-rate"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["data","default-sort","summary"])]),v(P,{loading:r(u).loading>0},null,8,["loading"]),v(M,{ref_key:"tanksDetailsRef",ref:f,width:"1280px",title:"Статистика за "+((F=r(u).currentItem)==null?void 0:F.date),onClosed:n[1]||(n[1]=B=>r(u).currentItem=null)},{footer:w(()=>[o("div",Gs,[v(a,{onClick:y},{default:w(()=>[T(" Закрыть ")]),_:1})])]),default:w(()=>[r(u).currentItem?(d(),R(O,{key:0,tanks:r(l),"max-height":"calc(100vh - 200px)"},null,8,["tanks"])):I("",!0)]),_:1},8,["title"])])}}});var Ks="__lodash_hash_undefined__";function Ws(t){return this.__data__.set(t,Ks),this}var Xs=Ws;function Js(t){return this.__data__.has(t)}var Qs=Js,Ys=zt,Zs=Xs,eo=Qs;function me(t){var c=-1,i=t==null?0:t.length;for(this.__data__=new Ys;++c<i;)this.add(t[c])}me.prototype.add=me.prototype.push=Zs;me.prototype.has=eo;var to=me;function ao(t,c){for(var i=-1,f=t==null?0:t.length;++i<f;)if(c(t[i],i,t))return!0;return!1}var no=ao;function so(t,c){return t.has(c)}var oo=so,co=to,io=no,lo=oo,ro=1,uo=2;function _o(t,c,i,f,g,u){var m=i&ro,p=t.length,l=c.length;if(p!=l&&!(m&&l>p))return!1;var e=u.get(t),_=u.get(c);if(e&&_)return e==c&&_==t;var k=-1,C=!0,y=i&uo?new co:void 0;for(u.set(t,c),u.set(c,t);++k<p;){var s=t[k],n=c[k];if(f)var a=m?f(n,s,k,c,t,u):f(s,n,k,t,c,u);if(a!==void 0){if(a)continue;C=!1;break}if(y){if(!io(c,function($,D){if(!lo(y,D)&&(s===$||g(s,$,i,f,u)))return y.push(D)})){C=!1;break}}else if(!(s===n||g(s,n,i,f,u))){C=!1;break}}return u.delete(t),u.delete(c),C}var st=_o;function mo(t){var c=-1,i=Array(t.size);return t.forEach(function(f,g){i[++c]=[g,f]}),i}var fo=mo;function vo(t){var c=-1,i=Array(t.size);return t.forEach(function(f){i[++c]=f}),i}var po=vo,Ee=Et,Ve=Kt,ho=ea,ko=st,go=fo,yo=po,bo=1,Ao=2,wo="[object Boolean]",$o="[object Date]",Co="[object Error]",To="[object Map]",So="[object Number]",Po="[object RegExp]",Do="[object Set]",Io="[object String]",Bo="[object Symbol]",xo="[object ArrayBuffer]",Ro="[object DataView]",Le=Ee?Ee.prototype:void 0,Ce=Le?Le.valueOf:void 0;function Oo(t,c,i,f,g,u,m){switch(i){case Ro:if(t.byteLength!=c.byteLength||t.byteOffset!=c.byteOffset)return!1;t=t.buffer,c=c.buffer;case xo:return!(t.byteLength!=c.byteLength||!u(new Ve(t),new Ve(c)));case wo:case $o:case So:return ho(+t,+c);case Co:return t.name==c.name&&t.message==c.message;case Po:case Io:return t==c+"";case To:var p=go;case Do:var l=f&bo;if(p||(p=yo),t.size!=c.size&&!l)return!1;var e=m.get(t);if(e)return e==c;f|=Ao,m.set(t,c);var _=ko(p(t),p(c),f,g,u,m);return m.delete(t),_;case Bo:if(Ce)return Ce.call(t)==Ce.call(c)}return!1}var Mo=Oo,Ue=Wt,Eo=1,Vo=Object.prototype,Lo=Vo.hasOwnProperty;function Uo(t,c,i,f,g,u){var m=i&Eo,p=Ue(t),l=p.length,e=Ue(c),_=e.length;if(l!=_&&!m)return!1;for(var k=l;k--;){var C=p[k];if(!(m?C in c:Lo.call(c,C)))return!1}var y=u.get(t),s=u.get(c);if(y&&s)return y==c&&s==t;var n=!0;u.set(t,c),u.set(c,t);for(var a=m;++k<l;){C=p[k];var $=t[C],D=c[C];if(f)var P=m?f(D,$,C,c,t,u):f($,D,C,t,c,u);if(!(P===void 0?$===D||g($,D,i,f,u):P)){n=!1;break}a||(a=C=="constructor")}if(n&&!a){var O=t.constructor,M=c.constructor;O!=M&&"constructor"in t&&"constructor"in c&&!(typeof O=="function"&&O instanceof O&&typeof M=="function"&&M instanceof M)&&(n=!1)}return u.delete(t),u.delete(c),n}var Fo=Uo,Te=Xt,qo=st,No=Mo,jo=Fo,Fe=Jt,qe=Zt,Ne=Qt,Ho=Yt,Go=1,je="[object Arguments]",He="[object Array]",_e="[object Object]",zo=Object.prototype,Ge=zo.hasOwnProperty;function Ko(t,c,i,f,g,u){var m=qe(t),p=qe(c),l=m?He:Fe(t),e=p?He:Fe(c);l=l==je?_e:l,e=e==je?_e:e;var _=l==_e,k=e==_e,C=l==e;if(C&&Ne(t)){if(!Ne(c))return!1;m=!0,_=!1}if(C&&!_)return u||(u=new Te),m||Ho(t)?qo(t,c,i,f,g,u):No(t,c,l,i,f,g,u);if(!(i&Go)){var y=_&&Ge.call(t,"__wrapped__"),s=k&&Ge.call(c,"__wrapped__");if(y||s){var n=y?t.value():t,a=s?c.value():c;return u||(u=new Te),g(n,a,i,f,u)}}return C?(u||(u=new Te),jo(t,c,i,f,g,u)):!1}var Wo=Ko,Xo=Wo,ze=Vt;function ot(t,c,i,f,g){return t===c?!0:t==null||c==null||!ze(t)&&!ze(c)?t!==t&&c!==c:Xo(t,c,i,f,ot,g)}var Jo=ot,Qo=Jo;function Yo(t,c){return Qo(t,c)}var Zo=Yo;const ec=Lt(Zo),tc={class:"account-tanks-filters"},ac={class:"account-tanks-filters__inner"},nc={class:"account-tanks-filters__list"},sc={style:{"font-weight":"500",width:"24px","text-align":"center"}},oc={key:0,class:"account-tanks-filters__item"},cc={class:"account-tanks-filters__item"},ic={class:"account-tanks-filters__item"},lc=U({__name:"AccountTanksFilters",props:{defaultFilters:{type:Object,default:null,required:!0},filters:{type:Object,default:null,required:!0},isPrivate:{type:[Boolean,String],default:!1,required:!0}},emits:["change","clear"],setup(t,{emit:c}){const i=t,f=["ussr","germany","usa","uk","japan","china","france","european","other"],g=[1,2,3,4,5,6,7,8,9,10].map(n=>({value:n,label:x.encyclopedia.tier(n)})),u=["lightTank","mediumTank","heavyTank","AT-SPG"],m=[{value:null,label:"Премиум: показать"},{value:!0,label:"Премиум: только"},{value:!1,label:"Премиум: спрятать"}],p=[{value:null,label:"В ангаре: все"},{value:1,label:"В ангаре: есть"},{value:0,label:"В ангаре: нет"}],l=L(()=>!ec(i.filters,i.defaultFilters)),e=c;function _(n){let a=i.filters.tankNation;a.includes(n)?a=a.filter($=>$!==n):a.push(n),e("change",{...i.filters,tankNation:a})}function k(n){let a=i.filters.tankTire;a.includes(n)?a=a.filter($=>$!==n):a.push(n),e("change",{...i.filters,tankTire:a})}function C(n){let a=i.filters.tankType;a.includes(n)?a=a.filter($=>$!==n):a.push(n),e("change",{...i.filters,tankType:a})}function y(){e("change",{...i.filters})}function s(n){e("change",{...i.filters,tankIsPremium:n})}return(n,a)=>{const $=at,D=le,P=he,O=Ft,M=pe,F=te;return d(),b("div",tc,[o("div",ac,[o("ul",nc,[o("li",{class:J(["account-tanks-filters__item",["account-tanks-filters__item--overflow"]])},[(d(),b(j,null,Q(f,B=>v(D,{key:B,"model-value":t.filters.tankNation.includes(B),class:"account-tanks-filters__btn",title:n.$formatter.encyclopedia.nation(B),onChange:G=>_(B)},{default:w(()=>[v($,{"model-value":B},null,8,["model-value"])]),_:2},1032,["model-value","title","onChange"])),64))]),o("li",{class:J(["account-tanks-filters__item",["account-tanks-filters__item--overflow"]])},[(d(),b(j,null,Q(u,B=>v(D,{key:B,"model-value":t.filters.tankType.includes(B),class:"account-tanks-filters__btn",title:"Тип",onChange:G=>C(B)},{default:w(()=>[v(P,{"model-value":B},{default:w(()=>[T(" /> ")]),_:2},1032,["model-value"])]),_:2},1032,["model-value","onChange"])),64))]),o("li",{class:J(["account-tanks-filters__item",["account-tanks-filters__item--overflow"]])},[(d(!0),b(j,null,Q(r(g),B=>(d(),R(D,{key:B.value,"model-value":t.filters.tankTire.includes(B.value),class:"account-tanks-filters__btn",title:"Уровень "+B,onChange:G=>k(B.value)},{default:w(()=>[o("span",sc,A(B.label),1)]),_:2},1032,["model-value","title","onChange"]))),128))]),t.isPrivate?(d(),b("li",oc,[v(O,{"model-value":t.filters.tankInGarage,options:p,onChange:y},null,8,["model-value"])])):I("",!0),o("li",cc,[v(O,{"model-value":t.filters.tankIsPremium,options:m,onChange:s},null,8,["model-value"])]),o("li",ic,[v(F,{title:"Очистить фильтры",disabled:!r(l),onClick:a[0]||(a[0]=B=>e("clear"))},{default:w(()=>[v(M,{name:"clear"})]),_:1},8,["disabled"])])])])])}}}),rc={key:0,class:"account-tank"},uc={class:"account-tank__header"},dc={class:"account-tank__img-wrapper"},_c={class:"account-tank__tier"},mc={class:"account-tank__props"},fc={class:"account-tank__prop"},vc=o("span",{class:"account-tank__prop-name"}," Нация: ",-1),pc={class:"account-tank__prop"},hc=o("span",{class:"account-tank__prop-name"}," Последний бой: ",-1),kc=o("h4",null,"Статистика",-1),gc=o("h4",null,"Достижения",-1),yc=U({__name:"AccountTank",props:{tank:{type:Object,default:()=>({}),required:!0},tankSession:{type:Object,default:()=>({}),required:!0},achievementsInfo:{type:Object,default:()=>({}),required:!0}},setup(t){const c=t,i=K({showAllMetrics:!1,filters:Gt()}),f=L(()=>ae.tank({tank:c.tank,tankSession:c.tankSession,plates:i.showAllMetrics?null:["battles","winRate","damagePerBattle","surviveRate","fragPerBattle","winsInPlatoon"]}));function g(u){i.filters=u}return(u,m)=>{var C;const p=Ie,l=he,e=le,_=Ye,k=tt;return t.tank?(d(),b("div",rc,[o("div",uc,[o("div",dc,[v(p,{class:"account-tank__img account-tank__img--nation",alt:"tank.nation",src:`/img/nations/nation-${t.tank.nation}.svg`},null,8,["src"]),v(p,{class:"account-tank__img account-tank__img--tank",alt:t.tank.name,src:(C=t.tank.images)==null?void 0:C.preview},null,8,["alt","src"]),v(l,{size:28,class:"account-tank__type","model-value":t.tank.type,"is-premium":t.tank.is_premium,"is-collectible":t.tank.is_collectible},null,8,["model-value","is-premium","is-collectible"]),o("div",_c,A(u.$formatter.encyclopedia.tier(t.tank.tier)),1)]),o("div",mc,[o("div",fc,[vc,T(" "+A(u.$formatter.encyclopedia.nation(t.tank.nation)),1)]),o("div",pc,[hc,T(" "+A(u.$formatter.date.toDateTime(t.tank.last_battle_time*1e3)),1)])])]),kc,v(e,{modelValue:r(i).showAllMetrics,"onUpdate:modelValue":m[0]||(m[0]=y=>r(i).showAllMetrics=y),class:"account-tank__show-all-metrics"},{default:w(()=>[T(" Все показатели ")]),_:1},8,["modelValue"]),v(_,{items:r(f)},null,8,["items"]),gc,v(k,{achievements:t.tank.achievements,"achievements-info":t.achievementsInfo,filters:r(i).filters,onFiltersChanged:g},null,8,["achievements","achievements-info","filters"])])):I("",!0)}}}),bc={class:"accounts-metrics"},Ac={class:"accounts-metrics__filters"},wc={class:"accounts-metrics__filters-item"},$c={class:"accounts-metrics__filters-item"},Cc={class:"accounts-metrics__plates"},Tc=U({__name:"AccountsMetrics",props:{metrics:{type:Array,required:!0,default:()=>[]},filters:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filters","is-open"],setup(t,{emit:c}){const i=t,f=K({isOpen:!1}),g=c;xt(()=>f.isOpen,()=>g("is-open",f.isOpen));function u(){const m=i.filters.battleMode==="random"?"rating":"random";g("filters",{...i.filters,battleMode:m})}return(m,p)=>{const l=le,e=Ye;return d(),b("div",bc,[o("div",Ac,[o("div",wc,[v(l,{"model-value":t.filters.battleMode==="rating",onChange:u},{default:w(()=>[T(" Рейтинг ")]),_:1},8,["model-value"])]),o("div",$c,[v(l,{modelValue:r(f).isOpen,"onUpdate:modelValue":p[0]||(p[0]=_=>r(f).isOpen=_)},{default:w(()=>[T(" Все показатели ")]),_:1},8,["modelValue"])])]),o("div",Cc,[v(e,{loading:t.loading,items:t.metrics},null,8,["loading","items"])])])}}}),Sc={key:0,class:"account-view"},Pc={class:"account-view__private"},Dc={style:{display:"flex","justify-content":"flex-end"}},Ic={key:1,class:"account-view--no-data"},Bc={key:0,class:"content-area"},xc=o("p",null,"Нет данных.",-1),Rc=o("p",null,"Возможно аккаунт удалён.",-1),Oc=[xc,Rc],ai=U({__name:"AccountView",setup(t){const c=["battles","winRate","damagePerBattle","winsInPlatoon","battlesPerDay","tanksWithMaster"],i=Ze.makeAccountFilters({tankInGarage:1,tankIsPremium:null}),f=z(null),g=Rt(),u=ve(),m=ta(),p=jt(),l=K({order:"desc",prop:"last_battle_time"}),e=K({clanAccount:null,account:null,savedAccount:null,accountAchievements:null,savedAccountAchievements:null,tanksStats:null,tanksAchievements:null,savedTanksStats:null,filteredTanks:[],tanks:[],tanksDiff:[],currentTank:null,currentTankSession:null,sessionUpdateAt:0,sessionActive:!1,isMetricsExpanded:!1,loading:0,filters:oe(i)}),_=L(()=>p.vehicles),k=L(()=>p.achievements),C=L(()=>{var h;return m.accountId===((h=e.account)==null?void 0:h.account_id)}),y=L(()=>Number(g.params.id)||m.accountId),s=L(()=>!e.accountAchievements||!e.savedAccountAchievements||!k.value?null:E.achievementsDiff(e.accountAchievements,e.savedAccountAchievements,k.value)),n=L(()=>!e.account||!e.savedAccount||!e.accountAchievements?ae.account({achievements:null,createAt:0,stat:null,tanks:[],plates:e.isMetricsExpanded?null:c}):e.sessionActive?ae.account({stat:E.accountAll(E.diff(e.account.statistics.all,e.savedAccount.statistics.all)),achievements:s.value,tanks:e.tanksDiff,createAt:new Date(e.sessionUpdateAt).valueOf(),plates:e.isMetricsExpanded?null:c}):ae.account({stat:E.accountAll(e.account.statistics.all),statDiff:E.diff(E.accountAll(e.account.statistics.all),E.accountAll(e.savedAccount.statistics.all)),achievements:e.accountAchievements,achievementsDiff:s.value,tanks:e.tanks,tanksDiff:e.tanksDiff,createAt:e.account.created_at*1e3,createAtDiff:new Date(e.sessionUpdateAt).valueOf(),plates:e.isMetricsExpanded?null:c})),a=L(()=>{var h,S;return!((h=e.account)!=null&&h.statistics.rating)||!((S=e.savedAccount)!=null&&S.statistics.rating)?ae.accountRating():e.sessionActive?ae.accountRating({stat:E.accountRating(E.diff(e.account.statistics.rating,e.savedAccount.statistics.rating)),diff:null,showSession:e.sessionActive}):ae.accountRating({stat:E.accountRating(e.account.statistics.rating),diff:E.diff(E.accountRating(e.account.statistics.rating),E.accountRating(e.savedAccount.statistics.rating)),showSession:e.sessionActive})}),$=L(()=>e.filters.battleMode==="random"?n.value:a.value);Ot(()=>{e.loading++}),De(()=>{e.loading--,ke()});function D(){if(!e.tanksStats||!e.tanksAchievements||!_.value)return;const h=se.accountTanks(e.tanksStats,_.value,e.tanksAchievements);e.tanks=$e.smart(h,{prop:"last_battle_time",order:"desc"});const S=se.accountTanks(e.savedTanksStats??[],_.value,e.tanksAchievements??[]),V=[];h.forEach(q=>{const W=S.find(ye=>ye.tank_id===q.tank_id);if(!W){V.push(q);return}const N=E.diff(q.all,W.all);N.battles&&V.push({...q,battle_life_time:q.battle_life_time-W.battle_life_time,mark_of_mastery:q.mark_of_mastery-W.mark_of_mastery,all:E.tank(N)})}),e.tanksDiff=$e.smart(V,{prop:"last_battle_time",order:"desc"})}async function P(h){try{const{data:S}=await ne.tanks.getAchievements({account_id:h});e.tanksAchievements=S[h]??null}catch(S){u.add({type:"error",message:"Получение достижений по технике игрока"}),console.error(S)}}async function O(h){try{const{data:S}=await ne.account.getAchievements({account_id:h});e.accountAchievements=S[h]??null}catch(S){u.add({type:"error",message:"Получение достижений по аккаунту игрока"}),console.error(S)}}async function M(h){try{const{data:S}=await ne.account.getInfo({account_id:h,extra:"statistics.rating"});e.account=(S==null?void 0:S[h])??null}catch(S){u.add({type:"error",message:"Получение данных аккаунта"}),console.error(S)}}async function F(h){try{const{data:S}=await ne.clan.getAccountInfo({account_id:h,extra:"clan"});e.clanAccount=S?S[h]:null}catch(S){u.add({type:"error",message:"Получение данных клана"}),console.error(S)}}async function B(h){_.value||await ue(),await G(h)}async function G(h){try{const{data:S}=await ne.tanks.getStats({account_id:h});e.tanksStats=S?S[h]:null}catch(S){u.add({type:"error",message:"Получение статистики по технике игрока"}),console.error(S)}}async function ue(){if(!_.value)try{await p.getTanksVehicles()}catch(h){u.add({type:"error",message:"Получение данных описания техники"}),console.error(h)}}async function H(){if(!k.value)try{await p.getAchievements()}catch(h){u.add({type:"error",message:"Получение описания достижений"}),console.error(h)}}async function ke(h=!1){y.value&&(e.loading++,await Promise.all([H(),M(y.value),F(y.value),B(y.value),P(y.value),O(y.value)]),h||await ft(),vt(h),D(),ge(e.filters),e.loading--)}function ge(h){let S=e.sessionActive?e.tanksDiff:e.tanks;h.tankInGarage!==null&&(S=S.filter(V=>typeof V.in_garage!="boolean"?!0:V.in_garage===(h.tankInGarage===1))),h.tankNation.length&&(S=S.filter(V=>h.tankNation.includes(V.nation))),h.tankTire.length&&(S=S.filter(V=>h.tankTire.includes(V.tier))),S=S.filter(V=>{const q=h.tankIsPremium;return q===!0?V.is_premium:q===!1?!V.is_premium:!0}),h.tankType.length&&(S=S.filter(V=>h.tankType.includes(V.type))),e.filteredTanks=S}function ct(h){h.order||(e.filteredTanks=$e.smart(e.filteredTanks,{prop:"last_battle_time",order:"desc"}))}function de(h){e.filters=oe(h),ge(e.filters)}function it(){e.filters=oe(i),ge(e.filters),B(y.value)}async function lt(){if(!e.account)return;const h=await Y.indexedDB.accountsInfo.get(e.account.account_id);e.savedAccount=(h==null?void 0:h.data)??null,e.sessionUpdateAt=(h==null?void 0:h.timestamp)??0}function rt(){e.account&&(Y.indexedDB.accountsInfo.set(e.account.account_id,we(e.account)),e.savedAccount=oe(e.account),e.sessionUpdateAt=Date.now())}async function ut(){if(!e.account)return;const h=await Y.indexedDB.accountsAchievements.get(e.account.account_id);e.savedAccountAchievements=(h==null?void 0:h.data)??null,e.sessionUpdateAt=(h==null?void 0:h.timestamp)??0}function dt(){!e.account||!e.accountAchievements||(Y.indexedDB.accountsAchievements.set(e.account.account_id,we(e.accountAchievements)),e.savedAccountAchievements=oe(e.accountAchievements))}async function _t(){if(!e.account)return;const h=await Y.indexedDB.tanksStat.get(e.account.account_id);e.savedTanksStats=(h==null?void 0:h.data)??null}function mt(){!e.account||!e.tanksStats||(Y.indexedDB.tanksStat.set(e.account.account_id,we(e.tanksStats)),e.savedTanksStats=oe(e.tanksStats),e.sessionUpdateAt=Date.now())}function ft(){return Promise.all([lt(),_t(),ut()])}function vt(h=!1){(h||!e.savedAccount)&&rt(),(h||!e.savedTanksStats)&&mt(),(h||!e.savedAccountAchievements)&&dt()}async function pt(){await ke(!0)}function ht(h){e.sessionActive=h,de(e.filters)}function kt(){ke()}function gt(h){var q,W;const S=e.tanks.find(N=>N.tank_id===h.tank_id);if(!S)return;e.currentTank=S;const V=(q=e.savedTanksStats)==null?void 0:q.find(N=>S.tank_id===N.tank_id);e.currentTankSession=V&&_.value?se.accountTanks([V],_.value,[])[0]:null,(W=f.value)==null||W.doOpen()}function yt(h){e.isMetricsExpanded=h}return(h,S)=>{const V=Pa,q=Rn,W=Hn,N=Ht,ye=tt,bt=$s,At=zs,wt=lc,$t=nt,Ct=yc,Tt=te,St=re,Pt=ie;return r(e).account?(d(),b("div",Sc,[v(N,{identity:"preview"},{default:w(()=>[o("div",Pc,[r(e).account.private?(d(),R(V,{key:0,resources:r(e).account.private},null,8,["resources"])):I("",!0)]),v(q,{loading:r(e).loading>0,class:"account-view__preview",account:r(e).account,"clan-account":r(e).clanAccount},null,8,["loading","account","clan-account"]),v(W,{loading:r(e).loading>0,"update-at":r(e).sessionUpdateAt,"session-active":r(e).sessionActive,onReset:pt,onSessionActive:ht,onUpdate:kt},null,8,["loading","update-at","session-active"])]),_:1}),v(N,{title:"Статистика",identity:"statistic"},{default:w(()=>[v(Tc,{filters:r(e).filters,metrics:r($),loading:r(e).loading>0,onFilters:de,onIsOpen:yt},null,8,["filters","metrics","loading"])]),_:1}),r(k)?be((d(),R(N,{key:0,title:"Достижения",identity:"achievements"},{default:w(()=>[r(s)&&r(e).accountAchievements?(d(),R(ye,{key:0,filters:r(e).filters,"achievements-info":r(k),achievements:r(e).sessionActive?r(s):r(e).accountAchievements,onFiltersChanged:de},null,8,["filters","achievements-info","achievements"])):I("",!0)]),_:1},512)),[[Ae,r(e).filters.battleMode==="random"]]):I("",!0),!r(e).sessionActive&&r(e).filters.battleMode==="random"?(d(),R(N,{key:1,title:"Инфографика",identity:"tanksBattles"},{default:w(()=>[v(bt,{tanks:r(e).tanks},null,8,["tanks"])]),_:1})):I("",!0),r(e).sessionActive?I("",!0):be((d(),R(N,{key:2,title:"Статистика по дням",identity:"dailyStat"},{default:w(()=>[r(_)?(d(),R(At,{key:0,vehicles:r(_),"account-id":r(e).account.account_id},null,8,["vehicles","account-id"])):I("",!0)]),_:1},512)),[[Ae,r(e).filters.battleMode==="random"]]),be(v(N,{title:"Техника",identity:"tanks"},{default:w(()=>{var xe;return[v(wt,{class:"account-view__filters",filters:r(e).filters,"default-filters":r(i),"is-private":r(C),onChange:de,onClear:it},null,8,["filters","default-filters","is-private"]),v($t,{sort:r(l),loading:r(e).loading>0,tanks:r(e).filteredTanks,"tanks-sessions":r(e).savedTanksStats,"show-diff":!r(e).sessionActive,height:"calc(100vh - 112px)",onSort:ct,onItemClick:gt},null,8,["sort","loading","tanks","tanks-sessions","show-diff"]),v(St,{ref_key:"tankDetailsRef",ref:f,width:"1100px",title:(xe=r(e).currentTank)==null?void 0:xe.name,onClosed:S[1]||(S[1]=Dt=>r(e).currentTank=null)},{footer:w(()=>[o("div",Dc,[v(Tt,{onClick:S[0]||(S[0]=Dt=>{var Re;return(Re=r(f))==null?void 0:Re.doClose()})},{default:w(()=>[T(" Закрыть ")]),_:1})])]),default:w(()=>[r(k)&&r(e).currentTank?(d(),R(Ct,{key:0,tank:r(e).currentTank,"tank-session":r(e).currentTankSession,"achievements-info":r(k)},null,8,["tank","tank-session","achievements-info"])):I("",!0)]),_:1},8,["title"])]}),_:1},512),[[Ae,r(e).filters.battleMode==="random"]])])):(d(),b("div",Ic,[r(e).loading?I("",!0):(d(),b("div",Bc,Oc)),v(Pt,{loading:r(e).loading>0},null,8,["loading"])]))}}});export{ai as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./light-tank.BbMMrulR.js","./nuxt-icon.DMN9Msny.js","./_plugin-vue_export-helper.DlAUqK2U.js","./entry.DP5yAQ98.js","./nuxt-icon.MfBulapQ.css","./medium-tank.0Lm3c3hb.js","./heavy-tank.BVnvFa0q.js","./at-spg.Dnvzawdm.js","./3.DmM6oIfm.js","./2.BBaeKgit.js","./1.BTeCVUWO.js","./М.-X8ZSvff.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
