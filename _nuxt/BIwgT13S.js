import{_ as x}from"./BeZfJvqk.js";import{_ as P}from"./D0bbJ2Al.js";import{_ as U}from"./CvmZtYpT.js";import{d as k,y as I,c as N,o as _,n as f,p as e,q as u,t as p,F as V,B as h,e as n,L as q,r as A,j as S,g as c,w as m,_ as D,s as y,b as F,f as M,A as O,E as R,k as j}from"./CbpaTVLF.js";import{_ as E}from"./BYsS9vqb.js";import{_ as H}from"./gcaCL54F.js";import{_ as z}from"./DlAUqK2U.js";import"./DSyc53rl.js";import"./CeC760OF.js";import"./DD4asW33.js";const G={class:"recruitment-player-profile-view"},J={class:"recruitment-player-profile-view__item"},K={class:"recruitment-player-profile-view__item"},Q={class:"recruitment-player-profile-view__item"},W={class:"recruitment-player-profile-view__props recruitment-player-profile-view__props--schedule"},X={class:"recruitment-player-profile-view__props-title"},Y={class:"recruitment-player-profile-view__item"},Z={class:"recruitment-player-profile-view__props recruitment-player-profile-view__props--preferences"},ee={class:"recruitment-player-profile-view__props-item"},te={class:"recruitment-player-profile-view__props-item"},re={class:"recruitment-player-profile-view__props-item"},se=k({__name:"RecruitmentPlayerProfileView",props:{modelValue:{required:!0,default:()=>({})},modelModifiers:{}},emits:["update:modelValue"],setup(v){const r=I(v,"modelValue"),i=N(()=>{var s;return(s=r.value)==null?void 0:s.schedule.filter(t=>t.isActive)});return(s,t)=>(_(),f("div",G,[e("div",J,[t[0]||(t[0]=e("div",{class:"recruitment-player-profile-view__item-title"}," Статус ",-1)),u(" "+p(s.$formatter.recruitment.playerStatus(r.value.status)),1)]),e("div",K,[t[1]||(t[1]=e("div",{class:"recruitment-player-profile-view__item-title"}," Цель поиска ",-1)),u(" "+p(s.$formatter.recruitment.target(r.value.target)),1)]),e("div",Q,[t[2]||(t[2]=e("div",{class:"recruitment-player-profile-view__item-title"}," Время активности ",-1)),e("div",W,[(_(!0),f(V,null,h(n(i),l=>(_(),f("div",{key:l.day,class:"recruitment-player-profile-view__props-item"},[e("span",X,p(s.$formatter.date.toDay(l.day))+": ",1),u(" "+p(l.start)+":00 - "+p(l.end)+":00 ",1)]))),128))])]),e("div",Y,[t[6]||(t[6]=e("div",{class:"recruitment-player-profile-view__item-title"}," Предпочтения ",-1)),e("div",Z,[e("div",ee,[t[3]||(t[3]=e("span",{class:"recruitment-player-profile-view__props-title"}," Мин. процент побед: ",-1)),u(" "+p(s.$formatter.number.toFloatPercent(r.value.preferences.winRate)),1)]),e("div",te,[t[4]||(t[4]=e("span",{class:"recruitment-player-profile-view__props-title"}," Мин. кол-во боёв: ",-1)),u(" "+p(s.$formatter.number.toInteger(r.value.preferences.battles)),1)]),e("div",re,[t[5]||(t[5]=e("span",{class:"recruitment-player-profile-view__props-title"}," Мин. урон за бой: ",-1)),u(" "+p(s.$formatter.number.toInteger(r.value.preferences.damagePerBattle)),1)])])])]))}}),le={class:"recruitment-players-table__name"},ie={style:{display:"flex","justify-content":"space-between"}},ae=k({__name:"RecruitmentPlayersTable",props:{list:{type:Array,required:!0,default:()=>[]}},setup(v){const r=q(),i=A(null),s=S({profile:null}),t=[{label:"Ник",key:"nickname"},{label:"Цель поиска",key:"target",formatter:a=>y.recruitment.target(a)},{label:"Статус",key:"status",formatter:a=>y.recruitment.playerStatus(a)},{label:"Предпочтения",key:"preferences"}];function l(a){var o;s.profile=a,(o=i==null?void 0:i.value)==null||o.doOpen()}function g(){var a;s.profile=null,(a=i==null?void 0:i.value)==null||a.doClose()}function w(){var a;s.profile=null,(a=i==null?void 0:i.value)==null||a.doClose(),r.add({type:"success",message:"Приглашение отправлено"})}return(a,o)=>{var $;const C=U,b=D,T=E,B=se,L=H;return _(),f(V,null,[c(T,{class:"recruitment-players-table",data:v.list,headers:t,"scroll-auto-disabling":"","scroll-to-top":"",height:"calc(100vh - 140px)"},{nickname:m(({row:d})=>[e("div",le,[c(C,{role:d.role},null,8,["role"]),c(b,{"is-text":"",class:"recruitment-players-table__name-link link",onClick:me=>l(d)},{default:m(()=>[u(p(d.nickname),1)]),_:2},1032,["onClick"])])]),_:1},8,["data"]),c(L,{ref_key:"addProfileRef",ref:i,title:($=n(s).profile)==null?void 0:$.nickname,width:"640px"},{footer:m(()=>[e("div",ie,[c(b,{onClick:w},{default:m(()=>o[1]||(o[1]=[u(" Пригласить ")])),_:1}),c(b,{onClick:g},{default:m(()=>o[2]||(o[2]=[u(" Закрыть ")])),_:1})])]),default:m(()=>[n(s).profile?(_(),F(B,{key:0,modelValue:n(s).profile,"onUpdate:modelValue":o[0]||(o[0]=d=>n(s).profile=d)},null,8,["modelValue"])):M("",!0)]),_:1},8,["title"])],64)}}}),oe=z(ae,[["__scopeId","data-v-24b45543"]]),ne={class:"recruitment-players-page"},pe={class:"recruitment-players-page__filters"},ue={class:"recruitment-players-page__filters-item"},ce={class:"recruitment-players-page__filters-item"},Ve=k({__name:"players",setup(v){const r=S({profile:null,profileList:[],selectedTarget:"clan",selectedStatus:null}),i=[{value:null,label:"Все"},{value:"active",label:y.recruitment.playerStatus("active")},{value:"passive",label:y.recruitment.playerStatus("passive")}];async function s(){const{data:t}=await R.recruitment.getList({target:[r.selectedTarget],status:r.selectedStatus?[r.selectedStatus]:["active","passive"]});r.profileList=t}return O(()=>[r.selectedTarget,r.selectedStatus],()=>s()),j(()=>{s()}),(t,l)=>{const g=x,w=P,a=oe;return _(),f("div",ne,[l[4]||(l[4]=e("div",{class:"content-area recruitment-players-page__content"},[e("h2",null,"Подбор игроков")],-1)),e("div",pe,[e("div",ue,[l[2]||(l[2]=e("span",{class:"recruitment-players-page__filters-title"}," Цель поиска ",-1)),c(g,{modelValue:n(r).selectedTarget,"onUpdate:modelValue":l[0]||(l[0]=o=>n(r).selectedTarget=o)},null,8,["modelValue"])]),e("div",ce,[l[3]||(l[3]=e("span",{class:"recruitment-players-page__filters-title"}," Статус поиска ",-1)),c(w,{modelValue:n(r).selectedStatus,"onUpdate:modelValue":l[1]||(l[1]=o=>n(r).selectedStatus=o),class:"recruitment-status-select",options:i,width:"150px"},null,8,["modelValue"])])]),c(a,{list:n(r).profileList},null,8,["list"])])}}});export{Ve as default};
