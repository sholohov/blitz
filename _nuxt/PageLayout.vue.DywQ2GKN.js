import{_ as T,h as H,d as W}from"./disableScroll.Dkjcu6LH.js";import{_ as L}from"./UiButton.vue.BEqUDR6j.js";import{_ as q}from"./nuxt-link.AXvmSqpd.js";import{f as $,g as O,i as w,o as i,c as p,a as e,k as a,t as S,j as h,w as g,d as C,F as V,m as b,r as U,b as c,C as D,K as z,D as Y,W as X,A as Z,X as G,z as I,P as K,Y as Q,Q as J,Z as ee,$ as te,s as x,q as ae,G as oe}from"./entry.r0roUpCv.js";import{_ as ne}from"./MainSearch.vue.355RMlEN.js";import{_ as se,g as ie,b as re}from"./UiDialog.vue.dOe3iImp.js";import{u as ce}from"./user.usDmsT7P.js";import{s as P,a as j}from"./request.D32oAIMc.js";import{a as le}from"./index.DsBHQ3tJ.js";import{u as M,a as _e}from"./index.DBBWX-kQ.js";import{u as E}from"./index.DRXrJ1bC.js";import{_ as A}from"./ContentBox.vue.C6oPC9J7.js";import de from"./leader.bZLumj79.js";import{_ as ue}from"./client-only.MBnLpDMO.js";import ge from"./dark-mode.B6ev60ns.js";import me from"./light-mode.DcNRbalI.js";import{a as pe}from"./debounce.R96Y72Hl.js";const he={class:"breadcrumbs-navigation"},fe={class:"breadcrumbs-navigation__inner"},be={key:0,class:"breadcrumbs-navigation__root"},ve=e("span",{class:"breadcrumbs-navigation__separator"},null,-1),ye={class:"breadcrumbs-navigation__current"},ke=$({__name:"BreadcrumbsNavigation",setup(d){const o=O(),t=w(()=>{var r;return((r=String(o.name).split("-"))==null?void 0:r[0])??"index"}),l=w(()=>String(o.name??"")),n=w(()=>l.value===t.value);return(r,_)=>{const s=q;return i(),p("div",he,[e("div",fe,[a(n)?(i(),p("span",be,S(r.$formatter.route.getTitle(a(t))),1)):(i(),h(s,{key:1,class:"breadcrumbs-navigation__root link",to:{name:a(t)}},{default:g(()=>[C(S(r.$formatter.route.getTitle(a(t))),1)]),_:1},8,["to"])),a(n)?b("",!0):(i(),p(V,{key:2},[ve,e("span",ye,S(r.$formatter.route.getTitle(a(l))),1)],64))])])}}}),$e={class:"login-switcher"},we={key:0,class:"login-switcher__username"},Se={class:"login-switcher__username-text"},xe=e("div",{style:{margin:"0 0 1em"}}," Вы уверены, что хотите выйти из аккаунта? ",-1),Ce={style:{"text-align":"right"}},Te=$({__name:"LoginSwitcher",setup(d){const o=U(null),t=ce(),l=M(),n=w(()=>t.accountId!==0);async function r(){try{const{data:u}=await j.auth.login({redirect_uri:location.href,nofollow:1});u&&(window.location.href=u.location)}catch(u){H(u,{title:"Вход в аккаунт"})}}async function _(){await j.auth.logout()}async function s(){await le.auth.logout(),P.storage.removeUser(),t.resetUser(),location.assign("/")}async function f(){try{await _(),await s()}catch(u){H(u,{title:"Вход из аккаунта"})}}function v(u){var k;P.storage.getUser()&&(u&&f(),(k=o.value)==null||k.doClose())}async function y(){var m;P.storage.getUser()?await((m=o.value)==null?void 0:m.doOpen()):await r()}return(u,m)=>{const k=T,B=L,R=se;return i(),p("div",$e,[a(l).isTablet?b("",!0):(i(),p("div",we,[e("span",Se,S(a(t).name),1)])),c(B,{class:"login-switcher__btn","is-text":"","is-square":"",align:"center",title:a(n)?"Выйти":"Войти",onClick:y},{default:g(()=>[c(k,{name:a(n)?"logout":"login"},null,8,["name"])]),_:1},8,["title"]),c(R,{ref_key:"logoutConfirmRef",ref:o,title:"Выход из аккаунта","append-to-body":""},{default:g(()=>[xe,e("div",Ce,[c(B,{align:"center",width:"80px",onClick:m[0]||(m[0]=N=>v(!0))},{default:g(()=>[C(" Да ")]),_:1}),c(B,{align:"center",width:"80px",onClick:m[1]||(m[1]=N=>v(!1))},{default:g(()=>[C(" Нет ")]),_:1})])]),_:1},512)])}}}),Me={class:"page-header__inner"},Be={class:"page-header__col page-header__col--left"},Ne={key:0,class:"page-header__col-item"},Le={class:"page-header__col-item"},Oe={class:"page-header__col page-header__col--right"},Re={class:"page-header__col-item"},Pe={class:"page-header__col page-header__col--right"},Ue={class:"page-header__col-item"},Ie={class:"page-header__col-item"},qe=$({__name:"PageHeader",props:{height:{type:Number,required:!0},isSticky:{type:Boolean,default:!1}},setup(d){const o=M(),t=E();function l(){t.toggleMainSearch(!0)}function n(){t.toggleMobileMenu(),W(!0)}return(r,_)=>{const s=T,f=L,v=ke,y=ne,u=Te;return i(),p("div",{class:D(["page-header",[d.isSticky?"page-header--is-sticky":"",a(o).isTablet?"page-header--is-mobile-view":""]]),style:z({height:d.height+"px"})},[e("div",Me,[e("div",Be,[a(o).isTablet?(i(),p("div",Ne,[c(f,{"is-square":"","is-text":"",onClick:n},{default:g(()=>[c(s,{name:"menu"})]),_:1})])):b("",!0),e("div",Le,[c(v)])]),e("div",Oe,[e("div",Re,[a(o).isTablet?b("",!0):(i(),h(y,{key:0,class:"page-header__search"}))])]),e("div",Pe,[e("div",Ue,[a(o).isTablet?(i(),h(f,{key:0,"is-square":"","is-text":"",onClick:l},{default:g(()=>[c(s,{name:"search"})]),_:1})):b("",!0)]),e("div",Ie,[c(u)])])])],6)}}}),De={class:"page-sidebar-header"},Ee={class:"page-sidebar-header__inner"},He={class:"page-sidebar-header__logo-icon"},je=e("span",{class:"page-sidebar-header__logo-text"}," Blitz Commander ",-1),Ve=$({__name:"PageSidebarHeader",emits:["close"],setup(d,{emit:o}){const t=M(),l=o;return(n,r)=>{const _=T,s=L;return i(),p("div",De,[e("div",Ee,[(i(),h(Y((n._.provides[X]||n.$route).name==="index"?"span":a(q)),{class:"page-sidebar-header__logo",to:"/"},{default:g(()=>[e("span",He,[c(a(de),{style:{width:"24px",height:"24px"}})]),je]),_:1})),a(t).isMobile?(i(),h(s,{key:0,"is-square":"","is-text":"",class:"page-sidebar-header__close",onClick:r[0]||(r[0]=f=>l("close"))},{default:g(()=>[c(_,{name:"close"})]),_:1})):b("",!0)])])}}}),ze={class:"navigation-list"},Ae={class:"navigation-list__list"},Fe={key:0,class:"navigation-list__link navigation-list__link--is-active"},We=$({__name:"NavigationList",props:{navigation:{type:Array,required:!0,default:()=>[]}},setup(d){const o=O();function t(l){return o.matched.some(n=>{const r=String(n.name).split("-")[0]??"index",_=String(l.to.name).split("-")[0]??"index";return r===_})}return(l,n)=>{const r=T,_=q;return i(),p("nav",ze,[e("ul",Ae,[(i(!0),p(V,null,Z(d.navigation.filter(s=>!s.isHidden),s=>(i(),p("li",{key:s.key,class:"navigation-list__item"},[t(s)?(i(),p("span",Fe,[s.icon?(i(),h(r,{key:0,name:s.icon,class:"navigation-list__icon"},null,8,["name"])):b("",!0),C(" "+S(s.label),1)])):(i(),h(_,{key:1,class:"navigation-list__link",to:s.to},{default:g(()=>[s.icon?(i(),h(r,{key:0,name:s.icon,class:"navigation-list__icon"},null,8,["name"])):b("",!0),C(" "+S(s.label),1)]),_:2},1032,["to"]))]))),128))])])}}}),Ye=()=>G("color-mode").value,Xe=$({__name:"ThemeSwitcher",setup(d){const o=Ye(),t=w(()=>o.value==="system"?"":o.value==="dark"?"light":"dark");function l(){const n=o.value==="light";o.preference=n?"dark":"light"}return(n,r)=>{const _=ue,s=L;return i(),h(s,{class:"theme-switcher","is-text":"","is-square":"",title:"Переключить тему",onClick:l},{default:g(()=>[c(_,null,{default:g(()=>[a(t)==="dark"?(i(),h(a(ge),{key:0,class:"theme-switcher__icon"})):a(t)==="light"?(i(),h(a(me),{key:1,class:"theme-switcher__icon"})):b("",!0)]),_:1})]),_:1})}}}),Ze={class:"page-sidebar__body"},Ge={class:"page-sidebar__footer"},Ke={class:"page-sidebar__prop"},Qe=e("span",{class:"page-sidebar__prop-title"},"Тема",-1),Je={target:"_blank",href:"https://t.me/+kpbNPjc8nyZlMmIy",class:"page-sidebar__prop link"},et=e("span",{class:"page-sidebar__prop-title"},"Комьюнити",-1),tt={target:"_blank",href:"https://yoomoney.ru/to/4100118432687922",class:"page-sidebar__prop link"},at=e("span",{class:"page-sidebar__prop-title"},"Поблагодарить",-1),ot={class:"page-sidebar__version"},nt=$({__name:"PageSidebar",props:{isOpen:{type:Boolean,default:!1},navigation:{type:Array,default:()=>[]},headerHeight:{type:Number,default:0}},setup(d){const o=te(),t=E(),l=O(),n=M(),r=w(()=>o.public.clientVersion);I(()=>n.isTablet,()=>{n.isTablet||t.toggleMobileMenu(!1)}),I(()=>l.name,(s,f)=>{s!==f&&setTimeout(()=>t.toggleMobileMenu(!1),300)},{immediate:!0});function _(){t.toggleMobileMenu(!1)}return(s,f)=>{const v=Ve,y=We,u=Xe,m=T,k=A;return i(),h(ee,{name:"page-sidebar-",duration:600},{default:g(()=>[K(e("div",{class:D(["page-sidebar",[a(n).isTablet?"page-sidebar--mobile-view":""]]),onClick:Q(_,["self"])},[c(k,{class:"page-sidebar__panel","inner-class":"page-sidebar__inner"},{default:g(()=>[c(v,{class:"page-sidebar__header",style:z({height:d.headerHeight+"px"}),onClose:_},null,8,["style"]),e("div",Ze,[c(y,{class:"page-sidebar__navigation",navigation:d.navigation},null,8,["navigation"])]),e("div",Ge,[e("label",Ke,[c(u),Qe]),e("a",Je,[c(m,{name:"telegram",style:{margin:"6px"}}),et]),e("a",tt,[c(m,{name:"savings",style:{margin:"6px"}}),at]),e("div",ot," v"+S(a(r)),1)])]),_:1})],2),[[J,d.isOpen]])]),_:1})}}});var st=pe,it=re,rt="Expected a function";function ct(d,o,t){var l=!0,n=!0;if(typeof d!="function")throw new TypeError(rt);return it(t)&&(l="leading"in t?!!t.leading:l,n="trailing"in t?!!t.trailing:n),st(d,o,{leading:l,maxWait:o,trailing:n})}var lt=ct;const _t=ie(lt),dt={class:"page-layout__header"},ut={class:"page-layout__main"},gt={class:"page-layout__sidebar"},Lt=$({__name:"PageLayout",emits:["scroll"],setup(d,{emit:o}){const t=O();_e();const l=E(),n=M(),r=U(!1),_=U(54),s=[{label:x.route.getTitle("index"),key:"main",to:{name:"index"},icon:"home"},{label:x.route.getTitle("account"),key:"account",to:{name:"account"},icon:"person"},{label:x.route.getTitle("clan"),key:"clan",to:{name:"clan"},icon:"groups"},{label:x.route.getTitle("leaderboards"),key:"leaderboards",to:{name:"leaderboards"},icon:"leaderboard"},{label:x.route.getTitle("tournaments"),key:"tournaments",to:{name:"tournaments"},icon:"emoji-events"},{label:x.route.getTitle("widgets"),key:"widgets",to:{name:"widgets"},icon:"widgets"}],f=w(()=>n.isTablet?l.mobileMenuOpened:!0),v=o;I(()=>t.fullPath,()=>{l.toggleMobileMenu(!1)}),ae(()=>{window==null||window.addEventListener("scroll",y),y()});const y=_t(u,60);function u(){v("scroll",window.scrollY),m()}function m(){r.value=window.scrollY>10}return(k,B)=>{const R=qe,N=A,F=nt;return i(),p("div",{class:D(["page-layout",[a(r)?"page-layout--is-scrolled":"",a(n).isTablet?"page-layout--mobile-view":""]])},[e("header",dt,[c(N,null,{default:g(()=>[c(R,{"is-sticky":a(r),height:a(_)},null,8,["is-sticky","height"])]),_:1})]),e("main",ut,[c(N,null,{default:g(()=>[oe(k.$slots,"default")]),_:3})]),e("aside",gt,[c(F,{navigation:s,"is-open":a(f),"header-height":a(_)},null,8,["is-open","header-height"])])],2)}}});export{Lt as _};
