import{s as l}from"./index.CaqNhiay.js";import{f as b,i as m,o as f,c as R,a as _,k as i,t as y,C as k}from"./entry.DPNISXbu.js";const j=(n,t,a)=>({...n,is_premium:(t==null?void 0:t.is_premium)??!1,is_collectible:(t==null?void 0:t.is_collectible)??!1,name:(t==null?void 0:t.name)??"",nation:(t==null?void 0:t.nation)??"",tier:(t==null?void 0:t.tier)??0,type:(t==null?void 0:t.type)??"",images:{preview:(t==null?void 0:t.images.preview)??"",normal:(t==null?void 0:t.images.normal)??""},all:l.tank(n.all),achievements:{achievements:(a==null?void 0:a.achievements)??{},max_series:(a==null?void 0:a.max_series)??{},tank_id:(a==null?void 0:a.tank_id)??0,account_id:(a==null?void 0:a.account_id)??0}}),w=n=>{var g,u;const t=n.key,a=n.achievements.achievements[t],o=n.achievements.max_series[t],e=(g=n.encyclopedia)==null?void 0:g[t],r=p=>`/img/medals/${t.replace(/EU|RU|NA|SEA/,"")}${p??""}.webp`,s={key:t,count:a||0,series:o||0,condition:e==null?void 0:e.condition,description:e==null?void 0:e.description,name:e==null?void 0:e.name,section:e==null?void 0:e.section,image:r()};return e.options&&(s.name=((u=e.options[a-1])==null?void 0:u.name)||e.name,s.count=a?e.options.length-a+1:0,s.degree=a,s.image=r(a||e.options.length)),s.name=String(s.name).replace(/\(.+\)/,""),s},A=n=>({...n,statistic:{all:{},rating:{}},create_at:0,last_battle_time:0}),c=(n,t)=>{const a=t.statistics.all,o=t.statistics.rating;return{account_id:t.account_id,account_name:t.nickname,create_at:t.created_at,last_battle_time:t.last_battle_time,statistic:{all:l.accountAll(a),rating:o?l.accountRating(o):null},joined_at:n.joined_at,role:d.getMemberRole({role:n.role,joinedAt:n.joined_at})}},$=(n,t)=>{const a=n.members_ids.map(o=>{var s;const e=((s=n.members)==null?void 0:s[o])??{account_id:0,account_name:"Deleted",joined_at:0,role:""},r=t[o];return r&&e.account_id?c(e,r):A(e)});return{...n,members:a}},x=n=>{if(n.role!=="private")return n.role;const t=1e3*60*60*24,a=Date.now();let o=n.role;return n.joinedAt*1e3>a-7*t&&(o="recruit"),o},M=n=>{const t={league:"calibration",value:""};if(n.battlesLeft===0&&n.mmRating===0)return t;if(n.mmRating===0)return t.value=`${10-n.battlesLeft}/10`,t;const a=n.mmRating*10+3e3;return t.value=a.toFixed(0),a<2e3?t.league="bronze":a<3e3?t.league="silver":a<4e3?t.league="gold":a<5e3?t.league="platinum":t.league="brilliant",t},d={getMemberRole:x,getRating:M,clan:$,clanMember:c,accountTank:j,achievementsMedal:w},B=["src","alt"],C={class:"rating-icon__value"},L=b({__name:"RatingIcon",props:{rating:{type:Object,default:void 0,required:!0},large:{type:Boolean,default:!1}},setup(n){const t=n,a=m(()=>t.large!==!1?"m":"l"),o=m(()=>t.rating?d.getRating({battlesLeft:t.rating.calibration_battles_left,mmRating:t.rating.mm_rating}):{});return(e,r)=>(f(),R("span",{class:k(["rating-icon",[n.large!==!1?"rating-icon--large":""]])},[_("img",{class:"rating-icon__img",src:`/img/leagues/${i(o).league}_${i(a)}.webp`,alt:e.$formatter.clan.league(i(o).league)},null,8,B),_("span",C,y(i(o).value||"---"),1)],2))}});export{L as _,d as m};
