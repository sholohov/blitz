import{_ as T,a as L,h as U,d as W}from"./disableScroll.C0aRP9sA.js";import{_ as E}from"./nuxt-link.L0yXcBJ9.js";import{n as k,u as O,s as $,o as i,c as m,a as t,x as a,t as w,v as p,w as g,d as C,F as j,z as b,r as I,b as c,J as D,Q as z,K as Y,a1 as J,H as K,a2 as Q,h as H,a3 as X,a4 as Z,a5 as G,C as x,B as ee,M as te,a6 as ae}from"./entry.C7rsCkde.js";import{a as ne,_ as F}from"./ContentBox.vue.C-VSBEfk.js";import{_ as oe,g as se,b as ie}from"./CDialog.vue.DWhS8OEK.js";import{u as re}from"./user.DLlwbhvI.js";import{s as P,a as V}from"./request.2vtDDBdm.js";import{a as ce}from"./index.CiYw46hj.js";import{u as M}from"./index.DkVO-Tjf.js";import{u as q}from"./index.EUvklMki.js";import le from"./leader.CbdGYCpE.js";import{_ as _e}from"./client-only.DbbL8paw.js";import de from"./dark-mode.As55vT4i.js";import ue from"./light-mode.DTGtv4dw.js";import{a as ge}from"./debounce.C9J8JV9z.js";const me={class:"breadcrumbs-navigation"},pe={class:"breadcrumbs-navigation__inner"},he={key:0,class:"breadcrumbs-navigation__root"},fe=t("span",{class:"breadcrumbs-navigation__separator"},null,-1),be={class:"breadcrumbs-navigation__current"},ve=k({__name:"BreadcrumbsNavigation",setup(d){const n=O(),e=$(()=>{var r;return((r=String(n.name).split("-"))==null?void 0:r[0])??"index"}),l=$(()=>String(n.name??"")),o=$(()=>l===e);return(r,_)=>{const s=E;return i(),m("div",me,[t("div",pe,[a(o)?(i(),m("span",he,w(r.$formatter.route.getTitle(a(e))),1)):(i(),p(s,{key:1,class:"breadcrumbs-navigation__root link",to:{name:a(e)}},{default:g(()=>[C(w(r.$formatter.route.getTitle(a(e))),1)]),_:1},8,["to"])),a(o)?b("",!0):(i(),m(j,{key:2},[fe,t("span",be,w(r.$formatter.route.getTitle(a(l))),1)],64))])])}}}),ye={class:"login-switcher"},ke={key:0,class:"login-switcher__username"},$e={class:"login-switcher__username-text"},we=t("div",{style:{margin:"0 0 1em"}}," Вы уверены, что хотите выйти из аккаунта? ",-1),Se={style:{"text-align":"right"}},xe=k({__name:"LoginSwitcher",setup(d){const n=I(null),e=re(),l=M(),o=$(()=>e.accountId!==0);async function r(){try{const{data:u}=await V.auth.login({redirect_uri:location.href,nofollow:1});u&&(window.location.href=u.location)}catch(u){U(u,{title:"Вход в аккаунт"})}}async function _(){await V.auth.logout()}async function s(){await ce.auth.logout(),P.storage.removeUser(),e.resetUser(),location.assign("/")}async function h(){try{await _(),await s()}catch(u){U(u,{title:"Вход из аккаунта"})}}function v(u){P.storage.getUser()&&(u&&h(),n.value.doClose())}async function y(){P.storage.getUser()?await n.value.doOpen():await r()}return(u,f)=>{const S=T,B=L,R=oe;return i(),m("div",ye,[a(l).isTablet?b("",!0):(i(),m("div",ke,[t("span",$e,w(a(e).name),1)])),c(B,{class:"login-switcher__btn","is-text":"","is-square":"",align:"center",title:a(o)?"Выйти":"Войти",onClick:y},{default:g(()=>[c(S,{name:a(o)?"logout":"login"},null,8,["name"])]),_:1},8,["title"]),c(R,{ref_key:"logoutConfirmRef",ref:n,title:"Выход из аккаунта","append-to-body":""},{default:g(()=>[we,t("div",Se,[c(B,{align:"center",width:"80px",onClick:f[0]||(f[0]=N=>v(!0))},{default:g(()=>[C(" Да ")]),_:1}),c(B,{align:"center",width:"80px",onClick:f[1]||(f[1]=N=>v(!1))},{default:g(()=>[C(" Нет ")]),_:1})])]),_:1},512)])}}}),Ce={class:"page-header__inner"},Te={class:"page-header__col page-header__col--left"},Me={key:0,class:"page-header__col-item"},Be={class:"page-header__col-item"},Ne={class:"page-header__col page-header__col--right"},Le={class:"page-header__col-item"},Oe={class:"page-header__col page-header__col--right"},Re={class:"page-header__col-item"},Pe={class:"page-header__col-item"},Ie=k({__name:"PageHeader",props:{height:{type:Number,required:!0},isSticky:{type:Boolean,default:!1}},setup(d){const n=M(),e=q();function l(){e.toggleMainSearch(!0)}function o(){e.toggleMobileMenu(),W(!0)}return(r,_)=>{const s=T,h=L,v=ve,y=ne,u=xe;return i(),m("div",{class:D(["page-header",[d.isSticky?"page-header--is-sticky":"",a(n).isTablet?"page-header--is-mobile-view":""]]),style:z({height:d.height+"px"})},[t("div",Ce,[t("div",Te,[a(n).isTablet?(i(),m("div",Me,[c(h,{"is-square":"","is-text":"",onClick:o},{default:g(()=>[c(s,{name:"menu"})]),_:1})])):b("",!0),t("div",Be,[c(v)])]),t("div",Ne,[t("div",Le,[a(n).isTablet?b("",!0):(i(),p(y,{key:0,class:"page-header__search"}))])]),t("div",Oe,[t("div",Re,[a(n).isTablet?(i(),p(h,{key:0,"is-square":"","is-text":"",onClick:l},{default:g(()=>[c(s,{name:"search"})]),_:1})):b("",!0)]),t("div",Pe,[c(u)])])])],6)}}}),He={class:"page-sidebar-header"},Ee={class:"page-sidebar-header__inner"},qe={class:"page-sidebar-header__logo-icon"},Ue=t("span",{class:"page-sidebar-header__logo-text"}," Blitz Commander ",-1),Ve=k({__name:"PageSidebarHeader",emits:["close"],setup(d,{emit:n}){const e=M(),l=n;return(o,r)=>{const _=T,s=L;return i(),m("div",He,[t("div",Ee,[(i(),p(Y((o._.provides[J]||o.$route).name==="index"?"span":a(E)),{class:"page-sidebar-header__logo",to:"/"},{default:g(()=>[t("span",qe,[c(a(le),{style:{width:"24px",height:"24px"}})]),Ue]),_:1})),a(e).isMobile?(i(),p(s,{key:0,"is-square":"","is-text":"",class:"page-sidebar-header__close",onClick:r[0]||(r[0]=h=>l("close"))},{default:g(()=>[c(_,{name:"close"})]),_:1})):b("",!0)])])}}}),je={class:"navigation-list"},De={class:"navigation-list__list"},ze={key:0,class:"navigation-list__link navigation-list__link--is-active"},Fe=k({__name:"NavigationList",props:{navigation:{type:Array,required:!0,default:()=>[]}},setup(d){const n=O();function e(l){return n.matched.some(o=>{const r=String(o.name).split("-")[0]??"index",_=String(l.to.name).split("-")[0]??"index";return r===_})}return(l,o)=>{const r=T,_=E;return i(),m("nav",je,[t("ul",De,[(i(!0),m(j,null,K(d.navigation.filter(s=>!s.isHidden),s=>(i(),m("li",{key:s.key,class:"navigation-list__item"},[e(s)?(i(),m("span",ze,[s.icon?(i(),p(r,{key:0,name:s.icon,class:"navigation-list__icon"},null,8,["name"])):b("",!0),C(" "+w(s.label),1)])):(i(),p(_,{key:1,class:"navigation-list__link",to:s.to},{default:g(()=>[s.icon?(i(),p(r,{key:0,name:s.icon,class:"navigation-list__icon"},null,8,["name"])):b("",!0),C(" "+w(s.label),1)]),_:2},1032,["to"]))]))),128))])])}}}),Ae=()=>Q("color-mode").value,We=k({__name:"ThemeSwitcher",setup(d){const n=Ae(),e=$(()=>n.value==="system"?"":n.value==="dark"?"light":"dark");function l(){const o=n.value==="light";n.preference=o?"dark":"light"}return(o,r)=>{const _=_e,s=L;return i(),p(s,{class:"theme-switcher","is-text":"","is-square":"",title:"Переключить тему",onClick:l},{default:g(()=>[c(_,null,{default:g(()=>[a(e)==="dark"?(i(),p(a(de),{key:0,class:"theme-switcher__icon"})):a(e)==="light"?(i(),p(a(ue),{key:1,class:"theme-switcher__icon"})):b("",!0)]),_:1})]),_:1})}}}),Ye={class:"page-sidebar__body"},Je={class:"page-sidebar__footer"},Ke={class:"page-sidebar__prop"},Qe=t("span",{class:"page-sidebar__prop-title"},"Тема",-1),Xe={target:"_blank",href:"https://t.me/+kpbNPjc8nyZlMmIy",class:"page-sidebar__prop link"},Ze=t("span",{class:"page-sidebar__prop-title"},"Комьюнити",-1),Ge={target:"_blank",href:"https://yoomoney.ru/to/4100118432687922",class:"page-sidebar__prop link"},et=t("span",{class:"page-sidebar__prop-title"},"Поблагодарить",-1),tt={class:"page-sidebar__version"},at=k({__name:"PageSidebar",props:{isOpen:{type:Boolean,default:!1},navigation:{type:Array,default:()=>[]},headerHeight:{type:Number,default:0}},setup(d){const n=G(),e=q(),l=O(),o=M(),r=$(()=>n.public.clientVersion);H(()=>o.isTablet,()=>{o.isTablet||e.toggleMobileMenu(!1)}),H(()=>l.name,(s,h)=>{s!==h&&setTimeout(()=>e.toggleMobileMenu(!1),300)},{immediate:!0});function _(){e.toggleMobileMenu(!1)}return(s,h)=>{const v=Ve,y=Fe,u=We,f=T,S=F;return i(),p(Z,{name:"page-sidebar-",duration:600},{default:g(()=>[d.isOpen?(i(),m("div",{key:0,class:D(["page-sidebar",[a(o).isTablet?"page-sidebar--mobile-view":""]]),onClick:X(_,["self"])},[c(S,{class:"page-sidebar__panel","inner-class":"page-sidebar__inner"},{default:g(()=>[c(v,{class:"page-sidebar__header",style:z({height:d.headerHeight+"px"}),onClose:_},null,8,["style"]),t("div",Ye,[c(y,{class:"page-sidebar__navigation",navigation:d.navigation},null,8,["navigation"])]),t("div",Je,[t("label",Ke,[c(u),Qe]),t("a",Xe,[c(f,{name:"telegram",style:{margin:"6px"}}),Ze]),t("a",Ge,[c(f,{name:"savings",style:{margin:"6px"}}),et]),t("div",tt," v"+w(a(r)),1)])]),_:1})],2)):b("",!0)]),_:1})}}});var nt=ge,ot=ie,st="Expected a function";function it(d,n,e){var l=!0,o=!0;if(typeof d!="function")throw new TypeError(st);return ot(e)&&(l="leading"in e?!!e.leading:l,o="trailing"in e?!!e.trailing:o),nt(d,n,{leading:l,maxWait:n,trailing:o})}var rt=it;const ct=se(rt),lt={class:"page-content__header"},_t={class:"page-content__main"},dt={class:"page-content__sidebar"},Tt=k({__name:"PageContent",emits:["scroll"],setup(d,{emit:n}){const e=O(),l=q(),o=M(),r=I(!1),_=I(54),s=[{label:x.route.getTitle("index"),key:"main",to:{name:"index"},icon:"home"},{label:x.route.getTitle("account"),key:"account",to:{name:"account"},icon:"person"},{label:x.route.getTitle("clan"),key:"clan",to:{name:"clan"},icon:"groups"},{label:x.route.getTitle("leaderboards"),key:"leaderboards",to:{name:"leaderboards"},icon:"leaderboard"},{label:x.route.getTitle("tournaments"),key:"tournaments",to:{name:"tournaments"},icon:"emoji-events"},{label:x.route.getTitle("widgets"),key:"widgets",to:{name:"widgets"},icon:"widgets"}],h=$(()=>o.isTablet?l.mobileMenuOpened:!0),v=n;H(()=>e.fullPath,()=>{l.toggleMobileMenu(!1)}),ee(()=>{window==null||window.addEventListener("scroll",y),y()});const y=ct(u,60);function u(){v("scroll",window.scrollY),f()}function f(){r.value=window.scrollY>10}return(S,B)=>{const R=Ie,N=F,A=at;return i(),m("div",ae(S.$attrs,{class:["page-content",[a(r)?"page-content--is-scrolled":"",a(o).isTablet?"page-content--mobile-view":""]]}),[t("header",lt,[c(N,null,{default:g(()=>[c(R,{"is-sticky":a(r),height:a(_)},null,8,["is-sticky","height"])]),_:1})]),t("main",_t,[c(N,null,{default:g(()=>[te(S.$slots,"default")]),_:3})]),t("aside",dt,[c(A,{navigation:s,"is-open":a(h),"header-height":a(_)},null,8,["is-open","header-height"])])],16)}}});export{Tt as _};
