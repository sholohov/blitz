import{_ as L}from"./BNUcpile.js";import{_ as P}from"./CI6zNOZI.js";import{_ as U}from"./C0geJmxB.js";import{d as $,A as I,c as N,o as _,m as f,n as e,t as u,v as p,F as V,D as h,f as n,M as D,r as M,k as S,h as c,w as m,e as A,g as F,p as y,y as O,u as R,C as q,l as H,G as j}from"./CjZrE5Wh.js";import{_ as E}from"./Bx2A0I5R.js";import{_ as G}from"./Zt_43PKh.js";import{_ as z}from"./DlAUqK2U.js";import"./CVTThTqB.js";import"./DBvd0WFK.js";import"./DD4asW33.js";const J={class:"recruitment-player-profile-view"},K={class:"recruitment-player-profile-view__item"},Q={class:"recruitment-player-profile-view__item"},W={class:"recruitment-player-profile-view__item"},X={class:"recruitment-player-profile-view__props recruitment-player-profile-view__props--schedule"},Y={class:"recruitment-player-profile-view__props-title"},Z={class:"recruitment-player-profile-view__item"},ee={class:"recruitment-player-profile-view__props recruitment-player-profile-view__props--preferences"},te={class:"recruitment-player-profile-view__props-item"},re={class:"recruitment-player-profile-view__props-item"},se={class:"recruitment-player-profile-view__props-item"},le=$({__name:"RecruitmentPlayerProfileView",props:{modelValue:{required:!0,default:()=>({})},modelModifiers:{}},emits:["update:modelValue"],setup(v){const r=I(v,"modelValue"),i=N(()=>{var s;return(s=r.value)==null?void 0:s.schedule.filter(t=>t.isActive)});return(s,t)=>(_(),f("div",J,[e("div",K,[t[0]||(t[0]=e("div",{class:"recruitment-player-profile-view__item-title"}," Статус ",-1)),u(" "+p(s.$formatter.recruitment.playerStatus(r.value.status)),1)]),e("div",Q,[t[1]||(t[1]=e("div",{class:"recruitment-player-profile-view__item-title"}," Цель поиска ",-1)),u(" "+p(s.$formatter.recruitment.target(r.value.target)),1)]),e("div",W,[t[2]||(t[2]=e("div",{class:"recruitment-player-profile-view__item-title"}," Время активности ",-1)),e("div",X,[(_(!0),f(V,null,h(n(i),l=>(_(),f("div",{key:l.day,class:"recruitment-player-profile-view__props-item"},[e("span",Y,p(s.$formatter.date.toDay(l.day))+": ",1),u(" "+p(l.start)+":00 - "+p(l.end)+":00 ",1)]))),128))])]),e("div",Z,[t[6]||(t[6]=e("div",{class:"recruitment-player-profile-view__item-title"}," Предпочтения ",-1)),e("div",ee,[e("div",te,[t[3]||(t[3]=e("span",{class:"recruitment-player-profile-view__props-title"}," Мин. процент побед: ",-1)),u(" "+p(s.$formatter.number.toFloatPercent(r.value.preferences.winRate)),1)]),e("div",re,[t[4]||(t[4]=e("span",{class:"recruitment-player-profile-view__props-title"}," Мин. кол-во боёв: ",-1)),u(" "+p(s.$formatter.number.toInteger(r.value.preferences.battles)),1)]),e("div",se,[t[5]||(t[5]=e("span",{class:"recruitment-player-profile-view__props-title"}," Мин. урон за бой: ",-1)),u(" "+p(s.$formatter.number.toInteger(r.value.preferences.damagePerBattle)),1)])])])]))}}),ie={class:"recruitment-players-table__name"},ae={style:{display:"flex","justify-content":"space-between"}},oe=$({__name:"RecruitmentPlayersTable",props:{list:{type:Array,required:!0,default:()=>[]}},setup(v){const r=D(),i=M(null),s=S({profile:null}),t=[{label:"Ник",key:"nickname"},{label:"Цель поиска",key:"target",formatter:a=>y.recruitment.target(a)},{label:"Статус",key:"status",formatter:a=>y.recruitment.playerStatus(a)},{label:"Предпочтения",key:"preferences"}];function l(a){var o;s.profile=a,(o=i==null?void 0:i.value)==null||o.doOpen()}function g(){var a;s.profile=null,(a=i==null?void 0:i.value)==null||a.doClose()}function w(){var a;s.profile=null,(a=i==null?void 0:i.value)==null||a.doClose(),r.add({type:"success",message:"Приглашение отправлено"})}return(a,o)=>{var b;const C=U,k=O,T=E,B=le,x=G;return _(),f(V,null,[c(T,{class:"recruitment-players-table",data:v.list,headers:t,"scroll-auto-disabling":"","scroll-to-top":"",height:"calc(100vh - 140px)"},{nickname:m(({row:d})=>[e("div",ie,[c(C,{role:d.role},null,8,["role"]),c(k,{"is-text":"",class:"recruitment-players-table__name-link link",onClick:_e=>l(d)},{default:m(()=>[u(p(d.nickname),1)]),_:2},1032,["onClick"])])]),_:1},8,["data"]),c(x,{ref_key:"addProfileRef",ref:i,title:(b=n(s).profile)==null?void 0:b.nickname,width:"640px"},{footer:m(()=>[e("div",ae,[c(k,{onClick:w},{default:m(()=>o[1]||(o[1]=[u(" Пригласить ")])),_:1}),c(k,{onClick:g},{default:m(()=>o[2]||(o[2]=[u(" Закрыть ")])),_:1})])]),default:m(()=>[n(s).profile?(_(),A(B,{key:0,modelValue:n(s).profile,"onUpdate:modelValue":o[0]||(o[0]=d=>n(s).profile=d)},null,8,["modelValue"])):F("",!0)]),_:1},8,["title"])],64)}}}),ne=z(oe,[["__scopeId","data-v-24b45543"]]),pe={class:"recruitment-players-page"},ue={class:"recruitment-players-page__filters"},ce={class:"recruitment-players-page__filters-item"},me={class:"recruitment-players-page__filters-item"},Se=$({__name:"players",setup(v){R({title:"Подбор игроков"});const r=S({profile:null,profileList:[],selectedTarget:"clan",selectedStatus:null}),i=[{value:null,label:"Все"},{value:"active",label:y.recruitment.playerStatus("active")},{value:"passive",label:y.recruitment.playerStatus("passive")}];async function s(){const{data:t}=await j.recruitment.getList({target:[r.selectedTarget],status:r.selectedStatus?[r.selectedStatus]:["active","passive"]});r.profileList=t}return q(()=>[r.selectedTarget,r.selectedStatus],()=>s()),H(()=>{s()}),(t,l)=>{const g=L,w=P,a=ne;return _(),f("div",pe,[l[4]||(l[4]=e("div",{class:"content-area recruitment-players-page__content"},[e("h2",null,"Подбор игроков")],-1)),e("div",ue,[e("div",ce,[l[2]||(l[2]=e("span",{class:"recruitment-players-page__filters-title"}," Цель поиска ",-1)),c(g,{modelValue:n(r).selectedTarget,"onUpdate:modelValue":l[0]||(l[0]=o=>n(r).selectedTarget=o)},null,8,["modelValue"])]),e("div",me,[l[3]||(l[3]=e("span",{class:"recruitment-players-page__filters-title"}," Статус поиска ",-1)),c(w,{modelValue:n(r).selectedStatus,"onUpdate:modelValue":l[1]||(l[1]=o=>n(r).selectedStatus=o),class:"recruitment-status-select",options:i,width:"150px"},null,8,["modelValue"])])]),c(a,{list:n(r).profileList},null,8,["list"])])}}});export{Se as default};
