import{g as q,t as s,d as $}from"./BiZBJfut.js";import{f as H,r as y,a3 as Z,y as J,o as f,j as Q,b as X,w as Y,k as r,c as p,a as S,G as j,m,K as ee,C as te,Z as oe,ar as ne,W as ae,as as ie,M as le,d as se,t as re}from"./BDSon2aS.js";var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ae(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function de(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var Ue=de,fe=typeof v=="object"&&v&&v.Object===Object&&v,ce=fe,ue=ce,ge=typeof self=="object"&&self&&self.Object===Object&&self,be=ue||ge||Function("return this")(),ye=be,pe=ye,me=pe.Symbol,P=me,B=P,D=Object.prototype,ve=D.hasOwnProperty,we=D.toString,c=B?B.toStringTag:void 0;function he(t){var n=ve.call(t,c),a=t[c];try{t[c]=void 0;var i=!0}catch{}var w=we.call(t);return i&&(n?t[c]=a:delete t[c]),w}var Se=he,je=Object.prototype,Te=je.toString;function Oe(t){return Te.call(t)}var ke=Oe,E=P,Ce=Se,Fe=ke,Le="[object Null]",$e="[object Undefined]",R=E?E.toStringTag:void 0;function Be(t){return t==null?t===void 0?$e:Le:R&&R in Object(t)?Ce(t):Fe(t)}var Ke=Be;function Ee(t){return t!=null&&typeof t=="object"}var Ne=Ee;const Re=t=>t?!!t.offsetWidth||!!t.offsetHeight||!!t.getClientRects().length:!1,_=t=>{const n=[];return t.querySelectorAll(`a[href]:not([tabindex^="-"]),
    area[href]:not([tabindex^="-"]),
    input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"]),
    input[type="radio"]:not([disabled]):not([tabindex^="-"]):checked,
    select:not([disabled]):not([tabindex^="-"]),
    textarea:not([disabled]):not([tabindex^="-"]),
    button:not([disabled]):not([tabindex^="-"]),
    iframe:not([tabindex^="-"]),
    audio[controls]:not([tabindex^="-"]),
    video[controls]:not([tabindex^="-"]),
    [contenteditable]:not([tabindex^="-"]),
    [tabindex]:not([tabindex^="-"])`).forEach(a=>{a&&Re(a)&&n.push(a)}),n},_e=["aria-modal"],Pe={key:0,class:"ui-dialog__header"},De={class:"ui-dialog__title"},Me={key:1,class:"ui-dialog__footer"},Ve=H({__name:"UiDialog",props:{identity:{type:String,default:()=>q()},title:{type:String,default:void 0},width:{type:String,default:void 0},position:{type:String,default:void 0},appendToBody:{type:[Boolean,String],default:!1},fullscreen:{type:[Boolean,String],default:!1},hideClose:{type:[Boolean,String],default:!1},modalEnabled:{type:[Boolean,String],default:!1}},emits:["opened","closed","open","close"],setup(t,{expose:n,emit:a}){const i=t,w=y(),l=y(),M=y(),h=y(!1);let u=null,d=e=>{};Z(()=>O()),J(()=>d(!1));const g=a,T=(e="default")=>!!le()[e];function G(){Array.isArray(window.modalsList)||(window.modalsList=[]),window.modalsList.push({id:i.identity,close:b,open:k})}function O(){var e;window.modalsList=(e=window.modalsList)==null?void 0:e.filter(o=>o.id!==i.identity)}function x(){window.modalsList&&window.modalsList.length&&window.modalsList[window.modalsList.length-1].close()}const A=e=>{if(e.key==="Escape"){x(),e.preventDefault(),e.stopPropagation();return}if(e.key==="Tab"){if(!l.value)return;const o=_(l.value),C=document.activeElement,F=o.findIndex(W=>W===C),L=o.length-1;e.shiftKey&&F===0?(o[L].focus(),e.preventDefault()):!e.shiftKey&&F===L&&(o[0].focus(),e.preventDefault())}},U=()=>{if(!l.value)return;const e=_(l.value),o=e==null?void 0:e[0];o==null||o.focus({preventScroll:!0})},K=()=>{U(),g("opened",!0),d(!0)},N=()=>{var e;O(),(e=window.modalsList)!=null&&e.length||$(!1),u==null||u.focus(),d(!1),g("closed",!0)},V=()=>{var e;(e=window.modalsList)!=null&&e.length||$(!0),G(),g("open",!0)},I=()=>{g("close",!0)},z=()=>{s(i.modalEnabled)||b()};function k(){return new Promise(e=>{u=document.activeElement,h.value=!0,d=e})}function b(){return new Promise(e=>{h.value=!1,d=e})}return n({doOpen:k,doClose:b}),(e,o)=>(f(),Q(ie,{to:"body",disabled:!("toFlag"in e?e.toFlag:r(s))(i.appendToBody)},[X(ae,ne(e.$attrs,{ref_key:"wrapperRef",ref:w,name:"ui-dialog-",onEnter:V,onAfterEnter:K,onLeave:I,onAfterLeave:N}),{default:Y(()=>[r(h)?(f(),p("div",{key:0,ref_key:"dialogRef",ref:l,class:te(["ui-dialog",["ui-dialog--"+t.position]]),tabindex:"-1",onClick:oe(z,["self"]),onKeydown:A},[S("div",{role:"dialog","aria-modal":("toFlag"in e?e.toFlag:r(s))(t.modalEnabled),class:"ui-dialog__container",style:ee({width:("toFlag"in e?e.toFlag:r(s))(t.fullscreen)?"100%":t.width,height:("toFlag"in e?e.toFlag:r(s))(t.fullscreen)?"100%":""})},[T("title")||t.title?(f(),p("div",Pe,[S("div",De,[j(e.$slots,"title",{},()=>[se(re(t.title),1)])])])):m("",!0),S("div",{ref_key:"bodyRef",ref:M,class:"ui-dialog__body"},[j(e.$slots,"default")],512),T("footer")?(f(),p("div",Me,[j(e.$slots,"footer")])):m("",!0),("toFlag"in e?e.toFlag:r(s))(t.hideClose)?m("",!0):(f(),p("button",{key:2,class:"ui-dialog__close",type:"button",onClick:o[0]||(o[0]=C=>b())}))],12,_e)],34)):m("",!0)]),_:3},16)],8,["disabled"]))}});export{Ve as _,P as a,Ue as b,ye as c,Ke as d,ce as e,Ae as g,Ne as i};
