import{_ as Pt}from"./6tf917RV.js";import{d as H,o as g,n as U,p as t,j as a,x as C,R as It,_ as G,e as q,u as ht,g as l,f as A,w as i,v as S,y as tt,z as lt,A as ot,F as E,D as dt,I as Z,r as j,l as F,h as N,E as K,S as Mt,C as Y,a as Ot,b as Wt,k as Dt,M as Et,T as pt,m as Ht,G as kt,i as jt,H as ft,U as Nt,t as qt}from"./BzQ49_ll.js";import{_ as zt}from"./DVIdC8Zn.js";import{_ as ct}from"./nNENDGj9.js";import{_ as rt,a as et,b as yt}from"./CShxaGMS.js";import{_ as gt}from"./z8RK9n7K.js";import{_ as Kt}from"./C4nHDJ7j.js";import{_ as At}from"./DQ9jL8Ly.js";import{u as mt}from"./Dz0q-Wbl.js";import{_ as Ft}from"./BqXIIVdU.js";import{_ as bt}from"./B_qt9tlw.js";import{_ as Gt}from"./CUW021nm.js";import{_ as Lt}from"./Dzhj1Yli.js";import{_ as Xt}from"./RGOgyXP7.js";import{_ as ut}from"./3OUiC8Lt.js";import{d as Jt}from"./CKeGCx3Z.js";import{s as W}from"./DhcCwqhx.js";import{_ as Qt}from"./BhaqhKhb.js";import{c as Yt}from"./B4FMxlHh.js";import{u as Zt}from"./BLT2yTlJ.js";import{_ as vt}from"./Bd4DPcpY.js";import"./DD4asW33.js";import"./DZCDALHE.js";import"./AxE_3BVK.js";import"./DlAUqK2U.js";import"./B4KzezSC.js";import"./W1n9aEx_.js";import"./D18XexEg.js";import"./BDnRw2QZ.js";import"./CEk9wgDu.js";import"./CBZ5Hpp1.js";import"./EAeUkgBq.js";import"./B6X_EJD7.js";const te={class:"hand-statistic-tank-preview__img-wrapper"},ee={class:"hand-statistic-tank-preview__description"},ae={class:"hand-statistic-tank-preview__description-tank"},se={class:"hand-statistic-tank-preview__name"},ne={class:"hand-statistic-tank-preview__name-text"},ie={class:"hand-statistic-tank-preview__description-tank"},le={class:"hand-statistic-tank-preview__props"},oe={class:"hand-statistic-tank-preview__prop"},de={class:"hand-statistic-tank-preview__prop-value"},ce={class:"hand-statistic-tank-preview__prop"},re={class:"hand-statistic-tank-preview__prop-value"},me={class:"hand-statistic-tank-preview__prop"},ue={class:"hand-statistic-tank-preview__prop-value"},_e=H({__name:"HandStatisticTankPreview",props:{tank:{type:Object,default:()=>({}),required:!0}},setup(p){return(v,c)=>{const b=ct,k=et,m=G,w=gt;return g(),U("div",It({class:"hand-statistic-tank-preview"},v.$attrs),[t("div",te,[a(b,{class:"hand-statistic-tank-preview__nation-img",src:`/img/nations/nation-${p.tank.nation}.svg`,alt:p.tank.nation},null,8,["src","alt"]),a(b,{class:"hand-statistic-tank-preview__tank-img",src:p.tank.images.preview,alt:p.tank.name},null,8,["src","alt"]),a(rt,{class:"hand-statistic-tank-preview__tier",tier:p.tank.tier},null,8,["tier"])]),t("div",ee,[t("div",ae,[t("div",se,[a(k,{type:p.tank.type,class:"hand-statistic-tank-preview__type","is-premium":p.tank.is_premium,"is-collectible":p.tank.is_collectible},null,8,["type","is-premium","is-collectible"]),t("span",ne,C(p.tank.name??`Tank ID: ${p.tank.tank_id}`),1)])]),t("div",ie,[t("div",le,[t("span",oe,[a(m,{name:"sword-cross",size:"18"}),t("span",de,C(v.$formatter.number.toInteger(p.tank.stat.battles)),1)]),t("span",ce,[a(m,{name:"flag-variant",size:"18"}),t("span",re,[a(w,{"win-rate":p.tank.stat.winRate},null,8,["win-rate"])])]),t("span",me,[a(m,{name:"destruction",size:"18"}),t("span",ue,C(v.$formatter.number.toInteger(p.tank.stat.damagePerBattle)),1)])])])])],16)}}}),pe={class:"hand-statistic-tank-table__row"},ke={class:"hand-statistic-tank-table__tank"},fe={class:"hand-statistic-tank-table__name"},ve={class:"hand-statistic-tank-table__diff"},he={style:{display:"flex",gap:"10px"}},ye=H({__name:"HendStatisticTankTable",props:{items:{type:Array,default:()=>[],required:!0}},emits:["pressEdit"],setup(p,{emit:v}){const c={prop:"lastUpdateTime",order:"asc"},b=mt(),k=q(()=>b.isTablet),{$formatter:m}=ht(),w=[{key:"name",label:"Танк",sortable:!0},{key:"type",label:"Тип",sortable:!0},{key:"tier",label:"I-X",sortable:!0},{key:"battles",label:m.stat.accountProp("battles"),sortable:!0,sortMethod(e,d){const h=e,y=d;return h.stat.battles-y.stat.battles}},{key:"winRate",label:m.stat.accountProp("wins"),sortable:!0,sortMethod(e,d){const h=e,y=d;return h.stat.winRate-y.stat.winRate}},{key:"damagePerBattle",label:m.stat.accountProp("damage_dealt"),sortable:!0,sortMethod(e,d){const h=e,y=d;return h.stat.damagePerBattle-y.stat.damagePerBattle}},{key:"lastUpdateTime",label:"Дата обновления",sortable:!0,sortMethod(e,d){return d.lastUpdateTime-e.lastUpdateTime}},{key:"controls",label:"",width:100}],T=[{key:"battles",label:m.stat.accountProp("battles"),sortable:!0,sortMethod(e,d){const h=e,y=d;return h.stat.battles-y.stat.battles}},{key:"winRate",label:m.stat.accountProp("wins"),sortable:!0,sortMethod(e,d){const h=e,y=d;return h.stat.winRate-y.stat.winRate}},{key:"damagePerBattle",label:m.stat.accountProp("damage_dealt"),sortable:!0,sortMethod(e,d){const h=e,y=d;return h.stat.damagePerBattle-y.stat.damagePerBattle}},{key:"lastUpdateTime",label:"Дата обновления",sortable:!0,sortMethod(e,d){return d.lastUpdateTime-e.lastUpdateTime}}],o=v;return(e,d)=>{const h=_e,y=Kt,_=et,x=rt,D=ct,r=gt,f=G,P=tt,M=At;return l(k)?(g(),A(y,{key:0,class:"hand-statistic-tank-table",headers:T,data:p.items,"default-sort":c},{default:i(({row:u})=>[a(h,{tank:u,onClick:O=>o("pressEdit",u)},null,8,["tank","onClick"])]),_:1},8,["data"])):(g(),A(M,{key:1,class:"hand-statistic-tank-table",headers:w,data:p.items,"default-sort":c},{type:i(({row:u})=>[a(_,{size:"24",type:u.type,"is-premium":u.is_premium,"is-collectible":u.is_collectible},null,8,["type","is-premium","is-collectible"])]),tier:i(({row:u})=>[a(x,{tier:u.tier},null,8,["tier"])]),name:i(({row:u})=>{var O;return[t("div",pe,[t("div",ke,[a(D,{class:"hand-statistic-tank-table__tank-nation",src:`/img/nations/nation-${u.nation}.svg`,alt:u.nation},null,8,["src","alt"]),a(D,{class:"hand-statistic-tank-table__tank-img",alt:u.name,src:(O=u.images)==null?void 0:O.preview},null,8,["alt","src"])]),t("span",fe,C(u.name),1)])]}),battles:i(({row:u})=>[t("span",null,C(l(m).number.toInteger(u.stat.battles)),1)]),winRate:i(({row:u})=>[a(r,{"win-rate":u.stat.winRate},null,8,["win-rate"])]),damagePerBattle:i(({row:u})=>[S(C(l(m).number.toInteger(u.stat.damagePerBattle)),1)]),lastUpdateTime:i(({row:u})=>[S(C(l(m).date.toRelativeTime(u.lastUpdateTime)||"---")+" ",1),t("div",ve,C(l(m).date.toDateTime(u.lastUpdateTime)||"---"),1)]),controls:i(({row:u})=>[t("div",he,[a(P,{onClick:O=>o("pressEdit",u)},{before:i(()=>[a(f,{name:"edit"})]),default:i(()=>[d[0]||(d[0]=S(" Изменить "))]),_:2},1032,["onClick"]),d[1]||(d[1]=t("div",null,null,-1))])]),_:1},8,["data"]))}}}),ge=H({__name:"NationSelect",props:lt({noWrap:{type:Boolean,default:!1,required:!1}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const v=ot(p,"modelValue"),c=["ussr","germany","usa","uk","japan","china","france","european","other"];function b(k,m){m?v.value.push(k):v.value=[...v.value.filter(w=>w!==k)]}return(k,m)=>{const w=yt,T=ut;return g(),U("div",{class:Z(["nation-select",[p.noWrap?"nation-select--no-wrap":""]])},[(g(),U(E,null,dt(c,o=>{var e;return a(T,{key:o,"model-value":!!((e=v.value)!=null&&e.includes(o)),onChange:d=>b(o,d)},{default:i(()=>[a(w,{nation:o},null,8,["nation"])]),_:2},1032,["model-value","onChange"])}),64))],2)}}}),be=H({__name:"TypeSelect",props:lt({noWrap:{type:Boolean,default:!1,required:!1}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const v=ot(p,"modelValue"),c=["lightTank","mediumTank","heavyTank","AT-SPG"];function b(k,m){m?v.value.push(k):v.value=[...v.value.filter(w=>w!==k)]}return(k,m)=>{const w=et,T=ut;return g(),U("div",{class:Z(["type-select",[p.noWrap?"type-select--no-wrap":""]])},[(g(),U(E,null,dt(c,o=>{var e;return a(T,{key:o,"model-value":!!((e=v.value)!=null&&e.includes(o)),onChange:d=>b(o,d)},{default:i(()=>[a(w,{type:o},null,8,["type"])]),_:2},1032,["model-value","onChange"])}),64))],2)}}}),we={class:"hand-statistic-tank-select"},Te={class:"hand-statistic-tank-select__body"},$e={class:"hand-statistic-tank-select__filters"},Ve={class:"hand-statistic-tank-select__filters-item"},Se={class:"hand-statistic-tank-select__filters-item"},Ue={class:"hand-statistic-tank-select__filters-item"},xe={class:"hand-statistic-tank-select__filters-item"},Be={class:"hand-statistic-tank-select__count"},Ce={key:0,class:"hand-statistic-tank-select__list",style:{display:"flex","align-items":"center","justify-content":"center"}},Re={key:1,class:"hand-statistic-tank-select__list"},Pe=["onClick","onKeyup"],Ie={class:"hand-statistic-tank-select__item-details"},Me={class:"hand-statistic-tank-select__item-props"},Oe={key:2,class:"hand-statistic-tank-select__list",style:{display:"flex","align-items":"center","justify-content":"center"}},We={class:"hand-statistic-tank-select__controls"},De={class:"hand-statistic-tank-select__controls-row"},Ee=H({__name:"HandStatisticTankSelect",props:{items:{type:Object,default:()=>({}),required:!0},exclude:{type:Array,default:()=>[],required:!1}},emits:["select","cancel"],setup(p,{emit:v}){const c=j(),b=p,k=mt(),m=q(()=>k.isMobile),w=q(()=>Object.values(b.items).sort((r,f)=>f.tier-r.tier).filter(r=>[!r.name.startsWith("#"),!b.exclude.includes(r.tank_id),o.tiers.length?o.tiers.includes(r.tier):!0,o.types.length?o.types.includes(r.type):!0,o.nations.length?o.nations.includes(r.nation):!0].every(f=>f))),T=()=>({tiers:[],types:[],nations:[]}),o=F(T()),e=q(()=>!Jt(T(),o)),d=q(()=>o.tiers.length===0&&o.types.length===0&&o.nations.length===0),h=v;function y(r){let f="standard";return r.is_premium&&(f="premium"),r.is_collectible&&(f="collectible"),f}async function _(r,f){var P,M;h("select",r),await Mt(),(M=(P=c.value)==null?void 0:P[f+1])==null||M.focus()}function x(r){return b.exclude.includes(r.tank_id)}function D(){Object.assign(o,T())}return(r,f)=>{const P=Xt,M=ge,u=be,O=G,L=tt,z=ct,at=yt,st=et,nt=rt;return g(),U("div",we,[t("div",Te,[t("div",$e,[t("div",Ve,[a(P,{modelValue:l(o).tiers,"onUpdate:modelValue":f[0]||(f[0]=$=>l(o).tiers=$),"no-wrap":""},null,8,["modelValue"])]),t("div",Se,[a(M,{modelValue:l(o).nations,"onUpdate:modelValue":f[1]||(f[1]=$=>l(o).nations=$),"no-wrap":""},null,8,["modelValue"])]),t("div",Ue,[a(u,{modelValue:l(o).types,"onUpdate:modelValue":f[2]||(f[2]=$=>l(o).types=$),"no-wrap":""},null,8,["modelValue"])]),t("div",xe,[a(L,{title:"Сброс фильтров",disabled:!l(e),onClick:D},{before:i(()=>[a(O,{name:"close"})]),default:i(()=>[l(m)?N("",!0):(g(),U(E,{key:0},[S(" Сброс ")],64))]),_:1},8,["disabled"])])]),t("div",Be," Всего - "+C(Object.keys(b.items).length),1),l(d)?(g(),U("div",Ce," Выберите что-нибудь в фильтре... ")):l(w).length?(g(),U("div",Re,[(g(!0),U(E,null,dt(l(w),($,X)=>(g(),U("div",{key:$.tank_id,ref_for:!0,ref_key:"itemsRef",ref:c,role:"button","aria-pressed":"false",class:Z(["hand-statistic-tank-select__item",[x($)?"hand-statistic-tank-select__item--excluded":""]]),tabindex:"0",onClick:it=>_($,X),onKeyup:K(it=>_($,X),["enter"])},[a(z,{class:"hand-statistic-tank-select__item-img",alt:$.name,src:$.images.preview},null,8,["alt","src"]),t("div",Ie,[t("div",{class:Z(["hand-statistic-tank-select__item-name",`hand-statistic-tank-select__item-name--${y($)}`])},C($.name),3),t("div",Me,[a(at,{size:"18",nation:$.nation},null,8,["nation"]),a(st,{size:"24",type:$.type},null,8,["type"]),a(nt,{tier:$.tier},null,8,["tier"])])])],42,Pe))),128))])):(g(),U("div",Oe," Ничего не найдено... "))]),t("div",We,[f[5]||(f[5]=t("div",{class:"hand-statistic-tank-select__controls-row"},null,-1)),t("div",De,[a(L,{onClick:f[3]||(f[3]=$=>h("cancel"))},{default:i(()=>f[4]||(f[4]=[S(" Закрыть ")])),_:1})])])])}}}),He={class:"hand-statistic-tank-edit"},je={class:"hand-statistic-tank-edit__body"},Ne={class:"hand-statistic-tank-edit__params"},qe={class:"hand-statistic-tank-edit__params-item"},ze={class:"hand-statistic-tank-edit__params-item"},Ke={class:"hand-statistic-tank-edit__params"},Ae={class:"hand-statistic-tank-edit__params-item"},Fe={class:"hand-statistic-tank-edit__params-item"},Ge={class:"hand-statistic-tank-edit__params"},Le={class:"hand-statistic-tank-edit__params-item"},Xe={class:"hand-statistic-tank-edit__params-item"},Je={class:"hand-statistic-tank-edit__params-item"},Qe={class:"hand-statistic-tank-edit__controls"},Ye={class:"hand-statistic-tank-edit__controls-row"},Ze=H({__name:"HandStatisticTankEdit",props:{modelValue:{required:!0,default:()=>({})},modelModifiers:{}},emits:lt(["close","save"],["update:modelValue"]),setup(p,{emit:v}){const c=ot(p,"modelValue"),b=F({isWin:!0}),k=F({damage_dealt:0,losses:0,wins:0});Y(()=>[c.value.stat],()=>{const{losses:o,wins:e}=c.value.stat;c.value.stat.battles=o+e,c.value.stat.winRate=W.winRate(c.value.stat),c.value.stat.damagePerBattle=W.damagePerBattle(c.value.stat)},{deep:!0});const m=v;function w(){m("close")}function T(){b.isWin?k.wins+=1:k.losses+=1,c.value.lastUpdateTime=Date.now(),c.value.stat=W.sum(c.value.stat,{...k,battles:k.losses+k.wins}),m("save",c.value)}return(o,e)=>{const d=bt,h=ut,y=G,_=tt;return g(),U("div",He,[t("div",je,[t("div",Ne,[e[7]||(e[7]=t("div",{class:"hand-statistic-tank-edit__params-title"}," Информация ",-1)),t("div",qe,[e[5]||(e[5]=t("span",{class:"hand-statistic-tank-edit__params-item-title"}," Название танка: ",-1)),S(" "+C(c.value.name),1)]),t("div",ze,[e[6]||(e[6]=t("span",{class:"hand-statistic-tank-edit__params-item-title"}," Дата обновления: ",-1)),S(" "+C(o.$formatter.date.toDateTime(c.value.lastUpdateTime)||"---"),1)])]),t("div",Ke,[e[11]||(e[11]=t("div",{class:"hand-statistic-tank-edit__params-title"}," Показатели за бой ",-1)),t("div",Ae,[e[8]||(e[8]=t("span",{class:"hand-statistic-tank-edit__params-item-title"}," Урон: ",-1)),a(d,{modelValue:l(k).damage_dealt,"onUpdate:modelValue":e[0]||(e[0]=x=>l(k).damage_dealt=x),width:"100px",min:"0",onKeyup:K(T,["enter"])},null,8,["modelValue"])]),t("div",Fe,[e[10]||(e[10]=t("span",{class:"hand-statistic-tank-edit__params-item-title"}," Результат: ",-1)),a(h,{modelValue:l(b).isWin,"onUpdate:modelValue":e[1]||(e[1]=x=>l(b).isWin=x)},{default:i(()=>e[9]||(e[9]=[S(" Победа ")])),_:1},8,["modelValue"])])]),t("div",Ge,[e[15]||(e[15]=t("div",{class:"hand-statistic-tank-edit__params-title"}," Суммарные показатели ",-1)),t("div",Le,[e[12]||(e[12]=t("span",{class:"hand-statistic-tank-edit__params-item-title"}," Урон: ",-1)),a(d,{modelValue:c.value.stat.damage_dealt,"onUpdate:modelValue":e[2]||(e[2]=x=>c.value.stat.damage_dealt=x),width:"100px",min:"0",onKeyup:K(T,["enter"])},null,8,["modelValue"])]),t("div",Xe,[e[13]||(e[13]=t("span",{class:"hand-statistic-tank-edit__params-item-title"}," Побед: ",-1)),a(d,{modelValue:c.value.stat.wins,"onUpdate:modelValue":e[3]||(e[3]=x=>c.value.stat.wins=x),width:"100px",min:"0",onKeyup:K(T,["enter"])},null,8,["modelValue"])]),t("div",Je,[e[14]||(e[14]=t("span",{class:"hand-statistic-tank-edit__params-item-title"}," Пораж.: ",-1)),a(d,{modelValue:c.value.stat.losses,"onUpdate:modelValue":e[4]||(e[4]=x=>c.value.stat.losses=x),width:"100px",min:"0",onKeyup:K(T,["enter"])},null,8,["modelValue"])])])]),t("div",Qe,[e[18]||(e[18]=t("div",{class:"hand-statistic-tank-edit__controls-row"},null,-1)),t("div",Ye,[a(_,{onClick:w},{before:i(()=>[a(y,{name:"close"})]),default:i(()=>[e[16]||(e[16]=S(" Отмена "))]),_:1}),a(_,{onClick:T},{before:i(()=>[a(y,{name:"content-save"})]),default:i(()=>[e[17]||(e[17]=S(" Сохранить "))]),_:1})])])])}}}),ta={class:"hand-statistic-page__settings"},ea={key:0},aa={class:"hand-statistic-page__params"},sa={class:"hand-statistic-page__params-item"},na={class:"hand-statistic-page__params-item-value"},ia={class:"hand-statistic-page__params-item"},la={class:"hand-statistic-page__params-item-value"},oa={class:"hand-statistic-page__params-item"},da={class:"hand-statistic-page__params-item-value link",style:{"font-weight":"500"}},ca={style:{display:"flex","justify-content":"space-between"}},ra={style:{display:"flex","justify-content":"space-between"}},ma={style:{display:"flex",gap:"10px","text-align":"center"}},Aa=H({__name:"index",setup(p){const{$formatter:v}=ht(),c=Ot();Wt({title:()=>v.route.getTitle(Yt.toString(c.name)??"")});const b=j(),k=j(),m=j(),w=j(),T=Dt(),o=mt(),e=q(()=>o.isMobile),d=j([{key:"battles",label:v.stat.accountProp("battles"),value:0},{key:"winRate",label:v.stat.accountProp("winRate"),value:0},{key:"damagePerBattle",label:v.stat.accountProp("damagePerBattle"),value:0}]),h=Zt(),y=Et(),_=F({tanks:[],currentTank:null}),x=pt("handleStatMetricsOpacity"),D=pt("handleStatMetricsWidth"),r=F({metricsOpacity:+x.value,metricsWidth:D.value});Y(()=>r.metricsOpacity,()=>{x.value=r.metricsOpacity}),Y(()=>r.metricsWidth,()=>{D.value=r.metricsWidth}),Y(()=>_.tanks,f,{deep:!0,immediate:!0}),Ht(async()=>{var s;await h.getTanksVehicles(),(s=(await kt.handStat.tanks.get(T.accountId)).data)==null||s.raw.forEach(V=>{var B;const I=(B=h.vehicles)==null?void 0:B[V.tankId];I&&_.tanks.push(M({tank:I,stat:V.stat,lastUpdateTime:V.lastBattleTime}))})});function f(){var s;let n={};_.tanks.forEach(V=>{n=W.sum(n,V.stat)}),(s=d.value)==null||s.forEach(V=>{V.key==="winRate"?V.value=W.winRate(n):V.key==="damagePerBattle"?V.value=W.damagePerBattle(n):V.value=n.battles??0})}function P(n){return{...n,battles:(n.losses||0)+(n.wins||0),winRate:W.winRate(n),damagePerBattle:W.damagePerBattle(n)}}function M(n){const s={...n.tank,stat:n.stat};return s.stat=P(s.stat),s.lastUpdateTime=n.lastUpdateTime,s}function u(){var n;(n=b.value)==null||n.doOpen()}function O(){var n;(n=m.value)==null||n.doOpen()}function L(){return{battles:0,damage_dealt:0,losses:0,wins:0,winRate:0,damagePerBattle:0}}async function z(n){try{return await kt.handStat.tanks.set(T.accountId,n.map(s=>({stat:s.stat,tankId:s.tank_id,lastBattleTime:s.lastUpdateTime}))),!0}catch(s){return qt(s,{title:"Установка данных ручной статистики"}),!1}}async function at(n){let s=[..._.tanks];_.tanks.some(B=>B.tank_id===n.tank_id)||(s=[{...n,lastUpdateTime:Date.now(),stat:L()},...s]),await z(s)&&(_.tanks=s,y.add({type:"success",message:"Техники успешно добавлена"}))}function st(){var n;(n=b.value)==null||n.doClose()}function nt(n){var s;_.currentTank=ft(n),(s=k.value)==null||s.doOpen()}async function $(){var n;await((n=k.value)==null?void 0:n.doClose()),_.currentTank=null}async function X(){var B;if(!_.currentTank)return;const n=ft(_.currentTank);n.stat=P(n.stat);const s=_.tanks.findIndex(J=>J.tank_id===n.tank_id),V=[..._.tanks];s>=0&&V.splice(s,1,n),await z(V)&&(_.tanks=V,await((B=k.value)==null?void 0:B.doClose()),_.currentTank=null,y.add({type:"success",message:"Данные техники успешно обновлены"}))}function it(){var n;(n=w.value)==null||n.doOpen()}function wt(){var n;(n=w.value)==null||n.doClose()}async function Tt(){var n;_.tanks.length?await z([])&&(_.tanks=[],(n=w.value)==null||n.doClose(),y.add({type:"success",message:"Данные техники успешно обновлены"})):y.add({type:"info",message:"Нечего сбрасывать"})}function $t(){Nt({path:"/hand-statistic/widget",query:{accountId:T.accountId,opacity:r.metricsOpacity,width:r.metricsWidth}},{open:{target:"_blank"}})}return(n,s)=>{const V=Pt,I=G,B=tt,J=zt,Vt=ye,St=Ft,Ut=bt,xt=Gt,Q=Lt,Bt=Ee,Ct=Ze,Rt=Qt;return l(T).accountId?(g(),A(vt,{key:0,class:"hand-statistic-page"},{default:i(()=>[a(J,{title:"Средние показатели"},{default:i(()=>[a(V,{modelValue:l(d),"onUpdate:modelValue":s[0]||(s[0]=R=>jt(d)?d.value=R:null),opacity:l(r).metricsOpacity,width:l(r).metricsWidth,class:"hand-statistic-page__average-list"},null,8,["modelValue","opacity","width"]),t("div",ta,[a(B,{title:"Добавить танк",onClick:u},{before:i(()=>[a(I,{name:"add"})]),default:i(()=>[l(e)?N("",!0):(g(),U(E,{key:0},[S(" Добавить танк ")],64))]),_:1}),a(B,{title:"Сброс",onClick:it},{before:i(()=>[a(I,{name:"refresh"})]),default:i(()=>[l(e)?N("",!0):(g(),U(E,{key:0},[S(" Сброс ")],64))]),_:1}),a(B,{title:"Настройки",onClick:O},{before:i(()=>[a(I,{name:"tune"})]),default:i(()=>[l(e)?N("",!0):(g(),U(E,{key:0},[S(" Настройки ")],64))]),_:1}),a(B,{title:"К виджету",onClick:$t},{before:i(()=>[a(I,{name:"open-in-new"})]),default:i(()=>[l(e)?N("",!0):(g(),U("span",ea," К виджету "))]),_:1})])]),_:1}),a(J,{title:"Техника"},{default:i(()=>[a(Vt,{items:l(_).tanks,onPressEdit:nt},null,8,["items"])]),_:1}),a(Q,{ref_key:"settingsDialogRef",ref:m,width:"480px",title:"Настройки"},{footer:i(()=>[t("div",ca,[s[9]||(s[9]=t("span",null,null,-1)),a(B,{onClick:s[3]||(s[3]=R=>{var _t;return(_t=l(m))==null?void 0:_t.doClose()})},{default:i(()=>s[8]||(s[8]=[S(" Закрыть ")])),_:1})])]),default:i(()=>[t("div",aa,[t("div",sa,[s[5]||(s[5]=t("div",{class:"hand-statistic-page__params-item-title"}," Прозрачность фона виджета ",-1)),t("div",na,[a(St,{modelValue:l(r).metricsOpacity,"onUpdate:modelValue":s[1]||(s[1]=R=>l(r).metricsOpacity=R),width:"200px",min:0,max:1,step:.1},null,8,["modelValue"]),S(" "+C(l(v).number.toPercent((l(r).metricsOpacity||0)*100)),1)])]),t("div",ia,[s[6]||(s[6]=t("div",{class:"hand-statistic-page__params-item-title"}," Ширина виджета (200px - 1880px) ",-1)),t("div",la,[a(Ut,{modelValue:l(r).metricsWidth,"onUpdate:modelValue":s[2]||(s[2]=R=>l(r).metricsWidth=R),width:"80px",min:0,max:1880,step:10},null,8,["modelValue"])])]),t("div",oa,[s[7]||(s[7]=t("div",{class:"hand-statistic-page__params-item-title"}," Выбор темы интерфейса ",-1)),t("label",da,[a(xt,{"is-large":""})])])])]),_:1},512),a(Q,{ref_key:"selectTankDialogRef",ref:b,width:"640px","no-scroll":"",title:"Добавление танка"},{default:i(()=>[l(h).vehicles?(g(),A(Bt,{key:0,items:l(h).vehicles,exclude:l(_).tanks.map(R=>R.tank_id),onSelect:at,onCancel:st},null,8,["items","exclude"])):N("",!0)]),_:1},512),a(Q,{ref_key:"editTankDialogRef",ref:k,width:"480px","no-scroll":"",title:"Изменение показателей"},{default:i(()=>[a(Ct,{modelValue:l(_).currentTank,"onUpdate:modelValue":s[4]||(s[4]=R=>l(_).currentTank=R),onClose:$,onSave:X},null,8,["modelValue"])]),_:1},512),a(Q,{ref_key:"confirmResetDialogRef",ref:w,width:"480px",title:"Сброс сессии"},{footer:i(()=>[t("div",ra,[s[12]||(s[12]=t("span",null,null,-1)),t("div",ma,[a(B,{width:"80px",align:"center",onClick:Tt},{default:i(()=>s[10]||(s[10]=[S(" Да ")])),_:1}),a(B,{width:"80px",align:"center",onClick:wt},{default:i(()=>s[11]||(s[11]=[S(" Нет ")])),_:1})])])]),default:i(()=>[s[13]||(s[13]=t("div",{class:"content-area"},[t("p",null," Вы уверены? Текущий прогресс будет утерян. ")],-1))]),_:1},512)]),_:1})):(g(),A(vt,{key:1,class:"hand-statistic-page"},{default:i(()=>[a(Rt,{height:"calc(70vh)"},{default:i(()=>s[14]||(s[14]=[S(" Для использования ручной статистики необходимо авторизоваться ")])),_:1})]),_:1}))}}});export{Aa as default};
