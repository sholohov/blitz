import{_ as L}from"./eT8_4s7B.js";import{_ as P}from"./DAdBg_Ew.js";import{_ as U}from"./IaBjmOTN.js";import{d as k,z as N,e as I,o as f,q as y,s as t,t as c,v as u,F as V,C as h,g as n,M,r as R,l as C,j as m,w as d,_ as q,x as $,f as A,h as D,u as F,a as O,b as j,B as H,G as z,m as E}from"./Divx9Nzj.js";import{_ as G}from"./DX4LQXT-.js";import{_ as J}from"./BX-xDoGX.js";import{_ as K}from"./DlAUqK2U.js";import{c as Q}from"./B4FMxlHh.js";import"./C6J5xBRa.js";import"./4hdVvK08.js";import"./DD4asW33.js";const W={class:"recruitment-player-profile-view"},X={class:"recruitment-player-profile-view__item"},Y={class:"recruitment-player-profile-view__item"},Z={class:"recruitment-player-profile-view__item"},ee={class:"recruitment-player-profile-view__props recruitment-player-profile-view__props--schedule"},te={class:"recruitment-player-profile-view__props-title"},re={class:"recruitment-player-profile-view__item"},se={class:"recruitment-player-profile-view__props recruitment-player-profile-view__props--preferences"},le={class:"recruitment-player-profile-view__props-item"},ie={class:"recruitment-player-profile-view__props-item"},ae={class:"recruitment-player-profile-view__props-item"},oe=k({__name:"RecruitmentPlayerProfileView",props:{modelValue:{required:!0,default:()=>({})},modelModifiers:{}},emits:["update:modelValue"],setup(g){const o=N(g,"modelValue"),s=I(()=>{var e;return(e=o.value)==null?void 0:e.schedule.filter(r=>r.isActive)});return(e,r)=>(f(),y("div",W,[t("div",X,[r[0]||(r[0]=t("div",{class:"recruitment-player-profile-view__item-title"}," Статус ",-1)),c(" "+u(e.$formatter.recruitment.playerStatus(o.value.status)),1)]),t("div",Y,[r[1]||(r[1]=t("div",{class:"recruitment-player-profile-view__item-title"}," Цель поиска ",-1)),c(" "+u(e.$formatter.recruitment.target(o.value.target)),1)]),t("div",Z,[r[2]||(r[2]=t("div",{class:"recruitment-player-profile-view__item-title"}," Время активности ",-1)),t("div",ee,[(f(!0),y(V,null,h(n(s),p=>(f(),y("div",{key:p.day,class:"recruitment-player-profile-view__props-item"},[t("span",te,u(e.$formatter.date.toDay(p.day))+": ",1),c(" "+u(p.start)+":00 - "+u(p.end)+":00 ",1)]))),128))])]),t("div",re,[r[6]||(r[6]=t("div",{class:"recruitment-player-profile-view__item-title"}," Предпочтения ",-1)),t("div",se,[t("div",le,[r[3]||(r[3]=t("span",{class:"recruitment-player-profile-view__props-title"}," Мин. процент побед: ",-1)),c(" "+u(e.$formatter.number.toFloatPercent(o.value.preferences.winRate)),1)]),t("div",ie,[r[4]||(r[4]=t("span",{class:"recruitment-player-profile-view__props-title"}," Мин. кол-во боёв: ",-1)),c(" "+u(e.$formatter.number.toInteger(o.value.preferences.battles)),1)]),t("div",ae,[r[5]||(r[5]=t("span",{class:"recruitment-player-profile-view__props-title"}," Мин. урон за бой: ",-1)),c(" "+u(e.$formatter.number.toInteger(o.value.preferences.damagePerBattle)),1)])])])]))}}),ne={class:"recruitment-players-table__name"},pe={style:{display:"flex","justify-content":"space-between"}},ue=k({__name:"RecruitmentPlayersTable",props:{list:{type:Array,required:!0,default:()=>[]}},setup(g){const o=M(),s=R(null),e=C({profile:null}),r=[{label:"Ник",key:"nickname"},{label:"Цель поиска",key:"target",formatter:l=>$.recruitment.target(l)},{label:"Статус",key:"status",formatter:l=>$.recruitment.playerStatus(l)},{label:"Предпочтения",key:"preferences"}];function p(l){var a;e.profile=l,(a=s==null?void 0:s.value)==null||a.doOpen()}function w(){var l;e.profile=null,(l=s==null?void 0:s.value)==null||l.doClose()}function i(){var l;e.profile=null,(l=s==null?void 0:s.value)==null||l.doClose(),o.add({type:"success",message:"Приглашение отправлено"})}return(l,a)=>{var S;const b=U,_=q,T=G,x=oe,B=J;return f(),y(V,null,[m(T,{class:"recruitment-players-table",data:g.list,headers:r,"scroll-auto-disabling":"","scroll-to-top":"",height:"calc(100vh - 140px)"},{nickname:d(({row:v})=>[t("div",ne,[m(b,{role:v.role},null,8,["role"]),m(_,{"is-text":"",class:"recruitment-players-table__name-link link",onClick:ve=>p(v)},{default:d(()=>[c(u(v.nickname),1)]),_:2},1032,["onClick"])])]),_:1},8,["data"]),m(B,{ref_key:"addProfileRef",ref:s,title:(S=n(e).profile)==null?void 0:S.nickname,width:"640px"},{footer:d(()=>[t("div",pe,[m(_,{onClick:i},{default:d(()=>a[1]||(a[1]=[c(" Пригласить ")])),_:1}),m(_,{onClick:w},{default:d(()=>a[2]||(a[2]=[c(" Закрыть ")])),_:1})])]),default:d(()=>[n(e).profile?(f(),A(x,{key:0,modelValue:n(e).profile,"onUpdate:modelValue":a[0]||(a[0]=v=>n(e).profile=v)},null,8,["modelValue"])):D("",!0)]),_:1},8,["title"])],64)}}}),ce=K(ue,[["__scopeId","data-v-24b45543"]]),me={class:"recruitment-players-page"},_e={class:"recruitment-players-page__filters"},de={class:"recruitment-players-page__filters-item"},fe={class:"recruitment-players-page__filters-item"},Be=k({__name:"players",setup(g){const{$formatter:o}=F(),s=O();j({title:()=>o.route.getTitle(Q.toString(s.name)??"")});const e=C({profile:null,profileList:[],selectedTarget:"clan",selectedStatus:null}),r=[{value:null,label:"Все"},{value:"active",label:$.recruitment.playerStatus("active")},{value:"passive",label:$.recruitment.playerStatus("passive")}];async function p(){const{data:w}=await z.recruitment.getList({target:[e.selectedTarget],status:e.selectedStatus?[e.selectedStatus]:["active","passive"]});e.profileList=w}return H(()=>[e.selectedTarget,e.selectedStatus],()=>p()),E(()=>{p()}),(w,i)=>{const l=L,a=P,b=ce;return f(),y("div",me,[i[4]||(i[4]=t("div",{class:"content-area recruitment-players-page__content"},[t("h2",null,"Подбор игроков")],-1)),t("div",_e,[t("div",de,[i[2]||(i[2]=t("span",{class:"recruitment-players-page__filters-title"}," Цель поиска ",-1)),m(l,{modelValue:n(e).selectedTarget,"onUpdate:modelValue":i[0]||(i[0]=_=>n(e).selectedTarget=_)},null,8,["modelValue"])]),t("div",fe,[i[3]||(i[3]=t("span",{class:"recruitment-players-page__filters-title"}," Статус поиска ",-1)),m(a,{modelValue:n(e).selectedStatus,"onUpdate:modelValue":i[1]||(i[1]=_=>n(e).selectedStatus=_),class:"recruitment-status-select",options:r,width:"150px"},null,8,["modelValue"])])]),m(b,{list:n(e).profileList},null,8,["list"])])}}});export{Be as default};
