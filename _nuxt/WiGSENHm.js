import{d as q,r as B,l as E,an as F,m as R,A as U,o as l,q as n,ao as G,N as c,h as f,F as v,C as S,s as $,I as p,t as A,v as C,j as V,y as J,g as P,a4 as Q}from"./Divx9Nzj.js";import{i as W}from"./DX4LQXT-.js";import{d as j}from"./DD4asW33.js";const X={key:0,class:"ui-table-mobile__header"},Y={key:1,class:"ui-table-mobile__head"},Z={class:"ui-table-mobile__sort"},x=["title","onClick"],ee={key:0,class:"ui-table-mobile__sort-icons"},te={key:0,class:"ui-table-mobile__summary"},se={key:2,class:"ui-table-mobile__no-data"},ae={key:3,class:"ui-table-mobile__footer"},le=q({__name:"UiTableMobile",props:{data:{type:Array,required:!0,default:()=>[]},headers:{type:Array,default:()=>[]},summary:{type:Object,default:void 0},defaultSort:{type:Object,default:void 0},scrollAutoDisabling:{type:Boolean,default:!1},scrollToTop:{type:Boolean,default:!1},hideHeaders:{type:Boolean,default:!1},height:{type:String,default:void 0},rowKey:{type:String,default:void 0},maxHeight:{type:String,default:void 0},minHeight:{type:String,default:void 0}},emits:["sort","row-click"],setup(o,{expose:I,emit:M}){var w,H;const r=o,m=B(),y=B([]),d=E({order:((w=r.defaultSort)==null?void 0:w.order)??"",prop:((H=r.defaultSort)==null?void 0:H.prop)??""});F(()=>{var e;y.value=r.data,_(),r.scrollToTop&&((e=m.value)==null||e.scrollTo({top:0}))});let b=null;function N(){m.value&&(b=W({target:[m.value],threshold:1,callback(e){const t=e.target;e.isIntersecting?j(!1,t):(j(!0,t),t.scrollTo({top:0}))}}))}R(()=>{r.scrollAutoDisabling&&N()}),U(()=>{r.scrollAutoDisabling&&(b==null||b.disconnect())});const g=(e="default")=>!!G()[e];function _(){var s;let e=d.order,t=d.prop;e===""&&r.defaultSort&&(e=r.defaultSort.order,t=r.defaultSort.prop);const a=(s=r.headers)==null?void 0:s.find(u=>u.key===t);a&&(typeof a.sortMethod=="function"?y.value.sort((u,i)=>{var h,k;return e==="desc"?((h=a.sortMethod)==null?void 0:h.call(a,i,u))||0:((k=a.sortMethod)==null?void 0:k.call(a,u,i))||0}):a.sortable===!0&&y.value.sort((u,i)=>{const h=(e==="desc"?i:u)[t],k=(e==="desc"?u:i)[t];return String(h).localeCompare(String(k),void 0,{numeric:!0,sensitivity:"base"})}))}const z=M;function D(e){let t=e.key,a=d.order;d.prop!==t&&(a=""),a?a==="asc"?a="desc":(a="",t=""):a="asc",d.order=a,d.prop=t}function K(e){var t;e.sortable&&((t=m.value)==null||t.scrollTo({top:0}),D(e),_(),z("sort",{...d,column:e}))}function L(e,t){return typeof e.formatter=="function"?e.formatter(t):t}function T(e,t){return d.order===e&&d.prop===t}function O(e){return typeof r.summary!="object"||!Object.keys(r.summary).includes(e.key)?"":typeof e.formatter=="function"?e.formatter(r.summary[e.key]):r.summary[e.key]}return I({sortItems:_}),(e,t)=>{const a=J;return l(),n("div",{class:"ui-table-mobile",style:Q({height:o.height,maxHeight:o.maxHeight,minHeight:o.minHeight})},[g("header")?(l(),n("div",X,[c(e.$slots,"header")])):f("",!0),o.headers.length&&!o.hideHeaders?(l(),n("ul",Y,[(l(!0),n(v,null,S(o.headers,s=>(l(),n("li",{key:s.key,class:"ui-table-mobile__head-item"},[$("div",Z,[$("button",{title:s.tooltip,class:p(["ui-table-mobile__sort-btn",[s.sortable?"ui-table-mobile__sort-btn--has-sort":""]]),onClick:u=>K(s)},[c(e.$slots,`${s.key}-header`,{},()=>[A(C(s.label),1)])],10,x),s.sortable?(l(),n("span",ee,[V(a,{size:"16",name:"arrow-up",class:p(["ui-table-mobile__sort-icon",[T("asc",s.key)?"is-active":""]])},null,8,["class"]),V(a,{size:"16",name:"arrow-down",class:p(["ui-table-mobile__sort-icon",[T("desc",s.key)?"is-active":""]])},null,8,["class"])])):f("",!0)]),o.summary?(l(),n("div",te,[c(e.$slots,`${s.key}-summary`,{},()=>[A(C(O(s)),1)])])):f("",!0)]))),128))])):f("",!0),$("ul",{ref_key:"tableListRef",ref:m,class:"ui-table-mobile__list"},[(l(!0),n(v,null,S(P(y),(s,u)=>(l(),n("li",{key:String(o.rowKey?s[o.rowKey]:u),class:"ui-table-mobile__row"},[g("default")?c(e.$slots,"default",{key:0,row:s,data:null,index:u}):(l(!0),n(v,{key:1},S(o.headers,i=>(l(),n("td",{key:i.key,class:p(["ui-table-mobile__cell",[i.rowClass?i.rowClass:""]])},[s?c(e.$slots,`${i.key}`,{key:0,row:s,data:s[i.key],index:u},()=>[A(C(L(i,s[i.key])),1)]):f("",!0)],2))),128))]))),128))],512),Array.isArray(o.data)&&o.data.length?f("",!0):(l(),n("div",se," Нет данных ")),g("footer")?(l(),n("div",ae,[c(e.$slots,"footer")])):f("",!0)],4)}}});export{le as _};
