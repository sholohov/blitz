import{_ as Q}from"./DIwkXMey.js";import{f as U,o as B,c as R,b as H,w as X,F as Y,A as Z,a as J,t as F,K as p,d as ee,m as te,T as ae,s as t}from"./C1pZ3Ysy.js";import{c as w}from"./DZd8ySUx.js";import{s as i}from"./BwpGAOBT.js";const le={class:"metrics-plates"},ne={class:"metrics-plates__item-label"},oe={key:0,class:"metrics-plates__item-diff"},de=U({__name:"MetricsPlates",props:{items:{type:Array,required:!0,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){return(l,a)=>{const n=Q;return B(),R("div",le,[H(ae,{tag:"ul",class:"metrics-plates__list"},{default:X(()=>[(B(!0),R(Y,null,Z(e.items,o=>(B(),R("li",{key:o.key,class:"metrics-plates__item"},[J("span",ne,F(o.label),1),J("b",{class:"metrics-plates__item-value",style:p({color:o.color?`var(--color-${o.color})`:null})},[ee(F(o.value)+" ",1),o.diff?(B(),R("span",oe,F(o.diff),1)):te("",!0)],4),H(n,{loading:e.loading},null,8,["loading"])]))),128))]),_:1})])}}}),O=(e,l)=>{if(!(!e||!l))return e.reduce((a,n)=>a+n.battle_life_time,0)/l.battles},re=(e={})=>{var f,b,c,g,k,y,_,h,m,I,x,D,N,M,T,L,A,$,C,S,V,E,q,z,G,K,W;const l=[];l.push({label:"",key:"battles",value:((f=e.stat)==null?void 0:f.battles)||0,diff:t.number.toInteger((b=e.statDiff)==null?void 0:b.battles,!0)},{label:"",key:"winRate",value:t.number.toFloatPercent(((c=e.stat)==null?void 0:c.winRate)||0),diff:t.number.toFloatPercent((g=e.statDiff)==null?void 0:g.winRate,!0),color:w.winRate(((k=e.stat)==null?void 0:k.winRate)||0)},{label:"",key:"damagePerBattle",value:((y=e.stat)==null?void 0:y.damagePerBattle)||0,diff:t.number.toInteger((_=e.statDiff)==null?void 0:_.damagePerBattle,!0)});const a=e.achievements?i.winsInPlatoon({wins:((h=e.stat)==null?void 0:h.wins)??0,achievements:e.achievements}):void 0,n=e.achievementsDiff?i.winsInPlatoon({wins:((m=e.statDiff)==null?void 0:m.wins)??0,achievements:e.achievementsDiff})-(a||0):void 0;l.push({label:"",key:"winsInPlatoon",value:t.number.toFloatPercent(a||0),diff:t.number.toFloatPercent(n,!0)});const o=i.battlesPerDay({battles:((I=e.stat)==null?void 0:I.battles)||0,createAt:e.createAt||0}),u=i.battlesPerDay({battles:((x=e.statDiff)==null?void 0:x.battles)||0,createAt:e.createAtSnapshot||0});l.push({label:"",key:"battlesPerDay",value:o,diff:e.statDiff?t.number.toInteger(u-o,!0):""});const r=i.totalMasters(e.tanks??[]),v=i.totalMasters(e.tanksDiff??[]);l.push({label:"",key:"tanksWithMaster",value:`${r} / ${((D=e.tanks)==null?void 0:D.length)??0}`,diff:e.tanksDiff?`${v} / ${((N=e.tanksDiff)==null?void 0:N.length)??0}`:""}),l.push({label:"",key:"fragPerBattle",value:t.number.toFloatNumber(((M=e.stat)==null?void 0:M.fragPerBattle)||0),diff:t.number.toFloatNumber((T=e.statDiff)==null?void 0:T.fragPerBattle,!0)},{label:"",key:"surviveRate",value:t.number.toFloatPercent(((L=e.stat)==null?void 0:L.surviveRate)||0),diff:t.number.toFloatPercent((A=e.statDiff)==null?void 0:A.surviveRate,!0)},{label:"",key:"hitRate",value:t.number.toFloatPercent((($=e.stat)==null?void 0:$.hitRate)||0),diff:t.number.toFloatPercent((C=e.statDiff)==null?void 0:C.hitRate,!0)},{label:"",key:"spottedPerBattle",value:t.number.toFloatNumber(((S=e.stat)==null?void 0:S.spottedPerBattle)||0),diff:t.number.toFloatNumber((V=e.statDiff)==null?void 0:V.spottedPerBattle,!0)},{label:"",key:"xpPerBattle",value:t.number.toInteger(((E=e.stat)==null?void 0:E.xpPerBattle)||0),diff:t.number.toInteger((q=e.statDiff)==null?void 0:q.xpPerBattle,!0)},{label:"",key:"max_frags",value:((z=e.stat)==null?void 0:z.max_frags)||0,diff:t.number.toInteger((G=e.statDiff)==null?void 0:G.max_frags,!0)},{label:"",key:"max_xp",value:((K=e.stat)==null?void 0:K.max_xp)||0,diff:t.number.toInteger((W=e.statDiff)==null?void 0:W.max_xp,!0)});const d=O(e.tanks,e.stat)??0,s=O(e.tanksDiff,e.statDiff)??null,P=(s||0)-d;return l.push({key:"battle_life_time",label:"Время жизни в минутах",value:t.number.toFloatNumber(d/60||0),diff:s?t.number.toFloatNumber(P/60||0,!0):void 0}),l.forEach(j=>{j.label=t.stat.accountProp(j.key)}),l},ie=(e=[],l)=>{const a=e.length;let n;l&&a&&(n=i.accountAll(l.all,a));const o=Math.floor(e.reduce((u,r)=>Math.floor(u+i.battlesPerDay({createAt:r.created_at*1e3,battles:r.statistics.all.battles})),0)/a);return[{key:"battles",label:"Боёв",value:(n==null?void 0:n.battles)||0},{key:"winRate",label:"Побед",value:t.number.toFloatPercent((n==null?void 0:n.winRate)||0),color:w.winRate((n==null?void 0:n.winRate)||0)},{key:"damagePerBattle",label:"Урон",value:(n==null?void 0:n.damagePerBattle)||0},{key:"activity",label:"Боёв в день",value:t.number.toInteger(o)}]},ue=e=>{var s,P,f,b,c;const l=e.tank.all,a=e.tankDiff?e.tankDiff.all:null,n=[{key:"battles",label:t.stat.accountProp("battles"),value:t.number.toInteger(l.battles||0),diff:t.number.toInteger(a==null?void 0:a.battles,!0)},{key:"winRate",label:t.stat.accountProp("winRate"),value:t.number.toFloatPercent(l.winRate||0),diff:t.number.toFloatPercent(a==null?void 0:a.winRate,!0),color:w.winRate(l.winRate||0)},{key:"damagePerBattle",label:t.stat.accountProp("damagePerBattle"),value:t.number.toInteger(l.damagePerBattle||0),diff:t.number.toInteger((a==null?void 0:a.damagePerBattle)||0,!0)},{key:"fragPerBattle",label:t.stat.accountProp("fragPerBattle"),value:t.number.toFloatNumber(l.fragPerBattle||0),diff:t.number.toFloatNumber(a==null?void 0:a.fragPerBattle,!0)},{key:"surviveRate",label:t.stat.accountProp("surviveRate"),value:t.number.toFloatPercent(l.surviveRate||0),diff:t.number.toFloatPercent(a==null?void 0:a.surviveRate,!0)},{key:"hitRate",label:t.stat.accountProp("hitRate"),value:t.number.toFloatPercent(l.hitRate||0),diff:t.number.toFloatPercent(a==null?void 0:a.hitRate,!0)},{key:"spottedPerBattle",label:t.stat.accountProp("spottedPerBattle"),value:t.number.toFloatNumber(l.spottedPerBattle||0),diff:t.number.toFloatNumber(a==null?void 0:a.spottedPerBattle,!0)},{key:"xpPerBattle",label:t.stat.accountProp("xpPerBattle"),value:t.number.toInteger(l.xpPerBattle||0),diff:t.number.toInteger(a==null?void 0:a.xpPerBattle,!0)},{key:"max_frags",label:t.stat.accountProp("max_frags"),value:t.number.toInteger(l.max_frags||0),diff:t.number.toInteger((s=e.tankDiff)==null?void 0:s.max_frags)},{key:"max_xp",label:t.stat.accountProp("max_xp"),value:t.number.toInteger(l.max_xp||0),diff:t.number.toInteger((P=e.tankDiff)==null?void 0:P.max_xp)}],o=e.tank.achievements?i.winsInPlatoon({wins:e.tank.all.wins??0,achievements:e.tank.achievements}):void 0,u=(f=e.tankDiff)!=null&&f.achievements?i.winsInPlatoon({wins:e.tankDiff.all.wins??0,achievements:e.tankDiff.achievements})-(o||0):void 0;n.push({key:"winsInPlatoon",label:t.stat.accountProp("winsInPlatoon"),value:t.number.toFloatPercent(o||0),diff:t.number.toFloatPercent(u,!0)});const r=e.tank.battle_life_time/l.battles,v=(((b=e.tankDiff)==null?void 0:b.battle_life_time)??NaN)/(((c=e.tankDiff)==null?void 0:c.all.battles)??NaN),d=r-v;return n.push({key:"lifeTime",label:t.stat.accountProp("lifeTime"),value:t.number.toFloatNumber(r/60||0),diff:t.number.toFloatNumber(d/60||0,!0)}),n},se=(e={})=>{var a,n,o,u,r,v,d,s,P,f,b,c,g,k,y,_,h;const l=[{key:"battles",label:"Боёв",value:((a=e.stat)==null?void 0:a.battles)||0,diff:t.number.toInteger((n=e.diff)==null?void 0:n.battles,!0)},{key:"winRate",label:"Побед",value:t.number.toFloatPercent(((o=e.stat)==null?void 0:o.winRate)||0),diff:t.number.toFloatPercent((u=e.diff)==null?void 0:u.winRate,!0),color:w.winRate(((r=e.stat)==null?void 0:r.winRate)||0)},{key:"damagePerBattle",label:"Урон",value:((v=e.stat)==null?void 0:v.damagePerBattle)||0,diff:t.number.toInteger((d=e.diff)==null?void 0:d.damagePerBattle,!0)},{key:"fragPerBattle",label:"Уничтожено",value:t.number.toFloatNumber(((s=e.stat)==null?void 0:s.fragPerBattle)||0),diff:t.number.toFloatNumber((P=e.diff)==null?void 0:P.fragPerBattle,!0)},{key:"surviveRate",label:"Выживаемость",value:t.number.toFloatPercent(((f=e.stat)==null?void 0:f.surviveRate)||0),diff:t.number.toFloatPercent((b=e.diff)==null?void 0:b.surviveRate,!0)},{key:"hitRate",label:"Меткость",value:t.number.toFloatPercent(((c=e.stat)==null?void 0:c.hitRate)||0),diff:t.number.toFloatPercent((g=e.diff)==null?void 0:g.hitRate,!0)},{key:"spottedPerBattle",label:"Обнаружено",value:t.number.toFloatNumber(((k=e.stat)==null?void 0:k.spottedPerBattle)||0),diff:t.number.toFloatNumber((y=e.diff)==null?void 0:y.spottedPerBattle,!0)}];if((_=e.stat)!=null&&_.mm_rating){const m=(e.stat.mm_rating||0)*10+3e3;l.push({key:"mm_rating",label:"Рейтинг",value:t.number.toInteger(m)})}else{const m=10-(((h=e.stat)==null?void 0:h.calibration_battles_left)||0);l.push({key:"calibration_battles_left",label:m<10?"Калибровочные бои":"Рейтинг",value:m<10?`${t.number.toInteger(m)}/10`:"---"})}return l},Pe={account:re,accountRating:se,tank:ue,clan:ie};export{de as _,Pe as m};
