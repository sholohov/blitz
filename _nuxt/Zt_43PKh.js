import{d as P,b0 as U,aN as z,r as p,B as F,o as s,e as q,h as H,w as W,f as Z,m as y,n as v,N as m,g as b,I as C,a4 as j,ap as G,Z as J,aI as Q,b1 as X,ao as Y,t as ee,v as te}from"./CjZrE5Wh.js";import{d as E}from"./DD4asW33.js";const oe=t=>t?!!t.offsetWidth||!!t.offsetHeight||!!t.getClientRects().length:!1,_=t=>{const d=[];return t.querySelectorAll(`a[href]:not([tabindex^="-"]),
    area[href]:not([tabindex^="-"]),
    input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"]),
    input[type="radio"]:not([disabled]):not([tabindex^="-"]):checked,
    select:not([disabled]):not([tabindex^="-"]),
    textarea:not([disabled]):not([tabindex^="-"]),
    button:not([disabled]):not([tabindex^="-"]),
    iframe:not([tabindex^="-"]),
    audio[controls]:not([tabindex^="-"]),
    video[controls]:not([tabindex^="-"]),
    [contenteditable]:not([tabindex^="-"]),
    [tabindex]:not([tabindex^="-"])`).forEach(n=>{n&&oe(n)&&d.push(n)}),d},ae=["aria-modal"],ne={key:0,class:"ui-dialog__header"},le={class:"ui-dialog__title"},ie={key:1,class:"ui-dialog__footer"},re=P({__name:"UiDialog",props:{identity:{type:String,default:()=>U()},title:{type:String,default:void 0},width:{type:String,default:void 0},position:{type:String,default:void 0},appendToBody:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},hideClose:{type:Boolean,default:!1},noScroll:{type:Boolean,default:!1},modalEnabled:{type:Boolean,default:!1}},emits:["opened","closed","open","close"],setup(t,{expose:d,emit:n}){const a=z("modalsList"),r=t,D=p(),l=p(),R=p(),h=p(!1);let u=null,i=e=>{};F(()=>{x(),i(!1)});const f=n,g=(e="default")=>!!Y()[e];function A(){Array.isArray(a.value)||(a.value=[]),a.value.push({id:r.identity,close:c,open:k})}function x(){var e;a.value=(e=a.value)==null?void 0:e.filter(o=>o.id!==r.identity)}function M(){var e;(e=a.value)!=null&&e.length&&a.value[a.value.length-1].close()}const N=e=>{if(e.key==="Escape"){M(),e.preventDefault(),e.stopPropagation();return}if(e.key==="Tab"){if(!l.value)return;const o=_(l.value),S=document.activeElement,w=o.findIndex(O=>O===S),B=o.length-1;e.shiftKey&&w===0?(o[B].focus(),e.preventDefault()):!e.shiftKey&&w===B&&(o[0].focus(),e.preventDefault())}},T=()=>{if(!l.value)return;const e=_(l.value),o=e==null?void 0:e[0];o==null||o.focus({preventScroll:!0})},I=()=>{T(),f("opened",!0),i(!0)},V=()=>{var e;x(),(e=a.value)!=null&&e.length||E(!1),u==null||u.focus(),i(!1),f("closed",!0)},$=()=>{var e;(e=a.value)!=null&&e.length||E(!0),A(),f("open",!0)},K=()=>{f("close",!0)},L=()=>{r.modalEnabled||c()};function k(){return new Promise(e=>{u=document.activeElement,h.value=!0,i=e})}function c(){return new Promise(e=>{h.value=!1,i=e})}return d({doOpen:k,doClose:c}),(e,o)=>(s(),q(X,{to:"#teleports",disabled:!r.appendToBody},[H(Q,J(e.$attrs,{ref_key:"wrapperRef",ref:D,name:"ui-dialog-",onEnter:$,onAfterEnter:I,onLeave:K,onAfterLeave:V}),{default:W(()=>[Z(h)?(s(),y("div",{key:0,ref_key:"dialogRef",ref:l,class:C(["ui-dialog",[t.position?"ui-dialog--"+t.position:""]]),tabindex:"-1",onClick:G(L,["self"]),onKeydown:N},[v("div",{role:"dialog","aria-modal":t.modalEnabled,class:"ui-dialog__container",style:j({width:t.fullscreen?"100%":t.width,height:t.fullscreen?"100%":""})},[g("title")||t.title?(s(),y("div",ne,[v("div",le,[m(e.$slots,"title",{},()=>[ee(te(t.title),1)])])])):b("",!0),v("div",{ref_key:"bodyRef",ref:R,class:C(["ui-dialog__body",[t.noScroll?"ui-dialog__body--no-scroll":""]])},[m(e.$slots,"default")],2),g("footer")?(s(),y("div",ie,[m(e.$slots,"footer")])):b("",!0),t.hideClose?b("",!0):(s(),y("button",{key:2,class:"ui-dialog__close",type:"button",onClick:o[0]||(o[0]=S=>c())}))],12,ae)],34)):b("",!0)]),_:3},16)],8,["disabled"]))}});export{re as _};
