import{N as Ie}from"./nuxt-icon.qIaVhdWh.js";import{P as De,o as _,c as b,a as o,n as F,s as U,C as B,b as p,J,x as r,t as w,z as I,r as z,A as K,v as O,w as $,d as S,F as H,H as Q,B as Be,G as Pt,T as Xe,E as pe,D as Je,K as Qe,L as Z,_ as ee,Q as Ye,R as X,S as It,h as Dt,u as Bt,U as xt,V as $e,W as Ae,N as Ce}from"./entry.C7rsCkde.js";import{_ as Rt,m as oe}from"./RatingIcon.vue.4uO5v5Kn.js";import{_ as Ze}from"./nuxt-link.L0yXcBJ9.js";import{_ as he,a as te,h as G,u as Ot}from"./disableScroll.C0aRP9sA.js";import{_ as ce}from"./ContentLoader.vue.CZ7Avnj8.js";import{_ as ue,a as Mt,i as Vt,g as Et}from"./CDialog.vue.DWhS8OEK.js";import{a as se,s as Y}from"./request.2vtDDBdm.js";import{a as fe}from"./index.CiYw46hj.js";import{c as Lt,m as ne,_ as et,s as Te}from"./index.Bn66i9NN.js";import{a as le,_ as Ut}from"./CSelect.vue.wFKzONck.js";import{u as Ft}from"./index.DkVO-Tjf.js";import{_ as qt}from"./PageSection.vue.CMtJcZy6.js";import{_ as xe}from"./CImage.vue.ClFcMEow.js";import{f as tt,m as Nt}from"./index.B0yFPb21.js";import{_ as Re}from"./WinRate.vue.CRSh5IUU.js";import{_ as at}from"./CTable.vue.Nq0ui9O0.js";import{s as E}from"./index.DVI7ejDe.js";import{_ as jt,a as Ht,b as Gt,d as zt,e as Kt,i as Wt,f as Xt,g as Jt,c as ie}from"./cloneDeep.6mdasiia.js";import{e as Qt}from"./isArrayLike.ji7-7BFC.js";import{u as Yt}from"./user.DLlwbhvI.js";import{u as Zt}from"./index.EUvklMki.js";const ea={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 62 62"},ta=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M28.5 43c8.56 0 15.5-3.134 15.5-7v6c0 3.866-6.94 7-15.5 7S13 45.866 13 42v-6c0 3.866 6.94 7 15.5 7","clip-rule":"evenodd"},null,-1),aa=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M34.5 36c8.56 0 15.5-3.134 15.5-7v6c0 3.866-6.94 7-15.5 7S19 38.866 19 35v-6c0 3.866 6.94 7 15.5 7","clip-rule":"evenodd"},null,-1),na=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M44 19c0 3.866-6.94 7-15.5 7S13 22.866 13 19v6c0 3.866 6.94 7 15.5 7S44 28.866 44 25zm-1 0c0 1.296-1.21 2.8-3.951 4.038C36.4 24.234 32.672 25 28.5 25s-7.9-.766-10.549-1.962C15.211 21.801 14 20.296 14 19s1.21-2.8 3.951-4.038C20.6 13.766 24.328 13 28.5 13s7.9.766 10.549 1.962C41.789 16.199 43 17.704 43 19","clip-rule":"evenodd"},null,-1),sa=[ta,aa,na];function oa(t,i){return _(),b("svg",ea,[...sa])}const Ve={render(){return De(Ie,{icon:{render:oa},name:"gold"})}},ia={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 62 62"},ca=o("path",{stroke:"currentColor","stroke-width":"4",d:"m31 13.472 3.486 10.73.45 1.382H47.67l-9.127 6.63-1.176.855.45 1.382 3.486 10.73-9.127-6.632L31 37.695l-1.176.854-9.127 6.631 3.487-10.73.449-1.381-1.176-.854-9.127-6.631h12.735l.449-1.382z"},null,-1),la=[ca];function ra(t,i){return _(),b("svg",ia,[...la])}const ua={render(){return De(Ie,{icon:{render:ra},name:"xp"})}},da={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 62 62"},_a=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M49.306 27.104 44.133 9l9.483 11.574zm-14.426 25L56 23.654v13.793l-14.655 7.759h12.069l-7.759 5.172zm-21.552-25L18.5 9 9.017 20.574zm13.793 25L6 23.656v13.793l14.655 7.758H8.586l7.759 5.173zM21 20l10-4 10 4v16l-10 8-10-8zm6 12.5L29 22l5.5-1-2 7 4-.5-7 11 2-8z","clip-rule":"evenodd"},null,-1),ma=[_a];function fa(t,i){return _(),b("svg",da,[...ma])}const va={render(){return De(Ie,{icon:{render:fa},name:"prem"})}},pa={class:"account-resources"},ha={class:"account-resources__inner"},ka={key:0,class:"account-resources__item"},ga={class:"account-resources__text"},ya={class:"account-resources__item"},ba={class:"account-resources__text"},wa={class:"account-resources__item"},$a={class:"account-resources__text"},Aa={class:"account-resources__item"},Ca={class:"account-resources__text"},Ta=F({__name:"AccountResources",props:{resources:{type:Object,required:!0,default:()=>({})}},setup(t){const i=t,c=U(()=>{const v=i.resources.premium_expires_at*1e3;return v-Date.now()<=0?"":B.date.toTimePassed(v,Date.now(),!0)});return(v,d)=>(_(),b("div",pa,[o("div",ha,[t.resources.is_premium.toLocaleString()?(_(),b("div",ka,[p(r(va),{filled:!0,"font-controlled":!1,class:J(["account-resources__icon",[{"account-resources__icon--prem":r(c)}]])},null,8,["class"]),o("div",ga,w(r(c)||"0 дн."),1)])):I("",!0),o("div",ya,[p(r(Ve),{filled:!0,"font-controlled":!1,class:"account-resources__icon account-resources__icon--gold"}),o("div",ba,w(t.resources.gold.toLocaleString()),1)]),o("div",wa,[p(r(Ve),{filled:!0,"font-controlled":!1,class:"account-resources__icon account-resources__icon--credits"}),o("div",$a,w(t.resources.credits.toLocaleString()),1)]),o("div",Aa,[p(r(ua),{filled:!0,"font-controlled":!1,class:"account-resources__icon account-resources__icon--xp"}),o("div",Ca,w(t.resources.free_xp.toLocaleString()),1)])])]))}}),Sa={class:"account-preview-details__body"},Pa={class:"account-preview-details__section"},Ia={class:"account-preview-details__props-title"},Da={class:"account-preview-details__props"},Ba={class:"account-preview-details__prop"},xa=o("span",{class:"account-preview-details__prop-title"}," Дата создания ",-1),Ra={class:"account-preview-details__prop"},Oa=o("span",{class:"account-preview-details__prop-title"}," Дата обновления ",-1),Ma={key:0,class:"account-preview-details__section"},Va={class:"account-preview-details__props-title"},Ea={class:"account-preview-details__props"},La={class:"account-preview-details__prop"},Ua=o("span",{class:"account-preview-details__prop-title"}," Зарегистрирован ",-1),Fa={class:"account-preview-details__prop"},qa=o("span",{class:"account-preview-details__prop-title"}," Последний визит ",-1),Na={class:"account-preview-details__section"},ja={class:"account-preview-details__props-title"},Ha={key:0,class:"account-preview-details__props"},Ga={class:"account-preview-details__prop"},za=o("span",{class:"account-preview-details__prop-title"}," Командир ",-1),Ka={class:"account-preview-details__prop"},Wa=o("span",{class:"account-preview-details__prop-title"}," Участников ",-1),Xa={class:"account-preview-details__prop"},Ja=o("span",{class:"account-preview-details__prop-title"}," Создан ",-1),Qa={class:"account-preview-details__prop"},Ya=o("span",{class:"account-preview-details__prop-title"}," Роль ",-1),Za={class:"account-preview-details__prop"},en=o("span",{class:"account-preview-details__prop-title"}," Вступил ",-1),tn={key:1,class:"account-preview-details__props"},an=o("div",{class:"account-preview-details__prop"}," Не состоит в клане ",-1),nn=[an],sn={key:1,class:"account-preview-details__section"},on={class:"account-preview-details__props-title"},cn={class:"account-preview-details__props"},ln={class:"account-preview-details__prop"},rn=o("span",{class:"account-preview-details__prop-title"}," Данные собираются со дня регистрации на сайте. ",-1),un={key:0,class:"account-preview-details__clan-history"},dn={class:"account-preview-details__clan-history-date"},_n={key:1,class:"account-preview-details__clan-history-link"},mn={style:{display:"flex","justify-content":"space-between"}},fn=o("span",null,null,-1),vn=F({__name:"AccountPreviewDetails",props:{account:{type:[Object,null],required:!0},clanAccount:{type:[Object,null],required:!0}},setup(t,{expose:i}){const c=(s,a)=>{var x,V;if(!(s!=null&&s.raw)&&s.timestamp)return B.date.toDate(s.timestamp);const n=a?a.raw?a.raw.joined_at*1e3:a.timestamp:Date.now(),A=s.raw?((x=s.raw)==null?void 0:x.joined_at)*1e3:s.timestamp,C=B.date.toDate(s.raw?((V=s.raw)==null?void 0:V.joined_at)*1e3:s==null?void 0:s.timestamp),D=B.date.toDaysPassed(n,A,!0);return`${C} (${D})`},v=t,d=z(null),l=K({user:null,clan:null,clanHistory:[],loading:0,isOpened:!1});async function T(s){l.loading++;try{const{data:a}=await se.clan.getInfo({clan_id:s});l.clan=a?a[s]:null}catch(a){G(a,{title:"Получение данных клана"})}l.loading--}async function g(s){l.loading++;try{const{data:a}=await fe.user.get(s);l.user=a}catch(a){G(a,{title:"Получение данных пользователя"})}finally{l.loading--}}async function e(s){l.loading++;try{const{data:a}=await se.clan.getInfo({clan_id:s.join(","),fields:"clan_id,name,tag"});return a??null}catch(a){return G(a,{title:"Получение данных кланов"}),null}finally{l.loading--}}function m(s,a){l.clanHistory=s.map((n,A)=>{const{raw:C,timestamp:D}=n,x=C&&a?a[C.clan_id]:null;return{key:D,date:c(n,s[A-1]),info:x&&C?`[${x.tag}] ${B.clan.role(C.role)}`:"Не в клане",clanId:(C==null?void 0:C.clan_id)??null}})}async function h(s){l.loading++;try{const{data:a}=await fe.stat.clansAccounts.getList({id:s});return a??[]}catch(a){return G(a,{title:"Получение данных пользователя"}),[]}finally{l.loading--}}async function k(){var a;if(l.isOpened||!v.account||(l.isOpened=!0,(a=v.clanAccount)!=null&&a.clan_id&&await T(v.clanAccount.clan_id),await g(v.account.account_id),!l.user))return;const s=await h(v.account.account_id);if(s.length){const n=s.filter(({raw:C})=>C==null?void 0:C.clan_id).map(({raw:C})=>C==null?void 0:C.clan_id),A=await e(n);m(s,A)}}function f(){var s;(s=d.value)==null||s.doClose()}async function u(){var s;await k(),await((s=d.value)==null?void 0:s.doOpen())}return i({close:f,open:u}),(s,a)=>{const n=he,A=Ze,C=ce,D=te,x=ue;return t.account?(_(),O(x,{key:0,ref_key:"detailedDialogRef",ref:d,class:"account-preview-details",title:"Дополнительная информация",width:"600px"},{footer:$(()=>[o("div",mn,[fn,p(D,{onClick:f},{default:$(()=>[S(" Закрыть ")]),_:1})])]),default:$(()=>{var V,M,R,ae;return[o("div",Sa,[o("div",Pa,[o("h5",Ia,[p(n,{class:"account-preview-details__prop-title-icon",name:"sports-esports"}),S(" Аккаунт игрока ")]),o("div",Da,[o("div",Ba,[xa,S(" "+w(s.$formatter.date.toDate(t.account.created_at*1e3)),1)]),o("div",Ra,[Oa,S(" "+w(s.$formatter.date.toDate(t.account.updated_at*1e3)),1)])])]),r(l).user?(_(),b("div",Ma,[o("h5",Va,[p(n,{class:"account-preview-details__prop-title-icon",name:"person"}),S(" Пользователь ресурса ")]),o("div",Ea,[o("div",La,[Ua,S(" "+w(s.$formatter.date.toDate((V=r(l).user)==null?void 0:V.createAt)),1)]),o("div",Fa,[qa,S(" "+w(s.$formatter.date.toDate((M=r(l).user)==null?void 0:M.visitedAt)),1)])])])):I("",!0),o("div",Na,[o("h5",ja,[p(n,{class:"account-preview-details__prop-title-icon",name:"groups"}),S(" Клан игрока ")]),r(l).clan&&t.clanAccount?(_(),b("div",Ha,[o("div",Ga,[za,r(l).clan.leader_id?(_(),O(A,{key:0,class:"account-preview-details__clan-history-link link",to:{name:"account-id",params:{id:r(l).clan.leader_id}}},{default:$(()=>{var N;return[S(w((N=r(l).clan)==null?void 0:N.leader_name),1)]}),_:1},8,["to"])):I("",!0)]),o("div",Ka,[Wa,S(" "+w(s.$formatter.number.toInteger((R=r(l).clan)==null?void 0:R.members_count)),1)]),o("div",Xa,[Ja,S(" "+w(s.$formatter.date.toDate(((ae=r(l).clan)==null?void 0:ae.created_at)*1e3)),1)]),o("div",Qa,[Ya,S(" "+w(s.$formatter.clan.role(t.clanAccount.role)),1)]),o("div",Za,[en,S(" "+w(s.$formatter.date.toDate(t.clanAccount.joined_at*1e3)),1)])])):(_(),b("div",tn,nn))]),r(l).user?(_(),b("div",sn,[o("h5",on,[p(n,{class:"account-preview-details__prop-title-icon",name:"history"}),S(" Клановая история ")]),o("div",cn,[o("div",ln,[rn,r(l).clanHistory.length?(_(),b("div",un,[(_(!0),b(H,null,Q(r(l).clanHistory,N=>(_(),b("div",{key:N.key,class:"account-preview-details__clan-history-item"},[o("span",dn,w(N.date),1),N.clanId?(_(),O(A,{key:0,class:"account-preview-details__clan-history-link link",to:{name:"clan-id",params:{id:N.clanId}}},{default:$(()=>[S(w(N.info),1)]),_:2},1032,["to"])):(_(),b("span",_n,w(N.info),1))]))),128))])):(_(),b(H,{key:1},[S(" Данные собираются. ")],64))])])])):I("",!0)]),p(C,{"backdrop-light":"",loading:r(l).loading>0},null,8,["loading"])]}),_:1},512)):I("",!0)}}}),pn={class:"account-preview"},hn={key:0,class:"account-preview__inner"},kn={class:"account-preview__league"},gn={class:"account-preview__info"},yn={class:"account-preview__nickname"},bn={class:"account-preview__nickname-text"},wn={class:"account-preview__clan-text"},$n={class:"account-preview__props"},An={class:"account-preview__prop"},Cn=o("span",{class:"account-preview__prop-title"}," Последний бой ",-1),Tn={class:"account-preview__prop-value"},Sn={key:0,class:"account-preview__prop"},Pn=o("span",{class:"account-preview__prop-title"}," Должность ",-1),In={class:"account-preview__prop-value"},Dn={class:"account-preview__actions"},Bn=F({__name:"AccountPreview",props:{account:{type:[Object,null],default:null,required:!0},loading:{type:Boolean,default:!1}},setup(t){const i=z(null),c=t,v=Ot(),d=K({clanAccount:null,isFavorite:!0,clan:null,detailsLoading:!1}),l=U(()=>{var f;return(f=d.clanAccount)==null?void 0:f.clan});Be(()=>{var u,s;e(),((u=c.account)==null?void 0:u.account_id)&&T((s=c.account)==null?void 0:s.account_id)});async function T(f){try{const{data:u}=await se.clan.getAccountInfo({account_id:f,extra:"clan"});d.clanAccount=u?u[f]:null}catch(u){G(u,{title:"Получение данных клана"})}}async function g(){var f;d.detailsLoading=!0,await((f=i.value)==null?void 0:f.open()),d.detailsLoading=!1}async function e(){if(!c.account)return;const f=await Y.indexedDB.accountsFavorites.get(c.account.account_id);d.isFavorite=f?f==null?void 0:f.isFavorite:!1}async function m(){c.account&&(d.isFavorite=!d.isFavorite,await Y.indexedDB.accountsFavorites.set(c.account.account_id,{id:c.account.account_id,isFavorite:d.isFavorite}))}function h(){m()}async function k(){var u,s,a,n;await Lt(`${(u=c.account)==null?void 0:u.nickname}/${(s=c.account)==null?void 0:s.account_id}`)?v.add({type:"success",title:"Скопировано",message:`${(a=c.account)==null?void 0:a.nickname}/${(n=c.account)==null?void 0:n.account_id}`,duration:3e3}):v.add({type:"error",message:"При копировании что-то пошло не так",duration:3e3})}return(f,u)=>{var x;const s=Rt,a=Ze,n=he,A=te,C=ce,D=vn;return _(),b("div",pn,[t.account?(_(),b("div",hn,[o("div",kn,[p(s,{large:"",rating:t.account.statistics.rating},null,8,["rating"])]),o("div",gn,[o("div",yn,[o("span",bn,w(t.account.nickname),1)]),r(d).clanAccount&&r(l)?(_(),O(a,{key:0,class:"account-preview__clan link",title:"Перейти к клану",to:{name:"clan-id",params:{id:r(l).clan_id}}},{default:$(()=>[o("span",wn," ["+w(r(l).tag)+"] "+w(r(l).name),1)]),_:1},8,["to"])):I("",!0),o("div",$n,[o("div",An,[Cn,o("span",Tn,w(f.$formatter.date.toRelativeTime(t.account.last_battle_time*1e3)),1)]),r(d).clanAccount?(_(),b("div",Sn,[Pn,o("span",In,w(f.$formatter.clan.role((x=r(d).clanAccount)==null?void 0:x.role)),1)])):I("",!0)])]),o("div",Dn,[p(A,{"is-text":"",class:"account-preview__actions-btn",title:"Копировать (nickname/ID)",onClick:k},{default:$(()=>[p(n,{name:"content-copy"})]),_:1}),p(A,{"is-text":"",class:"account-preview__actions-btn",title:"Добавить в избранные",onClick:h},{default:$(()=>[r(d).isFavorite?(_(),O(n,{key:0,name:"star"})):(_(),O(n,{key:1,name:"star-border"}))]),_:1}),p(A,{"is-text":"",disabled:r(d).detailsLoading,class:"account-preview__actions-btn",title:"Дополнительная информация",onClick:g},{default:$(()=>[p(n,{name:"info"})]),_:1},8,["disabled"])])])):I("",!0),p(C,{loading:t.loading},null,8,["loading"]),p(D,{ref_key:"accountPreviewDetailsRef",ref:i,account:t.account,"clan-account":r(d).clanAccount},null,8,["account","clan-account"])])}}}),xn=window.setInterval,Rn={class:"session-panel"},On={class:"session-panel__inner"},Mn={class:"session-panel__item"},Vn={class:"session-panel__buttons"},En={key:0,class:"session-panel__item session-panel__item--time"},Ln={class:"session-panel__time"},Un=o("span",{class:"session-panel__time-title"}," Время начала ",-1),Fn=o("div",{style:{margin:"0 0 1em"}}," Вы уверены, что хотите сбросить сессию? ",-1),qn={style:{"text-align":"right"}},Ee=60,Nn=F({__name:"SessionPanel",props:{updateAt:{type:Number,required:!0,default:0},sessionActive:{type:Boolean,required:!0,default:!1},hideAutoUpdate:{type:[Boolean],default:!1},loading:{type:Boolean,required:!0,default:!1}},emits:["reset","update","session-active"],setup(t,{emit:i}){const c=t,v=Ft(),d=z(null),l=K({autoUpdateChecked:!1,autoUpdateInterval:Ee,autoUpdateCounter:Ee,autoUpdateTimer:0});Pt(()=>{clearInterval(l.autoUpdateTimer)});const T=i;function g(){var k;(k=d.value)==null||k.doOpen()}function e(k){var f;k&&T("reset"),(f=d.value)==null||f.doClose()}function m(){T("session-active",!c.sessionActive)}function h(){if(l.autoUpdateChecked=!l.autoUpdateChecked,l.autoUpdateCounter=l.autoUpdateInterval,!l.autoUpdateChecked){clearInterval(l.autoUpdateTimer);return}const k=()=>{if(clearInterval(l.autoUpdateTimer),l.autoUpdateTimer=xn(k,1e3),l.autoUpdateCounter>0){l.autoUpdateCounter--;return}l.autoUpdateCounter=l.autoUpdateInterval,T("update")};T("update"),k()}return(k,f)=>{const u=le,s=he,a=te,n=ce,A=ue;return _(),b("div",Rn,[o("div",On,[o("div",Mn,[o("div",Vn,[p(u,{"model-value":t.sessionActive,class:"session-panel__btn",title:"Просмотр статистики за сессию",onChange:m},{default:$(()=>[S(" Сессия ")]),_:1},8,["model-value"]),t.hideAutoUpdate===!1?(_(),O(a,{key:0,class:"session-panel__btn",title:"Автоматическое обновление данных",onClick:h},{before:$(()=>[p(s,{name:"refresh-auto"})]),default:$(()=>[r(v).isTablet?I("",!0):(_(),b(H,{key:0},[S(" Обновление ")],64)),S(" "+w(r(l).autoUpdateCounter)+" сек. ",1)]),_:1})):I("",!0),p(a,{class:"session-panel__btn",title:"Сброс данных сессии",onClick:g},{default:$(()=>[p(s,{name:"close"})]),_:1})])]),t.updateAt?(_(),b("div",En,[o("span",Ln,[Un,S(" "+w(k.$formatter.date.toDateTime(t.updateAt)),1)])])):I("",!0)]),p(n,{loading:t.loading},null,8,["loading"]),p(A,{ref_key:"confirmDialogRef",ref:d,title:"Сброс сессии"},{default:$(()=>[Fn,o("div",qn,[p(a,{align:"center",width:"80px",onClick:f[0]||(f[0]=C=>e(!0))},{default:$(()=>[S(" Да ")]),_:1}),p(a,{align:"center",width:"80px",onClick:f[1]||(f[1]=C=>e(!1))},{default:$(()=>[S(" Нет ")]),_:1})])]),_:1},512)])}}}),jn=["onClick"],Hn={class:"achievements-list__item-inner"},Gn={class:"achievements-list__item-img-wrapper"},zn={key:0,class:"achievements-list__item-count"},Kn={key:0,class:"achievements-list__item-series"},Wn={key:1,class:"achievements-list__item-details"},Xn=F({__name:"AchievementsList",props:{achievements:{type:Array,default:()=>[]},hideName:{type:[Boolean,String],default:!1}},emits:["medal-click"],setup(t,{emit:i}){const c=i;function v(d){c("medal-click",d)}return(d,l)=>{const T=xe;return _(),b("div",{class:J(["achievements-list",[t.hideName?"achievements-list--small":""]])},[t.achievements.length?(_(),O(Xe,{key:0,tag:"ul",class:"achievements-list__list",name:"achievements-list__item-"},{default:$(()=>[(_(!0),b(H,null,Q(t.achievements,g=>(_(),b("li",{key:g.key,class:J(["achievements-list__item",[!g.count&&!g.series?"achievements-list__item--no-count":""]])},[o("button",{class:"achievements-list__item-btn",onClick:e=>v(g)},[o("span",Hn,[o("span",Gn,[p(T,{class:"achievements-list__item-img",src:g.image,alt:g.key,"data-name":g.name},null,8,["src","alt","data-name"])]),g.count||g.series?(_(),b("span",zn,[S(w(g.count)+" ",1),g.series?(_(),b("span",Kn," / "+w(g.series),1)):I("",!0)])):I("",!0),t.hideName?I("",!0):(_(),b("span",Wn,w(g.name),1))])],8,jn)],2))),128))]),_:1})):I("",!0)],2)}}}),Jn={key:0,class:"achievements-block__details"},Qn={class:"achievements-block__details-header"},Yn={class:"achievements-block__details-name"},Zn={class:"achievements-block__details-body"},es=["textContent"],ts=["textContent"],as={class:"achievements-block__details-footer"},ns=F({__name:"AchievementsDetails",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t,{expose:i}){const c=pe(t,"modelValue"),v=z(null),d=z(!1);function l(){d.value=!1}function T(){var g;(g=v.value)==null||g.doOpen()}return i({open:T}),(g,e)=>{const m=xe,h=te,k=ue;return _(),O(k,{ref_key:"detailsRef",ref:v,width:"640px",onOpen:l},{footer:$(()=>[o("div",as,[p(h,{onClick:e[0]||(e[0]=f=>{var u;return(u=r(v))==null?void 0:u.doClose()})},{default:$(()=>[S(" Закрыть ")]),_:1})])]),default:$(()=>{var f;return[c.value?(_(),b("div",Jn,[o("div",Qn,[p(m,{class:"achievements-block__details-img",src:c.value.image,alt:c.value.key},null,8,["src","alt"]),o("span",Yn,w((f=c.value)==null?void 0:f.name),1),o("div",Zn,[c.value.description?(_(),b("div",{key:0,textContent:w(c.value.description)},null,8,es)):I("",!0),c.value.condition?(_(),b("div",{key:1,textContent:w(c.value.condition)},null,8,ts)):I("",!0)])])])):I("",!0)]}),_:1},512)}}}),ss={key:0,class:"achievements-block__inner"},os={class:"achievements-block__filter"},is={class:"achievements-block__filter-item"},cs={class:"achievements-block__filter-item"},ls={class:"achievements-block__filter-item"},rs={class:"achievements-block__section-title"},us={key:1,class:"achievements-block__empty"},ds={key:1,class:"achievements-block__empty"},nt=F({__name:"AchievementsBlock",props:{achievements:{type:Object,required:!0,default:()=>({})},achievementsInfo:{type:Object,required:!0,default:()=>({})},filters:{type:Object,required:!0,default:()=>tt.makeAccountFilters()}},emits:["filters-changed"],setup(t,{emit:i}){const c=["markOfMastery","markOfMasteryI","markOfMasteryII","markOfMasteryIII","heroesOfRassenay","medalLafayettePool","medalRadleyWalters","warrior","medalKolobanov","mainGun","sniper","camper","medalBrothersInArms","medalCrucialContribution"],v=["battle","epic","title","commemorative","step","platoon"],d=t,l=z(),T=z(),g=K({currentMedal:null,showAll:!1}),e=U(()=>{const s=Object.keys(d.achievements.achievements),a=Object.keys(d.achievements.achievements);return s.length||a.length}),m=U(()=>{if(d.filters.achievementsShow==="important"){const a=[];return Object.keys(d.achievements.achievements).forEach(n=>{const A=oe.achievementsMedal({key:n,achievements:d.achievements,encyclopedia:d.achievementsInfo});a.push(A)}),c.reduce((n,A)=>{const C=a.find(D=>D.key===A);return C?[...n,C]:n},[])}const s=Object.keys(d.achievementsInfo);return d.filters.achievementsShow==="deserved"?s.map(a=>oe.achievementsMedal({key:a,achievements:d.achievements,encyclopedia:d.achievementsInfo})).filter(a=>d.achievements.achievements[a.key]||d.achievements.max_series[a.key]).sort((a,n)=>a.key.localeCompare(n.key)):s.map(a=>oe.achievementsMedal({key:a,achievements:d.achievements,encyclopedia:d.achievementsInfo})).toSorted((a,n)=>a.key.localeCompare(n.key))}),h=U(()=>{const s={};return m.value.forEach(a=>{s[a.section]||(s[a.section]={name:a.section,items:[]}),s[a.section].items.push(a)}),Object.values(s).sort((a,n)=>v.indexOf(a.name)-v.indexOf(n.name))}),k=i;function f({key:s}){var a;g.currentMedal=m.value.find(n=>n.key===s)??null,(a=T.value)==null||a.open()}function u(s){k("filters-changed",{...d.filters,achievementsShow:s})}return(s,a)=>{const n=le,A=Xn,C=ns;return _(),b("div",{ref_key:"mainRef",ref:l,class:"achievements-block"},[r(e)?(_(),b("div",ss,[o("div",os,[o("div",is,[p(n,{"model-value":t.filters.achievementsShow==="important",onChange:a[0]||(a[0]=D=>u("important"))},{default:$(()=>[S(" Значимые ")]),_:1},8,["model-value"])]),o("div",cs,[p(n,{"model-value":t.filters.achievementsShow==="deserved",onChange:a[1]||(a[1]=D=>u("deserved"))},{default:$(()=>[S(" Заслуженные ")]),_:1},8,["model-value"])]),o("div",ls,[p(n,{"model-value":t.filters.achievementsShow===null,onChange:a[2]||(a[2]=D=>u(null))},{default:$(()=>[S(" Все ")]),_:1},8,["model-value"])])]),r(m).length?(_(),b(H,{key:0},[t.filters.achievementsShow==="important"?(_(),O(A,{key:0,achievements:r(m),"hide-name":!0,onMedalClick:f},null,8,["achievements"])):(_(!0),b(H,{key:1},Q(r(h),D=>(_(),b("div",{key:D.name,class:"achievements-block__section"},[o("div",rs,w(s.$formatter.achievements.section(D.name)),1),p(A,{achievements:D.items,"hide-count":r(g).showAll,onMedalClick:f},null,8,["achievements","hide-count"])]))),128))],64)):(_(),b("div",us," Нет значимых достижений ")),p(C,{ref_key:"detailsRef",ref:T,modelValue:r(g).currentMedal,"onUpdate:modelValue":a[3]||(a[3]=D=>r(g).currentMedal=D)},null,8,["modelValue"])])):(_(),b("div",ds," Нет достижений "))],512)}}}),ke=F({__name:"TankType",props:Je({size:{type:Number,default:24},isPremium:{type:Boolean,default:!1},isCollectible:{type:[Boolean,String],default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const i={lightTank:Z(()=>ee(()=>import("./light-tank.D7fz_d-E.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),mediumTank:Z(()=>ee(()=>import("./medium-tank.D-9DTT5W.js"),__vite__mapDeps([5,1,2,3,4]),import.meta.url)),heavyTank:Z(()=>ee(()=>import("./heavy-tank.D_kmnpCa.js"),__vite__mapDeps([6,1,2,3,4]),import.meta.url)),"AT-SPG":Z(()=>ee(()=>import("./at-spg.BrDVEQyy.js"),__vite__mapDeps([7,1,2,3,4]),import.meta.url))},c=pe(t,"modelValue"),v=U(()=>["AT-SPG","heavyTank","lightTank","mediumTank"].includes(c.value)?c.value:(console.warn("Not valid tank type - ",c.value),"span"));return(d,l)=>(_(),O(Qe(i[r(v)]),{filled:!0,"font-controlled":!1,class:J(["tank-type",[t.isPremium?"tank-type--is-premium":"",t.isCollectible?"tank-type--is-collectible":""]]),width:t.size,height:t.size},null,8,["class","width","height"]))}}),_s=["src","alt"],st=F({__name:"TankNation",props:Je({size:{type:[Number,String],default:24}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const i=pe(t,"modelValue");return(c,v)=>(_(),b("img",{style:Ye({width:`${t.size}px`,height:`${t.size}px`}),src:`/img/nations/nation-${i.value}.svg`,alt:i.value,class:"tank-nation"},null,12,_s))}}),ms={class:"account-infographics"},fs={class:"account-infographics__filters"},vs={class:"account-infographics__filters-chips"},ps={class:"account-infographics__chart-list"},hs={class:"account-infographics__chart-label"},ks={class:"account-infographics__line-icon"},gs={key:2},ys={key:"battles",class:"account-infographics__line-value"},bs={key:"damagePerBattle",class:"account-infographics__line-value"},ws=F({__name:"AccountInfographics",props:{tanks:{type:Array,default:()=>[],required:!0}},setup(t){const i=t,c=z("battles"),v=[{value:"battles",label:B.stat.accountProp("battles")},{value:"winRate",label:B.stat.accountProp("winRate")},{value:"damagePerBattle",label:B.stat.accountProp("damagePerBattle")}],d=U(()=>[{label:"По нации",key:"nation",value:l("nation")},{label:"По уровню",key:"tier",value:l("tier")},{label:"По типу",key:"type",value:l("type")}]);function l(g){var m;const e={};if(!((m=i.tanks)!=null&&m.length))return e;i.tanks.forEach(h=>{const k=h[g];h.tier&&(k in e||(e[k]={key:k,battles:0,winRate:0,damagePerBattle:0,lineHeight:0}),e[k].battles+=h.all.battles,e[k].winRate+=h.all.wins,e[k].damagePerBattle+=h.all.damage_dealt)});for(const h in e){const k=e[h].battles;e[h].winRate=k?e[h].winRate/(k/100):0,e[h].damagePerBattle=k?e[h].damagePerBattle/k:0}for(const h in e){const f=Math.min(...Object.values(e).map(s=>s[c.value])),u=Math.max(...Object.values(e).map(s=>s[c.value]))-f/1.1;e[h].lineHeight=(e[h][c.value]-f/1.1)/(u/100)}return e}function T(g){c.value=g}return(g,e)=>{const m=le,h=ke,k=st,f=Re;return _(),b("div",ms,[o("div",fs,[o("div",vs,[(_(),b(H,null,Q(v,u=>p(m,{key:u.value,"model-value":u.value===r(c),onChange:s=>T(u.value)},{default:$(()=>[S(w(u.label),1)]),_:2},1032,["model-value","onChange"])),64))])]),o("div",ps,[(_(!0),b(H,null,Q(r(d),u=>(_(),b("div",{key:u.key,class:J(["account-infographics__chart",[`account-infographics__chart--${u.key}`]])},[o("span",hs,w(u.label),1),(_(!0),b(H,null,Q(u.value,s=>(_(),b("div",{key:s.key,class:"account-infographics__line"},[o("span",ks,[u.key==="type"?(_(),O(h,{key:0,modelValue:s.key,"onUpdate:modelValue":a=>s.key=a},null,8,["modelValue","onUpdate:modelValue"])):u.key==="nation"?(_(),O(k,{key:1,modelValue:s.key,"onUpdate:modelValue":a=>s.key=a,size:"22"},null,8,["modelValue","onUpdate:modelValue"])):u.key==="tier"?(_(),b("span",gs,w(g.$formatter.encyclopedia.tier(s.key)),1)):(_(),b(H,{key:3},[S(w(s.key),1)],64))]),p(Xe,{tag:"span",name:"account-infographics__line-value-",class:"account-infographics__line-progress",style:Ye({"--chart-line-width":s.lineHeight/100})},{default:$(()=>[r(c)==="battles"?(_(),b("span",ys,w(g.$formatter.number.toInteger(s.battles)),1)):I("",!0),r(c)==="winRate"?(_(),O(f,{key:"winRate",modelValue:s.winRate,"onUpdate:modelValue":a=>s.winRate=a,class:"account-infographics__line-value"},null,8,["modelValue","onUpdate:modelValue"])):I("",!0),r(c)==="damagePerBattle"?(_(),b("span",bs,w(g.$formatter.number.toInteger(s.damagePerBattle)),1)):I("",!0)]),_:2},1032,["style"])]))),128))],2))),128))])])}}}),$s=F({__name:"MarkOfMastery",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t){const i={1:Z(()=>ee(()=>import("./3.CdFWqcK7.js"),__vite__mapDeps([8,1,2,3,4]),import.meta.url)),2:Z(()=>ee(()=>import("./2.CDaq4BGj.js"),__vite__mapDeps([9,1,2,3,4]),import.meta.url)),3:Z(()=>ee(()=>import("./1.BhEJkr5q.js"),__vite__mapDeps([10,1,2,3,4]),import.meta.url)),4:Z(()=>ee(()=>import("./М.Cqn9Rbpk.js"),__vite__mapDeps([11,1,2,3,4]),import.meta.url))},c=pe(t,"modelValue");return(v,d)=>(_(),O(Qe(c.value?i[c.value]:"span"),{filled:!0,"font-controlled":!1,class:J(["mark-of-mastery",[c.value?"mark-of-mastery--"+c.value:""]])},null,8,["class"]))}}),As={class:"account-tanks-table"},Cs={key:0,class:"account-tanks-table__total"},Ts={class:"account-tanks-table__total-value"},Ss={class:"account-tanks-table__table"},Ps=["title"],Is={class:"account-tanks-table__name-text"},Ds={key:0,class:"account-tanks-table__diff"},Bs={key:0,class:"account-tanks-table__diff"},xs={key:0,class:"account-tanks-table__diff"},Rs={key:0,class:"account-tanks-table__diff"},Os={key:0,class:"account-tanks-table__diff"},Ms={key:0,class:"account-tanks-table__diff"},Vs={key:0,class:"account-tanks-table__diff"},Es={key:0,class:"account-tanks-table__diff"},Ls={class:"account-tanks-table__diff"},ot=F({__name:"AccountTanksTable",props:{tanks:{type:Array,default:()=>[],required:!0},tanksSessions:{type:Array,default:null,required:!1},showDiff:{type:[Boolean,String],default:!1},noCount:{type:[Boolean,String],default:!1},height:{type:String,default:void 0},maxHeight:{type:String,default:void 0},sort:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["sort","item-click"],setup(t,{emit:i}){const c=t,v=[{key:"type",label:"Тип",width:60,sortable:!0},{key:"name",label:"Название",sortable:!0},{key:"tier",label:"I-X",sortable:!0},{key:"battles",label:"Бои",sortable:!0,sortMethod(e,m){const h=e,k=m;return h.all.battles-k.all.battles},formatter:e=>B.number.toInteger(e)},{key:"winRate",label:"Победы",sortable:!0,sortMethod(e,m){const h=e,k=m;return h.all.winRate-k.all.winRate},formatter:e=>B.number.toFloatPercent(e)},{key:"damagePerBattle",label:"Урон",sortable:!0,sortMethod(e,m){const h=e,k=m;return h.all.damagePerBattle-k.all.damagePerBattle},formatter:e=>B.number.toInteger(e)},{key:"xpPerBattle",label:"Опыт",sortable:!0,sortMethod(e,m){const h=e,k=m;return h.all.xpPerBattle-k.all.xpPerBattle},formatter:e=>B.number.toInteger(e)},{key:"fragPerBattle",label:"Уничт.",tooltip:"Уничтожено За Бой",sortable:!0,sortMethod(e,m){const h=e,k=m;return h.all.fragPerBattle-k.all.fragPerBattle},formatter:e=>B.number.toFloatNumber(e)},{key:"hitRate",label:"Точн.",tooltip:"Точность стрельбы",sortable:!0,sortMethod(e,m){const h=e,k=m;return h.all.hitRate-k.all.hitRate},formatter:e=>B.number.toFloatPercent(e)},{key:"surviveRate",label:"Выж.",tooltip:"Выживаемость",sortable:!0,sortMethod(e,m){const h=e,k=m;return h.all.surviveRate-k.all.surviveRate},formatter:e=>B.number.toFloatPercent(e)},{key:"spottedPerBattle",label:"Обн.",tooltip:"Обнаружено за бой",sortable:!0,sortMethod(e,m){const h=e,k=m;return h.all.spottedPerBattle-k.all.spottedPerBattle},formatter:e=>B.number.toFloatNumber(e)},{key:"mark_of_mastery",label:"M",tooltip:"Знак классности",sortable:!0,formatter:e=>B.stat.markOfMastery(Number(e))||"---"},{key:"last_battle_time",label:"Последний бой",sortable:!0}],d=U(()=>{let e={};return c.tanks.forEach((m,h)=>{h?e=E.sum(e,m.all):e=m.all}),E.tank(e)}),l=i;function T(e){l("item-click",e)}function g(e,m){var a,n,A;const h=e,k=((a=c.tanksSessions)==null?void 0:a.find(C=>C.tank_id===h.tank_id))??null,f=k?E.diff(h.all,E.tank(k.all)):null,u=(f==null?void 0:f[m])||0,s=(A=(n=v.find(C=>C.key===m))==null?void 0:n.formatter)==null?void 0:A.call(n,u);return u>0?"+"+s:s}return(e,m)=>{const h=ke,k=te,f=Re,u=$s,s=at,a=ce;return _(),b("div",As,[t.noCount===!1?(_(),b("div",Cs,[S(" Кол-во: "),o("span",Ts,w(t.tanks.length||0),1)])):I("",!0),o("div",Ss,[p(s,{headers:v,data:t.tanks,summary:r(d),"default-sort":t.sort,"scroll-auto-disabling":"","no-wrap":"","row-key":"tank_id",height:t.height,"max-height":t.maxHeight,onSort:m[0]||(m[0]=n=>l("sort",n))},{index:$(({index:n})=>[S(w(n+1),1)]),type:$(({row:n})=>[o("div",{class:"account-tanks-table__type",title:n.is_premium?"Премиум танк":""},[p(h,{modelValue:n.type,"onUpdate:modelValue":A=>n.type=A,"is-premium":n.is_premium,"is-collectible":n.is_collectible},null,8,["modelValue","onUpdate:modelValue","is-premium","is-collectible"])],8,Ps)]),name:$(({row:n})=>[p(k,{class:"account-tanks-table__name","is-text":"",onClick:A=>T(n)},{default:$(()=>[o("span",Is,w(n.name??`Tank ID: ${n.tank_id}`),1)]),_:2},1032,["onClick"])]),battles:$(({row:n})=>[S(w(n.all.battles)+" ",1),t.showDiff!==!1?(_(),b("div",Ds,w(g(n,"battles")),1)):I("",!0)]),winRate:$(({row:n})=>[p(f,{"model-value":n.all.winRate,class:"account-tanks-table__win-rate"},null,8,["model-value"]),t.showDiff!==!1?(_(),b("div",Bs,w(g(n,"winRate")),1)):I("",!0)]),damagePerBattle:$(({row:n})=>[S(w(n.all.damagePerBattle)+" ",1),t.showDiff!==!1?(_(),b("div",xs,w(g(n,"damagePerBattle")),1)):I("",!0)]),xpPerBattle:$(({row:n})=>[S(w(n.all.xpPerBattle)+" ",1),t.showDiff!==!1?(_(),b("div",Rs,w(g(n,"xpPerBattle")),1)):I("",!0)]),fragPerBattle:$(({row:n})=>[S(w(n.all.fragPerBattle)+" ",1),t.showDiff!==!1?(_(),b("div",Os,w(g(n,"fragPerBattle")),1)):I("",!0)]),hitRate:$(({row:n})=>[S(w(e.$formatter.number.toFloatPercent(n.all.hitRate))+" ",1),t.showDiff!==!1?(_(),b("div",Ms,w(g(n,"hitRate")),1)):I("",!0)]),surviveRate:$(({row:n})=>[S(w(e.$formatter.number.toFloatPercent(n.all.surviveRate))+" ",1),t.showDiff!==!1?(_(),b("div",Vs,w(g(n,"surviveRate")),1)):I("",!0)]),spottedPerBattle:$(({row:n})=>[S(w(n.all.spottedPerBattle)+" ",1),t.showDiff!==!1?(_(),b("div",Es,w(g(n,"spottedPerBattle")),1)):I("",!0)]),mark_of_mastery:$(({row:n})=>[p(u,{"model-value":n.mark_of_mastery,title:"Знак классности",width:"20",height:"20"},null,8,["model-value"])]),last_battle_time:$(({row:n})=>[S(w(e.$formatter.date.toRelativeTime(n.last_battle_time*1e3))+" ",1),o("div",Ls,w(e.$formatter.date.toDateTime(n.last_battle_time*1e3)),1)]),_:1},8,["data","summary","default-sort","height","max-height"]),p(a,{loading:t.loading},null,8,["loading"])])])}}}),Us={class:"account-daily-stat"},Fs={class:"account-daily-stat__count"},qs=o("span",{class:"account-daily-stat__count-title"}," Кол-во: ",-1),Ns={class:"account-daily-stat__table"},js={style:{display:"flex","justify-content":"flex-end"}},Hs=F({__name:"AccountDailyStat",props:{accountId:{type:[Number,String],default:0,required:!0},vehicles:{type:Object,default:()=>({}),required:!0}},emits:["sort"],setup(t,{emit:i}){const c=t,v=z(null),d=K({loading:0,summary:{},items:[],currentItem:null,accounts:[],tanks:[]}),l=K({order:"desc",prop:"last_battle_time"}),T=[{key:"index",label:"#"},{key:"date",label:"Дата"},{key:"tanks",label:"Танков"},{key:"tier",label:"I-X",formatter:u=>X(u)?B.number.toFloatNumber(u):"---"},{key:"battles",label:"Бои",formatter:u=>X(u)?B.number.toInteger(u):"---"},{key:"winRate",label:"Победы",formatter:u=>X(u)?B.number.toFloatPercent(u):"---"},{key:"damagePerBattle",label:"Урон",formatter:u=>X(u)?B.number.toInteger(u):"---"},{key:"xpPerBattle",label:"Опыт",formatter:u=>X(u)?B.number.toInteger(u):"---"},{key:"fragPerBattle",label:"Уничт.",tooltip:"Уничтожено За Бой",formatter:u=>X(u)?B.number.toFloatNumber(u):"---"},{key:"hitRate",label:"Точн.",tooltip:"Точность стрельбы",formatter:u=>X(u)?B.number.toFloatPercent(u):"---"},{key:"surviveRate",label:"Выж.",tooltip:"Выживаемость",formatter:u=>X(u)?B.number.toFloatPercent(u):"---"},{key:"spottedPerBattle",label:"Обн.",tooltip:"Обнаружено за бой",formatter:u=>X(u)?B.number.toFloatNumber(u):"---"}],g=U(()=>d.currentItem?oe.accountTanks(d.currentItem.tanks,c.vehicles,[]):[]);Be(async()=>{c.accountId&&(await m(c.accountId),h())});const e=i;async function m(u){const s=new Date,a=new Date;s.setDate(s.getDate()-90);const n={id:u,dateStart:s.toISOString(),dateEnd:a.toISOString()};try{const[A,C]=await Promise.all([fe.stat.accounts.getDiff(n),fe.stat.tanks.getDiff(n)]);d.tanks=C.data,d.accounts=A.data}catch(A){G(A,{title:"Получение дневной статистики"})}}function h(){let u=null;d.accounts.forEach(s=>{var C;const a=E.accountAll(s.raw.statistics.all),n=(C=d.tanks.find(D=>{const x=B.date.toDate(D.timestamp),V=B.date.toDate(s.timestamp);return x===V}))==null?void 0:C.raw,A=()=>{const D=(n==null?void 0:n.length)??0;return((n==null?void 0:n.reduce((x,V)=>{var M;return x+((M=c.vehicles[V.tank_id])==null?void 0:M.tier)||0},0))??0)/D};d.items.push({id:s.id,date:B.date.toDate(s.timestamp),battles:a.battles,winRate:a.winRate,damagePerBattle:a.damagePerBattle,xpPerBattle:a.xpPerBattle,fragPerBattle:a.fragPerBattle,hitRate:a.hitRate,surviveRate:a.surviveRate,spottedPerBattle:a.spottedPerBattle,tanks:n||[],tier:A()}),u=u?E.sum(u,a):a}),d.summary=u?E.accountAll(u):{}}async function k(u){var s;d.currentItem=u,await It(),(s=v.value)==null||s.doOpen()}function f(){var u;d.currentItem=null,(u=v.value)==null||u.doClose()}return(u,s)=>{var V;const a=te,n=Re,A=at,C=ce,D=ot,x=ue;return _(),b("div",Us,[o("div",Fs,[qs,S(" "+w(r(d).items.length),1)]),o("div",Ns,[p(A,{headers:T,data:r(d).items,"default-sort":r(l),summary:r(d).summary,"scroll-auto-disabling":"","no-wrap":"","row-key":"timestamp","max-height":"375px",onSort:s[0]||(s[0]=M=>e("sort",M))},{index:$(({index:M})=>[S(w(M+1),1)]),date:$(({row:M})=>[p(a,{"is-text":"",onClick:R=>k(M)},{default:$(()=>[S(w(M.date),1)]),_:2},1032,["onClick"])]),tanks:$(({row:M})=>[S(w(M.tanks?u.$formatter.number.toInteger(M.tanks.length):"---"),1)]),winRate:$(({row:M})=>[p(n,{modelValue:M.winRate,"onUpdate:modelValue":R=>M.winRate=R,class:"account-daily-stat__win-rate"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["data","default-sort","summary"])]),p(C,{loading:r(d).loading>0},null,8,["loading"]),p(x,{ref_key:"tanksDetailsRef",ref:v,width:"1280px",title:"Статистика за "+((V=r(d).currentItem)==null?void 0:V.date),onClosed:s[1]||(s[1]=M=>r(d).currentItem=null)},{footer:$(()=>[o("div",js,[p(a,{onClick:f},{default:$(()=>[S(" Закрыть ")]),_:1})])]),default:$(()=>[r(d).currentItem?(_(),O(D,{key:0,tanks:r(g),"max-height":"calc(100vh - 200px)"},null,8,["tanks"])):I("",!0)]),_:1},8,["title"])])}}});var Gs="__lodash_hash_undefined__";function zs(t){return this.__data__.set(t,Gs),this}var Ks=zs;function Ws(t){return this.__data__.has(t)}var Xs=Ws,Js=jt,Qs=Ks,Ys=Xs;function ve(t){var i=-1,c=t==null?0:t.length;for(this.__data__=new Js;++i<c;)this.add(t[i])}ve.prototype.add=ve.prototype.push=Qs;ve.prototype.has=Ys;var Zs=ve;function eo(t,i){for(var c=-1,v=t==null?0:t.length;++c<v;)if(i(t[c],c,t))return!0;return!1}var to=eo;function ao(t,i){return t.has(i)}var no=ao,so=Zs,oo=to,io=no,co=1,lo=2;function ro(t,i,c,v,d,l){var T=c&co,g=t.length,e=i.length;if(g!=e&&!(T&&e>g))return!1;var m=l.get(t),h=l.get(i);if(m&&h)return m==i&&h==t;var k=-1,f=!0,u=c&lo?new so:void 0;for(l.set(t,i),l.set(i,t);++k<g;){var s=t[k],a=i[k];if(v)var n=T?v(a,s,k,i,t,l):v(s,a,k,t,i,l);if(n!==void 0){if(n)continue;f=!1;break}if(u){if(!oo(i,function(A,C){if(!io(u,C)&&(s===A||d(s,A,c,v,l)))return u.push(C)})){f=!1;break}}else if(!(s===a||d(s,a,c,v,l))){f=!1;break}}return l.delete(t),l.delete(i),f}var it=ro;function uo(t){var i=-1,c=Array(t.size);return t.forEach(function(v,d){c[++i]=[d,v]}),c}var _o=uo;function mo(t){var i=-1,c=Array(t.size);return t.forEach(function(v){c[++i]=v}),c}var fo=mo,Le=Mt,Ue=Ht,vo=Qt,po=it,ho=_o,ko=fo,go=1,yo=2,bo="[object Boolean]",wo="[object Date]",$o="[object Error]",Ao="[object Map]",Co="[object Number]",To="[object RegExp]",So="[object Set]",Po="[object String]",Io="[object Symbol]",Do="[object ArrayBuffer]",Bo="[object DataView]",Fe=Le?Le.prototype:void 0,Se=Fe?Fe.valueOf:void 0;function xo(t,i,c,v,d,l,T){switch(c){case Bo:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Do:return!(t.byteLength!=i.byteLength||!l(new Ue(t),new Ue(i)));case bo:case wo:case Co:return vo(+t,+i);case $o:return t.name==i.name&&t.message==i.message;case To:case Po:return t==i+"";case Ao:var g=ho;case So:var e=v&go;if(g||(g=ko),t.size!=i.size&&!e)return!1;var m=T.get(t);if(m)return m==i;v|=yo,T.set(t,i);var h=po(g(t),g(i),v,d,l,T);return T.delete(t),h;case Io:if(Se)return Se.call(t)==Se.call(i)}return!1}var Ro=xo,qe=Gt,Oo=1,Mo=Object.prototype,Vo=Mo.hasOwnProperty;function Eo(t,i,c,v,d,l){var T=c&Oo,g=qe(t),e=g.length,m=qe(i),h=m.length;if(e!=h&&!T)return!1;for(var k=e;k--;){var f=g[k];if(!(T?f in i:Vo.call(i,f)))return!1}var u=l.get(t),s=l.get(i);if(u&&s)return u==i&&s==t;var a=!0;l.set(t,i),l.set(i,t);for(var n=T;++k<e;){f=g[k];var A=t[f],C=i[f];if(v)var D=T?v(C,A,f,i,t,l):v(A,C,f,t,i,l);if(!(D===void 0?A===C||d(A,C,c,v,l):D)){a=!1;break}n||(n=f=="constructor")}if(a&&!n){var x=t.constructor,V=i.constructor;x!=V&&"constructor"in t&&"constructor"in i&&!(typeof x=="function"&&x instanceof x&&typeof V=="function"&&V instanceof V)&&(a=!1)}return l.delete(t),l.delete(i),a}var Lo=Eo,Pe=zt,Uo=it,Fo=Ro,qo=Lo,Ne=Kt,je=Jt,He=Wt,No=Xt,jo=1,Ge="[object Arguments]",ze="[object Array]",me="[object Object]",Ho=Object.prototype,Ke=Ho.hasOwnProperty;function Go(t,i,c,v,d,l){var T=je(t),g=je(i),e=T?ze:Ne(t),m=g?ze:Ne(i);e=e==Ge?me:e,m=m==Ge?me:m;var h=e==me,k=m==me,f=e==m;if(f&&He(t)){if(!He(i))return!1;T=!0,h=!1}if(f&&!h)return l||(l=new Pe),T||No(t)?Uo(t,i,c,v,d,l):Fo(t,i,e,c,v,d,l);if(!(c&jo)){var u=h&&Ke.call(t,"__wrapped__"),s=k&&Ke.call(i,"__wrapped__");if(u||s){var a=u?t.value():t,n=s?i.value():i;return l||(l=new Pe),d(a,n,c,v,l)}}return f?(l||(l=new Pe),qo(t,i,c,v,d,l)):!1}var zo=Go,Ko=zo,We=Vt;function ct(t,i,c,v,d){return t===i?!0:t==null||i==null||!We(t)&&!We(i)?t!==t&&i!==i:Ko(t,i,c,v,ct,d)}var Wo=ct,Xo=Wo;function Jo(t,i){return Xo(t,i)}var Qo=Jo;const Yo=Et(Qo),Zo={class:"account-tanks-filters"},ei={class:"account-tanks-filters__inner"},ti={class:"account-tanks-filters__list"},ai={style:{"font-weight":"500",width:"24px","text-align":"center"}},ni={key:0,class:"account-tanks-filters__item"},si={class:"account-tanks-filters__item"},oi={class:"account-tanks-filters__item"},ii=F({__name:"AccountTanksFilters",props:{defaultFilters:{type:Object,default:null,required:!0},filters:{type:Object,default:null,required:!0},isPrivate:{type:[Boolean,String],default:!1,required:!0}},emits:["change","clear"],setup(t,{emit:i}){const c=t,v=["ussr","germany","usa","uk","japan","china","france","european","other"],d=[1,2,3,4,5,6,7,8,9,10].map(a=>({value:a,label:B.encyclopedia.tier(a)})),l=["lightTank","mediumTank","heavyTank","AT-SPG"],T=[{value:null,label:"Премиум: показать"},{value:!0,label:"Премиум: только"},{value:!1,label:"Премиум: спрятать"}],g=[{value:null,label:"В ангаре: все"},{value:1,label:"В ангаре: есть"},{value:0,label:"В ангаре: нет"}],e=U(()=>!Yo(c.filters,c.defaultFilters)),m=i;function h(a){let n=c.filters.tankNation;n.includes(a)?n=n.filter(A=>A!==a):n.push(a),m("change",{...c.filters,tankNation:n})}function k(a){let n=c.filters.tankTire;n.includes(a)?n=n.filter(A=>A!==a):n.push(a),m("change",{...c.filters,tankTire:n})}function f(a){let n=c.filters.tankType;n.includes(a)?n=n.filter(A=>A!==a):n.push(a),m("change",{...c.filters,tankType:n})}function u(a){m("change",{...c.filters,tankInGarage:a})}function s(a){m("change",{...c.filters,tankIsPremium:a})}return(a,n)=>{const A=st,C=le,D=ke,x=Ut,V=he,M=te;return _(),b("div",Zo,[o("div",ei,[o("ul",ti,[o("li",{class:J(["account-tanks-filters__item",["account-tanks-filters__item--overflow"]])},[(_(),b(H,null,Q(v,R=>p(C,{key:R,"model-value":t.filters.tankNation.includes(R),class:"account-tanks-filters__btn",title:a.$formatter.encyclopedia.nation(R),onChange:ae=>h(R)},{default:$(()=>[p(A,{"model-value":R},null,8,["model-value"])]),_:2},1032,["model-value","title","onChange"])),64))]),o("li",{class:J(["account-tanks-filters__item",["account-tanks-filters__item--overflow"]])},[(_(),b(H,null,Q(l,R=>p(C,{key:R,"model-value":t.filters.tankType.includes(R),class:"account-tanks-filters__btn",title:"Тип",onChange:ae=>f(R)},{default:$(()=>[p(D,{"model-value":R},{default:$(()=>[S(" /> ")]),_:2},1032,["model-value"])]),_:2},1032,["model-value","onChange"])),64))]),o("li",{class:J(["account-tanks-filters__item",["account-tanks-filters__item--overflow"]])},[(_(!0),b(H,null,Q(r(d),R=>(_(),O(C,{key:R.value,"model-value":t.filters.tankTire.includes(R.value),class:"account-tanks-filters__btn",title:"Уровень "+R,onChange:ae=>k(R.value)},{default:$(()=>[o("span",ai,w(R.label),1)]),_:2},1032,["model-value","title","onChange"]))),128))]),t.isPrivate?(_(),b("li",ni,[p(x,{"model-value":t.filters.tankInGarage,options:g,onChange:u},null,8,["model-value"])])):I("",!0),o("li",si,[p(x,{"model-value":t.filters.tankIsPremium,options:T,onChange:s},null,8,["model-value"])]),o("li",oi,[p(M,{title:"Очистить фильтры",disabled:!r(e),onClick:n[0]||(n[0]=R=>m("clear"))},{default:$(()=>[p(V,{name:"clear"})]),_:1},8,["disabled"])])])])])}}}),ci={key:0,class:"account-tank"},li={class:"account-tank__header"},ri={class:"account-tank__img-wrapper"},ui={class:"account-tank__tier"},di={class:"account-tank__props"},_i={class:"account-tank__prop"},mi=o("span",{class:"account-tank__prop-name"}," Нация: ",-1),fi={class:"account-tank__prop"},vi=o("span",{class:"account-tank__prop-name"}," Последний бой: ",-1),pi=o("h4",null,"Статистика",-1),hi=o("h4",null,"Достижения",-1),ki=F({__name:"AccountTank",props:{tank:{type:Object,default:()=>({}),required:!0},tankSession:{type:Object,default:()=>({}),required:!0},achievementsInfo:{type:Object,default:()=>({}),required:!0}},setup(t){const i=t,c=K({showAllMetrics:!1,filters:Nt()}),v=U(()=>ne.tank({tank:i.tank,tankSession:i.tankSession,plates:c.showAllMetrics?null:["battles","winRate","damagePerBattle","surviveRate","fragPerBattle","winsInPlatoon"]}));function d(l){c.filters=l}return(l,T)=>{var f;const g=xe,e=ke,m=le,h=et,k=nt;return t.tank?(_(),b("div",ci,[o("div",li,[o("div",ri,[p(g,{class:"account-tank__img account-tank__img--nation",alt:"tank.nation",src:`/img/nations/nation-${t.tank.nation}.svg`},null,8,["src"]),p(g,{class:"account-tank__img account-tank__img--tank",alt:t.tank.name,src:(f=t.tank.images)==null?void 0:f.preview},null,8,["alt","src"]),p(e,{size:28,class:"account-tank__type","model-value":t.tank.type,"is-premium":t.tank.is_premium,"is-collectible":t.tank.is_collectible},null,8,["model-value","is-premium","is-collectible"]),o("div",ui,w(l.$formatter.encyclopedia.tier(t.tank.tier)),1)]),o("div",di,[o("div",_i,[mi,S(" "+w(l.$formatter.encyclopedia.nation(t.tank.nation)),1)]),o("div",fi,[vi,S(" "+w(l.$formatter.date.toDateTime(t.tank.last_battle_time*1e3)),1)])])]),pi,p(m,{modelValue:r(c).showAllMetrics,"onUpdate:modelValue":T[0]||(T[0]=u=>r(c).showAllMetrics=u),class:"account-tank__show-all-metrics"},{default:$(()=>[S(" Все показатели ")]),_:1},8,["modelValue"]),p(h,{items:r(v)},null,8,["items"]),hi,p(k,{achievements:t.tank.achievements,"achievements-info":t.achievementsInfo,filters:r(c).filters,onFiltersChanged:d},null,8,["achievements","achievements-info","filters"])])):I("",!0)}}}),gi={class:"accounts-metrics"},yi={class:"accounts-metrics__filters"},bi={class:"accounts-metrics__filters-item"},wi={class:"accounts-metrics__filters-item"},$i={class:"accounts-metrics__plates"},Ai=F({__name:"AccountsMetrics",props:{metrics:{type:Array,required:!0,default:()=>[]},filters:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filters","is-open"],setup(t,{emit:i}){const c=t,v=K({isOpen:!1}),d=i;Dt(()=>v.isOpen,()=>d("is-open",v.isOpen));function l(){const T=c.filters.battleMode==="random"?"rating":"random";d("filters",{...c.filters,battleMode:T})}return(T,g)=>{const e=le,m=et;return _(),b("div",gi,[o("div",yi,[o("div",bi,[p(e,{"model-value":t.filters.battleMode==="rating",onChange:l},{default:$(()=>[S(" Рейтинг ")]),_:1},8,["model-value"])]),o("div",wi,[p(e,{modelValue:r(v).isOpen,"onUpdate:modelValue":g[0]||(g[0]=h=>r(v).isOpen=h)},{default:$(()=>[S(" Все показатели ")]),_:1},8,["modelValue"])])]),o("div",$i,[p(m,{loading:t.loading,items:t.metrics},null,8,["loading","items"])])])}}}),Ci={key:0,class:"account-view"},Ti={class:"account-view__private"},Si={style:{display:"flex","justify-content":"flex-end"}},Pi={key:1,class:"account-view--no-data"},Ii={key:0,class:"content-area"},Di=o("p",null,"Нет данных.",-1),Bi=o("p",null,"Возможно аккаунт удалён.",-1),xi=[Di,Bi],tc=F({__name:"AccountView",setup(t){const i=["battles","winRate","damagePerBattle","winsInPlatoon","battlesPerDay","tanksWithMaster"],c=tt.makeAccountFilters({tankInGarage:1,tankIsPremium:null}),v=z(null),d=Bt(),l=Yt(),T=Zt(),g=K({order:"desc",prop:"last_battle_time"}),e=K({account:null,savedAccount:null,accountAchievements:null,savedAccountAchievements:null,tanksStats:null,tanksAchievements:null,savedTanksStats:null,filteredTanks:[],tanks:[],tanksDiff:[],currentTank:null,currentTankSession:null,sessionUpdateAt:0,sessionActive:!1,isMetricsExpanded:!1,loading:0,filters:ie(c)}),m=U(()=>T.vehicles),h=U(()=>T.achievements),k=U(()=>{var y;return l.accountId===((y=e.account)==null?void 0:y.account_id)}),f=U(()=>Number(d.params.id)||l.accountId),u=U(()=>!e.accountAchievements||!e.savedAccountAchievements||!h.value?null:E.achievementsDiff(e.accountAchievements,e.savedAccountAchievements,h.value)),s=U(()=>!e.account||!e.savedAccount||!e.accountAchievements?ne.account({achievements:null,createAt:0,stat:null,tanks:[],plates:e.isMetricsExpanded?null:i}):e.sessionActive?ne.account({stat:E.accountAll(E.diff(e.account.statistics.all,e.savedAccount.statistics.all)),achievements:u.value,tanks:e.tanksDiff,createAt:new Date(e.sessionUpdateAt).valueOf(),plates:e.isMetricsExpanded?null:i}):ne.account({stat:E.accountAll(e.account.statistics.all),statDiff:E.diff(E.accountAll(e.account.statistics.all),E.accountAll(e.savedAccount.statistics.all)),achievements:e.accountAchievements,achievementsDiff:u.value,tanks:e.tanks,tanksDiff:e.tanksDiff,createAt:e.account.created_at*1e3,createAtDiff:new Date(e.sessionUpdateAt).valueOf(),plates:e.isMetricsExpanded?null:i})),a=U(()=>{var y,P;return!((y=e.account)!=null&&y.statistics.rating)||!((P=e.savedAccount)!=null&&P.statistics.rating)?ne.accountRating():e.sessionActive?ne.accountRating({stat:E.accountRating(E.diff(e.account.statistics.rating,e.savedAccount.statistics.rating)),diff:null,showSession:e.sessionActive}):ne.accountRating({stat:E.accountRating(e.account.statistics.rating),diff:E.diff(E.accountRating(e.account.statistics.rating),E.accountRating(e.savedAccount.statistics.rating)),showSession:e.sessionActive})}),n=U(()=>e.filters.battleMode==="random"?s.value:a.value);xt(()=>{e.loading++}),Be(()=>{e.loading--,N()});function A(){if(!e.tanksStats||!e.tanksAchievements||!m.value)return;const y=oe.accountTanks(e.tanksStats,m.value,e.tanksAchievements);e.tanks=Te.smart(y,{prop:"last_battle_time",order:"desc"});const P=oe.accountTanks(e.savedTanksStats??[],m.value,e.tanksAchievements??[]),L=[];y.forEach(q=>{const W=P.find(re=>re.tank_id===q.tank_id);if(!W){L.push(q);return}const j=E.diff(q.all,W.all);if(!j.battles)return;const ye=(re,be)=>{const _e=re.mark_of_mastery,we=be.mark_of_mastery;return _e>we?_e:null};L.push({...q,battle_life_time:q.battle_life_time-W.battle_life_time,mark_of_mastery:ye(q,W),all:E.tank(j)})}),e.tanksDiff=Te.smart(L,{prop:"last_battle_time",order:"desc"})}async function C(y){try{const{data:P}=await se.tanks.getAchievements({account_id:y});e.tanksAchievements=P[y]??null}catch(P){G(P,{title:"Получение достижений по технике игрока"})}}async function D(y){try{const{data:P}=await se.account.getAchievements({account_id:y});e.accountAchievements=P[y]??null}catch(P){G(P,{title:"Получение достижений по аккаунту игрока"})}}async function x(y){try{const{data:P}=await se.account.getInfo({account_id:y,extra:"statistics.rating"});e.account=(P==null?void 0:P[y])??null}catch(P){G(P,{title:"Получение данных аккаунта"})}}async function V(y){m.value||await R(),await M(y)}async function M(y){try{const{data:P}=await se.tanks.getStats({account_id:y});e.tanksStats=P?P[y]:null}catch(P){G(P,{title:"Получение статистики по технике игрока"})}}async function R(){if(!m.value)try{await T.getTanksVehicles()}catch(y){G(y,{title:"Получение данных описания техники"})}}async function ae(){if(!h.value)try{await T.getAchievements()}catch(y){G(y,{title:"Получение описания достижений"})}}async function N(y=!1){f.value&&(e.loading++,await Promise.all([ae(),x(f.value),V(f.value),C(f.value),D(f.value)]),y||await pt(),ht(y),A(),ge(e.filters),e.loading--)}function ge(y){let P=e.sessionActive?e.tanksDiff:e.tanks;y.tankInGarage!==null&&(P=P.filter(L=>typeof L.in_garage!="boolean"?!0:L.in_garage===(y.tankInGarage===1))),y.tankNation.length&&(P=P.filter(L=>y.tankNation.includes(L.nation))),y.tankTire.length&&(P=P.filter(L=>y.tankTire.includes(L.tier))),P=P.filter(L=>{const q=y.tankIsPremium;return q===!0?L.is_premium:q===!1?!L.is_premium:!0}),y.tankType.length&&(P=P.filter(L=>y.tankType.includes(L.type))),e.filteredTanks=P}function lt(y){y.order||(e.filteredTanks=Te.smart(e.filteredTanks,{prop:"last_battle_time",order:"desc"}))}function de(y){e.filters=ie(y),ge(e.filters)}function rt(){e.filters=ie(c),ge(e.filters),V(f.value)}async function ut(){if(!e.account)return;const y=await Y.indexedDB.accountsInfo.get(e.account.account_id);e.savedAccount=(y==null?void 0:y.data)??null,e.sessionUpdateAt=(y==null?void 0:y.timestamp)??0}function dt(){e.account&&(Y.indexedDB.accountsInfo.set(e.account.account_id,Ce(e.account)),e.savedAccount=ie(e.account),e.sessionUpdateAt=Date.now())}async function _t(){if(!e.account)return;const y=await Y.indexedDB.accountsAchievements.get(e.account.account_id);e.savedAccountAchievements=(y==null?void 0:y.data)??null,e.sessionUpdateAt=(y==null?void 0:y.timestamp)??0}function mt(){!e.account||!e.accountAchievements||(Y.indexedDB.accountsAchievements.set(e.account.account_id,Ce(e.accountAchievements)),e.savedAccountAchievements=ie(e.accountAchievements))}async function ft(){if(!e.account)return;const y=await Y.indexedDB.tanksStat.get(e.account.account_id);e.savedTanksStats=(y==null?void 0:y.data)??null}function vt(){!e.account||!e.tanksStats||(Y.indexedDB.tanksStat.set(e.account.account_id,Ce(e.tanksStats)),e.savedTanksStats=ie(e.tanksStats),e.sessionUpdateAt=Date.now())}function pt(){return Promise.all([ut(),ft(),_t()])}function ht(y=!1){(y||!e.savedAccount)&&dt(),(y||!e.savedTanksStats)&&vt(),(y||!e.savedAccountAchievements)&&mt()}async function kt(){await N(!0)}function gt(y){e.sessionActive=y,de(e.filters)}function yt(){N()}function bt(y){var q,W;const P=e.tanks.find(j=>j.tank_id===y.tank_id);if(!P)return;e.currentTank=P;const L=(q=e.savedTanksStats)==null?void 0:q.find(j=>P.tank_id===j.tank_id);e.currentTankSession=L&&m.value?oe.accountTanks([L],m.value,[])[0]:null,(W=v.value)==null||W.doOpen()}function wt(y){e.isMetricsExpanded=y}return(y,P)=>{const L=Ta,q=Bn,W=Nn,j=qt,ye=nt,re=ws,be=Hs,_e=ii,we=ot,$t=ki,At=te,Ct=ue,Tt=ce;return r(e).account?(_(),b("div",Ci,[p(j,{identity:"preview"},{default:$(()=>[o("div",Ti,[r(e).account.private?(_(),O(L,{key:0,resources:r(e).account.private},null,8,["resources"])):I("",!0)]),p(q,{loading:r(e).loading>0,class:"account-view__preview",account:r(e).account},null,8,["loading","account"]),p(W,{loading:r(e).loading>0,"update-at":r(e).sessionUpdateAt,"session-active":r(e).sessionActive,onReset:kt,onSessionActive:gt,onUpdate:yt},null,8,["loading","update-at","session-active"])]),_:1}),p(j,{title:"Статистика",identity:"statistic"},{default:$(()=>[p(Ai,{filters:r(e).filters,metrics:r(n),loading:r(e).loading>0,onFilters:de,onIsOpen:wt},null,8,["filters","metrics","loading"])]),_:1}),r(h)?$e((_(),O(j,{key:0,title:"Достижения",identity:"achievements"},{default:$(()=>[r(u)&&r(e).accountAchievements?(_(),O(ye,{key:0,filters:r(e).filters,"achievements-info":r(h),achievements:r(e).sessionActive?r(u):r(e).accountAchievements,onFiltersChanged:de},null,8,["filters","achievements-info","achievements"])):I("",!0)]),_:1},512)),[[Ae,r(e).filters.battleMode==="random"]]):I("",!0),!r(e).sessionActive&&r(e).filters.battleMode==="random"?(_(),O(j,{key:1,title:"Инфографика",identity:"tanksBattles"},{default:$(()=>[p(re,{tanks:r(e).tanks},null,8,["tanks"])]),_:1})):I("",!0),r(e).sessionActive?I("",!0):$e((_(),O(j,{key:2,title:"Статистика по дням",identity:"dailyStat"},{default:$(()=>[r(m)?(_(),O(be,{key:0,vehicles:r(m),"account-id":r(e).account.account_id},null,8,["vehicles","account-id"])):I("",!0)]),_:1},512)),[[Ae,r(e).filters.battleMode==="random"]]),$e(p(j,{title:"Техника",identity:"tanks"},{default:$(()=>{var Oe;return[p(_e,{class:"account-view__filters",filters:r(e).filters,"default-filters":r(c),"is-private":r(k),onChange:de,onClear:rt},null,8,["filters","default-filters","is-private"]),p(we,{sort:r(g),loading:r(e).loading>0,tanks:r(e).filteredTanks,"tanks-sessions":r(e).savedTanksStats,"show-diff":!r(e).sessionActive,height:"calc(100vh - 112px)",onSort:lt,onItemClick:bt},null,8,["sort","loading","tanks","tanks-sessions","show-diff"]),p(Ct,{ref_key:"tankDetailsRef",ref:v,width:"1100px",title:(Oe=r(e).currentTank)==null?void 0:Oe.name,onClosed:P[1]||(P[1]=St=>r(e).currentTank=null)},{footer:$(()=>[o("div",Si,[p(At,{onClick:P[0]||(P[0]=St=>{var Me;return(Me=r(v))==null?void 0:Me.doClose()})},{default:$(()=>[S(" Закрыть ")]),_:1})])]),default:$(()=>[r(h)&&r(e).currentTank?(_(),O($t,{key:0,tank:r(e).currentTank,"tank-session":r(e).currentTankSession,"achievements-info":r(h)},null,8,["tank","tank-session","achievements-info"])):I("",!0)]),_:1},8,["title"])]}),_:1},512),[[Ae,r(e).filters.battleMode==="random"]])])):(_(),b("div",Pi,[r(e).loading?I("",!0):(_(),b("div",Ii,xi)),p(Tt,{loading:r(e).loading>0},null,8,["loading"])]))}}});export{tc as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./light-tank.D7fz_d-E.js","./nuxt-icon.qIaVhdWh.js","./_plugin-vue_export-helper.DlAUqK2U.js","./entry.C7rsCkde.js","./nuxt-icon.MfBulapQ.css","./medium-tank.D-9DTT5W.js","./heavy-tank.D_kmnpCa.js","./at-spg.BrDVEQyy.js","./3.CdFWqcK7.js","./2.CDaq4BGj.js","./1.BhEJkr5q.js","./М.Cqn9Rbpk.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
