import{g as H,t as s,d as B}from"./disableScroll.C0aRP9sA.js";import{n as J,r as p,B as Q,j as W,G as X,o as f,v as Y,w as Z,x as c,c as m,a as S,M as j,z as v,Q as ee,J as te,a3 as oe,a4 as ne,X as ae,d as ie,t as le}from"./entry.C7rsCkde.js";var w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function se(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Ge=se,re=typeof w=="object"&&w&&w.Object===Object&&w,de=re,fe=de,ce=typeof self=="object"&&self&&self.Object===Object&&self,ue=fe||ce||Function("return this")(),ge=ue,be=ge,ye=be.Symbol,R=ye,F=R,M=Object.prototype,pe=M.hasOwnProperty,me=M.toString,u=F?F.toStringTag:void 0;function ve(e){var n=pe.call(e,u),a=e[u];try{e[u]=void 0;var i=!0}catch{}var r=me.call(e);return i&&(n?e[u]=a:delete e[u]),r}var we=ve,he=Object.prototype,Se=he.toString;function je(e){return Se.call(e)}var Te=je,_=R,Oe=we,ke=Te,Ce="[object Null]",Le="[object Undefined]",E=_?_.toStringTag:void 0;function $e(e){return e==null?e===void 0?Le:Ce:E&&E in Object(e)?Oe(e):ke(e)}var Ae=$e;function Be(e){return e!=null&&typeof e=="object"}var Ue=Be;const Fe=e=>e?!!e.offsetWidth||!!e.offsetHeight||!!e.getClientRects().length:!1,x=e=>{const n=[];return e.querySelectorAll(`a[href]:not([tabindex^="-"]),
    area[href]:not([tabindex^="-"]),
    input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"]),
    input[type="radio"]:not([disabled]):not([tabindex^="-"]):checked,
    select:not([disabled]):not([tabindex^="-"]),
    textarea:not([disabled]):not([tabindex^="-"]),
    button:not([disabled]):not([tabindex^="-"]),
    iframe:not([tabindex^="-"]),
    audio[controls]:not([tabindex^="-"]),
    video[controls]:not([tabindex^="-"]),
    [contenteditable]:not([tabindex^="-"]),
    [tabindex]:not([tabindex^="-"])`).forEach(a=>{a&&Fe(a)&&n.push(a)}),n},_e=["aria-modal"],Ee={key:0,class:"c-dialog__header"},xe={class:"c-dialog__title"},Re={key:1,class:"c-dialog__footer"},Ke=J({__name:"CDialog",props:{identity:{type:String,default:()=>H()},title:{type:String,default:void 0},width:{type:String,default:void 0},position:{type:String,default:void 0},appendToBody:{type:[Boolean,String],default:!1},fullscreen:{type:[Boolean,String],default:!1},hideClose:{type:[Boolean,String],default:!1},modalEnabled:{type:[Boolean,String],default:!1}},emits:["opened","closed","open","close"],setup(e,{expose:n,emit:a}){const i=e,r=p(),l=p(),D=p(),h=p(!1);let g=null,d=t=>{};Q(()=>{r.value&&s(i.appendToBody)&&document.body.append(r.value)}),W(()=>O()),X(()=>d(!1));const b=a,T=(t="default")=>!!ae()[t];function P(){Array.isArray(window.modalsList)||(window.modalsList=[]),window.modalsList.push({id:i.identity,close:y,open:k})}function O(){var t;window.modalsList=(t=window.modalsList)==null?void 0:t.filter(o=>o.id!==i.identity)}function G(){window.modalsList&&window.modalsList.length&&window.modalsList[window.modalsList.length-1].close()}const A=t=>{if(t.key==="Escape"){G(),t.preventDefault(),t.stopPropagation();return}if(t.key==="Tab"){if(!l.value)return;const o=x(l.value),C=document.activeElement,L=o.findIndex(q=>q===C),$=o.length-1;t.shiftKey&&L===0?(o[$].focus(),t.preventDefault()):!t.shiftKey&&L===$&&(o[0].focus(),t.preventDefault())}},U=()=>{if(!l.value)return;const t=x(l.value),o=t==null?void 0:t[0];o==null||o.focus({preventScroll:!0})},K=()=>{U(),b("opened",!0),d(!0)},N=()=>{var t;O(),(t=window.modalsList)!=null&&t.length||B(!1),g==null||g.focus(),d(!1),b("closed",!0)},V=()=>{var t;(t=window.modalsList)!=null&&t.length||B(!0),P(),b("open",!0)},z=()=>{b("close",!0)},I=()=>{s(i.modalEnabled)||y()};function k(){return new Promise(t=>{g=document.activeElement,h.value=!0,d=t})}function y(){return new Promise(t=>{h.value=!1,d=t})}return n({doOpen:k,doClose:y}),(t,o)=>(f(),Y(ne,{ref_key:"wrapperRef",ref:r,name:"c-dialog-",onEnter:V,onAfterEnter:K,onLeave:z,onAfterLeave:N},{default:Z(()=>[c(h)?(f(),m("div",{key:0,ref_key:"dialogRef",ref:l,class:te(["c-dialog",["c-dialog--"+e.position]]),tabindex:"-1",onClick:oe(I,["self"]),onKeydown:A},[S("div",{role:"dialog","aria-modal":("toFlag"in t?t.toFlag:c(s))(e.modalEnabled),class:"c-dialog__container",style:ee({width:("toFlag"in t?t.toFlag:c(s))(e.fullscreen)?"100%":e.width,height:("toFlag"in t?t.toFlag:c(s))(e.fullscreen)?"100%":""})},[T("title")||e.title?(f(),m("div",Ee,[S("div",xe,[j(t.$slots,"title",{},()=>[ie(le(e.title),1)])])])):v("",!0),S("div",{ref_key:"bodyRef",ref:D,class:"c-dialog__body"},[j(t.$slots,"default")],512),T("footer")?(f(),m("div",Re,[j(t.$slots,"footer")])):v("",!0),("toFlag"in t?t.toFlag:c(s))(e.hideClose)?v("",!0):(f(),m("button",{key:2,class:"c-dialog__close",type:"button",onClick:o[0]||(o[0]=C=>y())}))],12,_e)],34)):v("",!0)]),_:3},512))}});export{Ke as _,R as a,Ge as b,ge as c,Ae as d,de as e,Pe as g,Ue as i};
