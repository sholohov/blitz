(window.webpackJsonp=window.webpackJsonp||[]).push([[3,21],{490:function(e,t,n){"use strict";n.r(t);n(164);var o=n(17),r=n(69),l=n(70),c=n(96),d=n(97),f=n(53),h=n(16),v=(n(98),n(52),n(9),n(34),n(316),n(24),n(86)),y=n(312);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(d.a)(this,n)}}var _,x=function(e,t,n,desc){var o,r=arguments.length,l=r<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},w=[],O=_=function(e){Object(c.a)(n,e);var t=m(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).name="CDialog",e.isOpen=!1,e.lastActiveElement=null,e.waiting=function(e){},e}return Object(l.a)(n,[{key:"mounted",value:function(){!1!==this.appendToBody&&document.body.append(this.$el),this.$router.beforeEach(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w[w.length-1],e.next=3,null==r?void 0:r.doClose();case 3:o();case 4:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}())}},{key:"destroyed",value:function(){this.waiting(!1)}},{key:"opened",value:function(){return this.focusFirstElement(),this.waiting(!0),!0}},{key:"closed",value:function(){var e;return w.pop(),w.length||_.disableScroll(!1),null===(e=this.lastActiveElement)||void 0===e||e.focus(),this.waiting(!1),!0}},{key:"open",value:function(){return w.length||_.disableScroll(!0),w.push(this),!0}},{key:"close",value:function(){return!0}},{key:"doOpen",value:function(){var e=this;return this.lastActiveElement=document.activeElement,this.isOpen=!0,new Promise((function(t){e.waiting=t}))}},{key:"doClose",value:function(){var e=this;return this.isOpen=!1,new Promise((function(t){e.waiting=t}))}},{key:"handleBackdropClick",value:function(){!1===this.modalEnabled&&this.doClose()}},{key:"hasSlot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return!!this.$slots[e]||!!this.$scopedSlots[e]}},{key:"handleKeyDown",value:function(e){"Escape"===e.key&&(w[w.length-1].doClose(),e.preventDefault());if("Tab"===e.key){var t=_.getFocusableElements(this.$el),n=document.activeElement,o=t.findIndex((function(e){return e===n})),r=t.length-1;e.shiftKey&&0===o?(t[r].focus(),e.preventDefault()):e.shiftKey||o!==r||(t[0].focus(),e.preventDefault())}}},{key:"focusFirstElement",value:function(){var e=_.getFocusableElements(this.$el),t=null==e?void 0:e[0];null==t||t.focus({preventScroll:!0})}}],[{key:"getScrollbarWidth",value:function(){var e=document.createElement("div");e.style.position="absolute",e.style.overflow="scroll",document.body.append(e);var t=e.offsetWidth-e.clientWidth;return e.remove(),t}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0}},{key:"disableScroll",value:function(e){!_.isTouchDevice()&&document.documentElement.offsetHeight>=document.documentElement.scrollHeight||(e?(document.body.style.overflow="hidden",document.body.style.height="100%",document.body.style.margin="0",document.body.style.paddingRight=_.getScrollbarWidth()+"px"):(document.body.style.overflow="",document.body.style.height="",document.body.style.margin="",document.body.style.paddingRight=""))}},{key:"isVisible",value:function(e){return!!e&&(!!e.offsetWidth||!!e.offsetHeight||!!e.getClientRects().length)}},{key:"getFocusableElements",value:function(e){var t=[];return e.querySelectorAll('a[href]:not([tabindex^="-"]),\n    area[href]:not([tabindex^="-"]),\n    input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"]),\n    input[type="radio"]:not([disabled]):not([tabindex^="-"]):checked,\n    select:not([disabled]):not([tabindex^="-"]),\n    textarea:not([disabled]):not([tabindex^="-"]),\n    button:not([disabled]):not([tabindex^="-"]),\n    iframe:not([tabindex^="-"]),\n    audio[controls]:not([tabindex^="-"]),\n    video[controls]:not([tabindex^="-"]),\n    [contenteditable]:not([tabindex^="-"]),\n    [tabindex]:not([tabindex^="-"])').forEach((function(i){_.isVisible(i)&&t.push(i)})),t}}]),n}(y.Vue);x([Object(v.Prop)()],O.prototype,"title",void 0),x([Object(v.Prop)()],O.prototype,"width",void 0),x([Object(v.Prop)({default:"center"})],O.prototype,"position",void 0),x([Object(v.Prop)({default:!1})],O.prototype,"appendToBody",void 0),x([Object(v.Prop)({default:!1})],O.prototype,"fullscreen",void 0),x([Object(v.Prop)({default:!1})],O.prototype,"hideClose",void 0),x([Object(v.Prop)({default:!1})],O.prototype,"modalEnabled",void 0),x([Object(v.Ref)("body")],O.prototype,"bodyRef",void 0),x([Object(v.Ref)("dialog")],O.prototype,"dialogRef",void 0),x([Object(y.Emit)()],O.prototype,"opened",null),x([Object(y.Emit)()],O.prototype,"closed",null),x([Object(y.Emit)()],O.prototype,"open",null),x([Object(y.Emit)()],O.prototype,"close",null);var j=O=_=x([y.Component],O),k=(n(546),n(71)),component=Object(k.a)(j,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("transition",{ref:"dialog",attrs:{name:"c-dialog-"},on:{enter:e.open,"after-enter":e.opened,leave:e.close,"after-leave":e.closed}},[e.isOpen?t("div",{ref:"main",staticClass:"c-dialog",class:["c-dialog--"+e.position],attrs:{tabindex:"-1"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleBackdropClick.apply(null,arguments)},keydown:e.handleKeyDown}},[t("div",{staticClass:"c-dialog__container",style:{width:!1===e.fullscreen?e.width:"100%",height:!1===e.fullscreen?"":"100%"},attrs:{role:"dialog","aria-modal":e.modalEnabled}},[e.hasSlot("title")||e.title?t("div",{staticClass:"c-dialog__header"},[t("div",{staticClass:"c-dialog__title"},[e._t("title",(function(){return[e._v("\n            "+e._s(e.title)+"\n          ")]}))],2)]):e._e(),e._v(" "),t("div",{ref:"body",staticClass:"c-dialog__body"},[e._t("default")],2),e._v(" "),e.hasSlot("footer")?t("div",{staticClass:"c-dialog__footer"},[e._t("footer")],2):e._e(),e._v(" "),!1===e.hideClose?t("button",{staticClass:"c-dialog__close",attrs:{type:"button"},on:{click:e.doClose}}):e._e()])]):e._e()])}),[],!1,null,null,null);t.default=component.exports},508:function(e,t,n){var content=n(547);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(136).default)("e7c12eec",content,!0,{sourceMap:!1})},529:function(e,t,n){"use strict";n.r(t);n(34),n(164),n(45),n(44),n(46),n(24),n(65);var o=n(25),r=n(17),l=n(69),c=n(70),d=n(96),f=n(97),h=n(53),v=n(16),y=(n(98),n(52),n(9),n(39),n(38),n(86)),m=n(47),_=n(479),x=n(516),w=n(137),O=n(111),j=n(490);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(f.a)(this,n)}}var R=function(e,t,n,desc){var o,r=arguments.length,l=r<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},P=function(e){Object(d.a)(h,e);var t,n,o,f=C(h);function h(){var e;return Object(l.a)(this,h),(e=f.apply(this,arguments)).name="LoginSwitcher",e.user=O.a.user(),e}return Object(c.a)(h,[{key:"logged",get:function(){return 0!==this.user.accountId}},{key:"login",value:(o=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.auth.login({redirect_uri:location.href,nofollow:1});case 2:t=e.sent,(data=t.data)&&(window.location.href=data.location);case 5:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"logout",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.auth.logout({access_token:t});case 2:w.a.storage.removeUser(),this.user.resetUser();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleLogoutConfirm",value:function(e){var t=w.a.storage.getUser();t&&(e&&this.logout(t.access_token),this.logoutConfirmRef.doClose())}},{key:"handleSwitcher",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.a.storage.getUser()){e.next=6;break}return e.next=4,this.login();case 4:e.next=8;break;case 6:return e.next=8,this.logoutConfirmRef.doOpen();case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),h}(y.Vue);R([Object(y.Ref)("logoutConfirm")],P.prototype,"logoutConfirmRef",void 0),P=R([Object(y.Component)({components:{CDialog:j.default,CButton:_.default,login:function(){return n.e(63).then(n.t.bind(null,707,7))},logout:function(){return n.e(64).then(n.t.bind(null,708,7))}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(m.d)(O.a.breakpoints,["isTablet"]))})],P);var E=P,S=(n(659),n(71)),component=Object(S.a)(E,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"login-switcher"},[e.isTablet?e._e():t("div",{staticClass:"login-switcher__username"},[t("span",{staticClass:"login-switcher__username-text"},[e._v("\n      "+e._s(e.user.name)+"\n    ")])]),e._v(" "),t("CButton",{staticClass:"login-switcher__btn",attrs:{"is-text":"","is-square":"",align:"center",title:e.logged?"Выйти":"Войти"},on:{click:e.handleSwitcher}},[t(e.logged?"logout":"login",{tag:"component"})],1),e._v(" "),t("CDialog",{ref:"logoutConfirm",attrs:{title:"Выход из аккаунта","append-to-body":""}},[t("div",{staticStyle:{margin:"0 0 1em"}},[e._v("\n      Вы уверены, что хотите выйти из аккаунта?\n    ")]),e._v(" "),t("div",{staticStyle:{"text-align":"right"}},[t("CButton",{attrs:{align:"center",width:"80px"},on:{click:function(t){return e.handleLogoutConfirm(!0)}}},[e._v("\n        Да\n      ")]),e._v(" "),t("CButton",{attrs:{align:"center",width:"80px"},on:{click:function(t){return e.handleLogoutConfirm(!1)}}},[e._v("\n        Нет\n      ")])],1)])],1)}),[],!1,null,null,null);t.default=component.exports},546:function(e,t,n){"use strict";n(508)},547:function(e,t,n){var o=n(135)((function(i){return i[1]}));o.push([e.i,'.c-dialog__close{-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;background:transparent;border:none;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;text-align:inherit;width:auto}.c-dialog__close::-moz-focus-inner{border:0;padding:0}.c-dialog__close:focus{outline:none}.c-dialog{align-items:flex-start;background-color:var(--dialog-backdrop);bottom:0;display:flex;justify-content:center;left:0;padding:10px;position:fixed;right:0;top:0;z-index:100}.c-dialog--center .c-dialog__container{margin:auto}.c-dialog--top .c-dialog__container{margin:.5vh auto}.c-dialog--enter-active,.c-dialog--leave-active{transition:opacity .3s}.c-dialog--enter-active .c-dialog__container,.c-dialog--leave-active .c-dialog__container{transition:transform .3s}.c-dialog--enter,.c-dialog--leave-to{opacity:0}.c-dialog--enter .c-dialog__container,.c-dialog--leave-to .c-dialog__container{transform:translateY(10px)}.c-dialog__container{background-color:var(--bg-color);box-shadow:0 0 8px rgba(0,0,0,.1),0 0 16px rgba(0,0,0,.1),0 0 32px rgba(0,0,0,.1);display:flex;flex-direction:column;justify-content:flex-start;margin:auto;max-height:100%;max-width:100%;padding:24px;position:relative}@media screen and (max-width:768px){.c-dialog__container{padding:20px}}@media screen and (max-width:480px){.c-dialog__container{padding:16px}}.c-dialog__header{align-items:center;display:flex;flex:none;margin:0 0 20px}.c-dialog__header:empty{display:none}.c-dialog__title{flex:auto;font-size:18px}.c-dialog__close{cursor:pointer;flex:none;height:24px;position:absolute;right:16px;top:16px;width:24px}.c-dialog__close:after,.c-dialog__close:before{background-color:currentColor;bottom:2px;content:"";display:block;left:calc(50% - 1px);opacity:.5;pointer-events:none;position:absolute;top:2px;transition:transform .3s ease-out;width:2px}.c-dialog__close:hover:before{transform:rotate(45deg)}.c-dialog__close:hover:after{transform:rotate(135deg)}.c-dialog__close:before{transform:rotate(-45deg)}.c-dialog__close:after{transform:rotate(45deg)}.c-dialog__close:focus{background-color:rgba(33,150,243,.1)}.c-dialog__body{flex:auto;overflow-x:hidden;overflow-y:auto;position:relative;transition:opacity .3s .3s}.c-dialog__footer{flex:none;margin:20px 0 0}',""]),o.locals={},e.exports=o},619:function(e,t,n){var content=n(660);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(136).default)("1f6bccc2",content,!0,{sourceMap:!1})},659:function(e,t,n){"use strict";n(619)},660:function(e,t,n){var o=n(135)((function(i){return i[1]}));o.push([e.i,".login-switcher{align-items:center;display:flex;position:relative}.login-switcher__username{align-self:center;display:inline-flex;max-width:200px;padding:0 8px;position:relative}.login-switcher__username-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""]),o.locals={},e.exports=o}}]);