import{N as Te}from"./nuxt-icon.CmJtK45D.js";import{I as Se,o as d,c as y,a as o,f as F,i as U,s as B,b as p,C as J,k as r,t as b,m as D,r as z,n as K,j as M,w as A,d as S,F as j,A as Q,q as Pe,y as Dt,T as ze,x as fe,v as Ke,D as We,J as Z,_ as ee,K as Xe,L as X,M as It,z as Bt,g as xt,N as Rt,O as ye,P as be,G as Ae}from"./entry.ctIX2KUb.js";import{_ as Ot,m as oe}from"./RatingIcon.vue.BgTnxmp_.js";import{_ as Je}from"./nuxt-link.C4UY2yYj.js";import{_ as ve,a as te,h as H,u as Mt}from"./disableScroll.DDlwJlcl.js";import{_ as ce}from"./ContentLoader.vue.qy506COs.js";import{_ as re,a as Vt,i as Et,g as Lt}from"./CDialog.vue.B3NqeRuW.js";import{a as se,s as Y}from"./request.C9u4Wmp-.js";import{a as _e}from"./index.VOeJb_dr.js";import{c as Ut,m as ne,_ as Qe,s as we}from"./index.Bm8ajNGF.js";import{a as le,_ as Ft}from"./CSelect.vue.B4ErcSKo.js";import{u as qt,a as Nt,b as jt}from"./index.CNUfbNKa.js";import{_ as Ht}from"./PageSection.vue.Ba-0kVIV.js";import{_ as De}from"./CImage.vue.fZ9_0vcv.js";import{f as Ye,m as Gt}from"./index.DmknSq2w.js";import{_ as Ie}from"./WinRate.vue.CAQSEhR2.js";import{_ as Ze}from"./CTable.vue.DsGWM1Ic.js";import{s as V}from"./index.BCHmrf2d.js";import{_ as zt,a as Kt,b as Wt,d as Xt,e as Jt,i as Qt,f as Yt,g as Zt,c as ie}from"./cloneDeep.D2VMXt5F.js";import{e as ea}from"./isArrayLike.BUSTlxXz.js";import{u as ta}from"./user.DYZIlJiw.js";const aa={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 62 62"},na=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M28.5 43c8.56 0 15.5-3.134 15.5-7v6c0 3.866-6.94 7-15.5 7S13 45.866 13 42v-6c0 3.866 6.94 7 15.5 7","clip-rule":"evenodd"},null,-1),sa=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M34.5 36c8.56 0 15.5-3.134 15.5-7v6c0 3.866-6.94 7-15.5 7S19 38.866 19 35v-6c0 3.866 6.94 7 15.5 7","clip-rule":"evenodd"},null,-1),oa=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M44 19c0 3.866-6.94 7-15.5 7S13 22.866 13 19v6c0 3.866 6.94 7 15.5 7S44 28.866 44 25zm-1 0c0 1.296-1.21 2.8-3.951 4.038C36.4 24.234 32.672 25 28.5 25s-7.9-.766-10.549-1.962C15.211 21.801 14 20.296 14 19s1.21-2.8 3.951-4.038C20.6 13.766 24.328 13 28.5 13s7.9.766 10.549 1.962C41.789 16.199 43 17.704 43 19","clip-rule":"evenodd"},null,-1),ia=[na,sa,oa];function ca(t,i){return d(),y("svg",aa,[...ia])}const Re={render(){return Se(Te,{icon:{render:ca},name:"gold"})}},la={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 62 62"},ra=o("path",{stroke:"currentColor","stroke-width":"4",d:"m31 13.472 3.486 10.73.45 1.382H47.67l-9.127 6.63-1.176.855.45 1.382 3.486 10.73-9.127-6.632L31 37.695l-1.176.854-9.127 6.631 3.487-10.73.449-1.381-1.176-.854-9.127-6.631h12.735l.449-1.382z"},null,-1),ua=[ra];function da(t,i){return d(),y("svg",la,[...ua])}const _a={render(){return Se(Te,{icon:{render:da},name:"xp"})}},ma={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 62 62"},fa=o("path",{fill:"currentColor","fill-rule":"evenodd",d:"M49.306 27.104 44.133 9l9.483 11.574zm-14.426 25L56 23.654v13.793l-14.655 7.759h12.069l-7.759 5.172zm-21.552-25L18.5 9 9.017 20.574zm13.793 25L6 23.656v13.793l14.655 7.758H8.586l7.759 5.173zM21 20l10-4 10 4v16l-10 8-10-8zm6 12.5L29 22l5.5-1-2 7 4-.5-7 11 2-8z","clip-rule":"evenodd"},null,-1),va=[fa];function pa(t,i){return d(),y("svg",ma,[...va])}const ha={render(){return Se(Te,{icon:{render:pa},name:"prem"})}},ka={class:"account-resources"},ga={class:"account-resources__inner"},ya={key:0,class:"account-resources__item"},ba={class:"account-resources__text"},Aa={class:"account-resources__item"},wa={class:"account-resources__text"},$a={class:"account-resources__item"},Ca={class:"account-resources__text"},Ta={class:"account-resources__item"},Sa={class:"account-resources__text"},Pa=F({__name:"AccountResources",props:{resources:{type:Object,required:!0,default:()=>({})}},setup(t){const i=t,c=U(()=>{const v=i.resources.premium_expires_at*1e3;return v-Date.now()<=0?"":B.date.toTimePassed(v,Date.now(),!0)});return(v,_)=>(d(),y("div",ka,[o("div",ga,[t.resources.is_premium.toLocaleString()?(d(),y("div",ya,[p(r(ha),{filled:!0,"font-controlled":!1,class:J(["account-resources__icon",[{"account-resources__icon--prem":r(c)}]])},null,8,["class"]),o("div",ba,b(r(c)||"0 дн."),1)])):D("",!0),o("div",Aa,[p(r(Re),{filled:!0,"font-controlled":!1,class:"account-resources__icon account-resources__icon--gold"}),o("div",wa,b(t.resources.gold.toLocaleString()),1)]),o("div",$a,[p(r(Re),{filled:!0,"font-controlled":!1,class:"account-resources__icon account-resources__icon--credits"}),o("div",Ca,b(t.resources.credits.toLocaleString()),1)]),o("div",Ta,[p(r(_a),{filled:!0,"font-controlled":!1,class:"account-resources__icon account-resources__icon--xp"}),o("div",Sa,b(t.resources.free_xp.toLocaleString()),1)])])]))}}),Da={class:"account-preview-details__body"},Ia={class:"account-preview-details__section"},Ba={class:"account-preview-details__props-title"},xa={class:"account-preview-details__props"},Ra={class:"account-preview-details__prop"},Oa=o("span",{class:"account-preview-details__prop-title"}," Дата создания ",-1),Ma={class:"account-preview-details__prop"},Va=o("span",{class:"account-preview-details__prop-title"}," Дата обновления ",-1),Ea={key:0,class:"account-preview-details__section"},La={class:"account-preview-details__props-title"},Ua={class:"account-preview-details__props"},Fa={class:"account-preview-details__prop"},qa=o("span",{class:"account-preview-details__prop-title"}," Зарегистрирован ",-1),Na={class:"account-preview-details__prop"},ja=o("span",{class:"account-preview-details__prop-title"}," Последний визит ",-1),Ha={class:"account-preview-details__section"},Ga={class:"account-preview-details__props-title"},za={key:0,class:"account-preview-details__props"},Ka={class:"account-preview-details__prop"},Wa=o("span",{class:"account-preview-details__prop-title"}," Командир ",-1),Xa={class:"account-preview-details__prop"},Ja=o("span",{class:"account-preview-details__prop-title"}," Участников ",-1),Qa={class:"account-preview-details__prop"},Ya=o("span",{class:"account-preview-details__prop-title"}," Создан ",-1),Za={class:"account-preview-details__prop"},en=o("span",{class:"account-preview-details__prop-title"}," Роль ",-1),tn={class:"account-preview-details__prop"},an=o("span",{class:"account-preview-details__prop-title"}," Вступил ",-1),nn={key:1,class:"account-preview-details__props"},sn=o("div",{class:"account-preview-details__prop"}," Не состоит в клане ",-1),on=[sn],cn={key:1,class:"account-preview-details__section"},ln={class:"account-preview-details__props-title"},rn={class:"account-preview-details__props"},un={class:"account-preview-details__prop"},dn=o("span",{class:"account-preview-details__prop-title"}," Данные собираются со дня регистрации на сайте. ",-1),_n={key:0,class:"account-preview-details__clan-history"},mn={class:"account-preview-details__clan-history-date"},fn={key:1,class:"account-preview-details__clan-history-link"},vn={style:{display:"flex","justify-content":"space-between"}},pn=o("span",null,null,-1),hn=F({__name:"AccountPreviewDetails",props:{account:{type:[Object,null],required:!0},clanAccount:{type:[Object,null],required:!0}},setup(t,{expose:i}){const c=(a,n)=>{var x,E;if(!(a!=null&&a.raw)&&a.timestamp)return B.date.toDate(a.timestamp);const s=n?n.raw?n.raw.joined_at*1e3:n.timestamp:Date.now(),C=a.raw?((x=a.raw)==null?void 0:x.joined_at)*1e3:a.timestamp,T=B.date.toDate(a.raw?((E=a.raw)==null?void 0:E.joined_at)*1e3:a==null?void 0:a.timestamp),I=B.date.toDaysPassed(s,C,!0);return`${T} (${I})`},v=t,_=z(null),u=K({user:null,clan:null,clanHistory:[],loading:0,isOpened:!1});async function w(a){u.loading++;try{const{data:n}=await se.clan.getInfo({clan_id:a});u.clan=n?n[a]:null}catch(n){H(n,{title:"Получение данных клана"})}u.loading--}async function k(a){u.loading++;try{const{data:n}=await _e.user.get(a);u.user=n}catch(n){H(n,{title:"Получение данных пользователя"})}finally{u.loading--}}async function e(a){u.loading++;try{const{data:n}=await se.clan.getInfo({clan_id:a.join(","),fields:"clan_id,name,tag"});return n??null}catch(n){return H(n,{title:"Получение данных кланов"}),null}finally{u.loading--}}function f(a,n){u.clanHistory=a.map((s,C)=>{const{raw:T,timestamp:I}=s,x=T&&n?n[T.clan_id]:null;return{key:I,date:c(s,a[C-1]),info:x&&T?`[${x.tag}] ${B.clan.role(T.role)}`:"Не в клане",clanId:(T==null?void 0:T.clan_id)??null}})}async function m(a){u.loading++;try{const{data:n}=await _e.stat.clansAccounts.getList({id:a});return n??[]}catch(n){return H(n,{title:"Получение данных пользователя"}),[]}finally{u.loading--}}async function g(){var n;if(u.isOpened||!v.account||(u.isOpened=!0,(n=v.clanAccount)!=null&&n.clan_id&&await w(v.clanAccount.clan_id),await k(v.account.account_id),!u.user))return;const a=await m(v.account.account_id);if(a.length){const s=a.filter(({raw:T})=>T==null?void 0:T.clan_id).map(({raw:T})=>T==null?void 0:T.clan_id),C=await e(s);f(a,C)}}function $(){var a;(a=_.value)==null||a.doClose()}async function l(){var a;await g(),await((a=_.value)==null?void 0:a.doOpen())}return i({close:$,open:l}),(a,n)=>{const s=ve,C=Je,T=ce,I=te,x=re;return t.account?(d(),M(x,{key:0,ref_key:"detailedDialogRef",ref:_,class:"account-preview-details",title:"Дополнительная информация",width:"600px"},{footer:A(()=>[o("div",vn,[pn,p(I,{onClick:$},{default:A(()=>[S(" Закрыть ")]),_:1})])]),default:A(()=>{var E,O,R,ae;return[o("div",Da,[o("div",Ia,[o("h5",Ba,[p(s,{class:"account-preview-details__prop-title-icon",name:"sports-esports"}),S(" Аккаунт игрока ")]),o("div",xa,[o("div",Ra,[Oa,S(" "+b(a.$formatter.date.toDate(t.account.created_at*1e3)),1)]),o("div",Ma,[Va,S(" "+b(a.$formatter.date.toDate(t.account.updated_at*1e3)),1)])])]),r(u).user?(d(),y("div",Ea,[o("h5",La,[p(s,{class:"account-preview-details__prop-title-icon",name:"person"}),S(" Пользователь ресурса ")]),o("div",Ua,[o("div",Fa,[qa,S(" "+b(a.$formatter.date.toDate((E=r(u).user)==null?void 0:E.createAt)),1)]),o("div",Na,[ja,S(" "+b(a.$formatter.date.toDate((O=r(u).user)==null?void 0:O.visitedAt)),1)])])])):D("",!0),o("div",Ha,[o("h5",Ga,[p(s,{class:"account-preview-details__prop-title-icon",name:"groups"}),S(" Клан игрока ")]),r(u).clan&&t.clanAccount?(d(),y("div",za,[o("div",Ka,[Wa,r(u).clan.leader_id?(d(),M(C,{key:0,class:"account-preview-details__clan-history-link link",to:{name:"account-id",params:{id:r(u).clan.leader_id}}},{default:A(()=>{var G;return[S(b((G=r(u).clan)==null?void 0:G.leader_name),1)]}),_:1},8,["to"])):D("",!0)]),o("div",Xa,[Ja,S(" "+b(a.$formatter.number.toInteger((R=r(u).clan)==null?void 0:R.members_count)),1)]),o("div",Qa,[Ya,S(" "+b(a.$formatter.date.toDate(((ae=r(u).clan)==null?void 0:ae.created_at)*1e3)),1)]),o("div",Za,[en,S(" "+b(a.$formatter.clan.role(t.clanAccount.role)),1)]),o("div",tn,[an,S(" "+b(a.$formatter.date.toDate(t.clanAccount.joined_at*1e3)),1)])])):(d(),y("div",nn,on))]),r(u).user?(d(),y("div",cn,[o("h5",ln,[p(s,{class:"account-preview-details__prop-title-icon",name:"history"}),S(" Клановая история ")]),o("div",rn,[o("div",un,[dn,r(u).clanHistory.length?(d(),y("div",_n,[(d(!0),y(j,null,Q(r(u).clanHistory,G=>(d(),y("div",{key:G.key,class:"account-preview-details__clan-history-item"},[o("span",mn,b(G.date),1),G.clanId?(d(),M(C,{key:0,class:"account-preview-details__clan-history-link link",to:{name:"clan-id",params:{id:G.clanId}}},{default:A(()=>[S(b(G.info),1)]),_:2},1032,["to"])):(d(),y("span",fn,b(G.info),1))]))),128))])):(d(),y(j,{key:1},[S(" Данные собираются. ")],64))])])])):D("",!0)]),p(T,{"backdrop-light":"",loading:r(u).loading>0},null,8,["loading"])]}),_:1},512)):D("",!0)}}}),kn={class:"account-preview"},gn={key:0,class:"account-preview__inner"},yn={class:"account-preview__league"},bn={class:"account-preview__info"},An={class:"account-preview__nickname"},wn={class:"account-preview__nickname-text"},$n={class:"account-preview__clan-text"},Cn={class:"account-preview__props"},Tn={class:"account-preview__prop"},Sn=o("span",{class:"account-preview__prop-title"}," Последний бой ",-1),Pn={class:"account-preview__prop-value"},Dn={key:0,class:"account-preview__prop"},In=o("span",{class:"account-preview__prop-title"}," Должность ",-1),Bn={class:"account-preview__prop-value"},xn={class:"account-preview__actions"},Rn=F({__name:"AccountPreview",props:{account:{type:[Object,null],default:null,required:!0},clanAccount:{type:[Object,null],default:null,required:!0},loading:{type:Boolean,default:!1}},setup(t){const i=z(null),c=t,v=Mt(),_=K({isFavorite:!0,clan:null,detailsLoading:!1});Pe(()=>{w()});async function u(){var m;_.detailsLoading=!0,await((m=i.value)==null?void 0:m.open()),_.detailsLoading=!1}async function w(){if(!c.account)return;const m=await Y.indexedDB.accountsFavorites.get(c.account.account_id);_.isFavorite=m?m==null?void 0:m.isFavorite:!1}async function k(){c.account&&(_.isFavorite=!_.isFavorite,await Y.indexedDB.accountsFavorites.set(c.account.account_id,{id:c.account.account_id,isFavorite:_.isFavorite}))}function e(){k()}async function f(){var g,$,l,a;await Ut(`${(g=c.account)==null?void 0:g.nickname}/${($=c.account)==null?void 0:$.account_id}`)?v.add({type:"success",title:"Скопировано",message:`${(l=c.account)==null?void 0:l.nickname}/${(a=c.account)==null?void 0:a.account_id}`,duration:3e3}):v.add({type:"error",message:"При копировании что-то пошло не так",duration:3e3})}return(m,g)=>{const $=Ot,l=Je,a=ve,n=te,s=ce,C=hn;return d(),y("div",kn,[t.account?(d(),y("div",gn,[o("div",yn,[p($,{large:"",rating:t.account.statistics.rating},null,8,["rating"])]),o("div",bn,[o("div",An,[o("span",wn,b(t.account.nickname),1)]),t.clanAccount&&t.clanAccount.clan?(d(),M(l,{key:0,class:"account-preview__clan link",title:"Перейти к клану",to:{name:"clan-id",params:{id:t.clanAccount.clan_id}}},{default:A(()=>[o("span",$n," ["+b(t.clanAccount.clan.tag)+"] "+b(t.clanAccount.clan.name),1)]),_:1},8,["to"])):D("",!0),o("div",Cn,[o("div",Tn,[Sn,o("span",Pn,b(m.$formatter.date.toRelativeTime(t.account.last_battle_time*1e3)),1)]),t.clanAccount?(d(),y("div",Dn,[In,o("span",Bn,b(m.$formatter.clan.role(t.clanAccount.role)),1)])):D("",!0)])]),o("div",xn,[p(n,{"is-text":"",class:"account-preview__actions-btn",title:"Копировать (nickname/ID)",onClick:f},{default:A(()=>[p(a,{name:"content-copy"})]),_:1}),p(n,{"is-text":"",class:"account-preview__actions-btn",title:"Добавить в избранные",onClick:e},{default:A(()=>[r(_).isFavorite?(d(),M(a,{key:0,name:"star"})):(d(),M(a,{key:1,name:"star-border"}))]),_:1}),p(n,{"is-text":"",disabled:r(_).detailsLoading,class:"account-preview__actions-btn",title:"Дополнительная информация",onClick:u},{default:A(()=>[p(a,{name:"info"})]),_:1},8,["disabled"])])])):D("",!0),p(s,{loading:t.loading},null,8,["loading"]),p(C,{ref_key:"accountPreviewDetailsRef",ref:i,account:t.account,"clan-account":t.clanAccount},null,8,["account","clan-account"])])}}}),On=window.setInterval,Mn={class:"session-panel"},Vn={class:"session-panel__inner"},En={class:"session-panel__item"},Ln={class:"session-panel__buttons"},Un={key:0,class:"session-panel__item session-panel__item--time"},Fn={class:"session-panel__time"},qn=o("span",{class:"session-panel__time-title"}," Время начала ",-1),Nn=o("div",{style:{margin:"0 0 1em"}}," Вы уверены, что хотите сбросить сессию? ",-1),jn={style:{"text-align":"right"}},Oe=60,Hn=F({__name:"SessionPanel",props:{updateAt:{type:Number,required:!0,default:0},sessionActive:{type:Boolean,required:!0,default:!1},hideAutoUpdate:{type:[Boolean],default:!1},loading:{type:Boolean,required:!0,default:!1}},emits:["reset","update","session-active"],setup(t,{emit:i}){const c=t,v=qt(),_=Nt(),u=z(null),w=K({autoUpdateChecked:!1,autoUpdateInterval:Oe,autoUpdateCounter:Oe,autoUpdateTimer:0}),k=U(()=>v.isMobile||_.isMobile);Dt(()=>{clearInterval(w.autoUpdateTimer)});const e=i;function f(){var l;(l=u.value)==null||l.doOpen()}function m(l){var a;l&&e("reset"),(a=u.value)==null||a.doClose()}function g(){e("session-active",!c.sessionActive)}function $(){if(w.autoUpdateChecked=!w.autoUpdateChecked,w.autoUpdateCounter=w.autoUpdateInterval,!w.autoUpdateChecked){clearInterval(w.autoUpdateTimer);return}const l=()=>{if(clearInterval(w.autoUpdateTimer),w.autoUpdateTimer=On(l,1e3),w.autoUpdateCounter>0){w.autoUpdateCounter--;return}w.autoUpdateCounter=w.autoUpdateInterval,e("update")};e("update"),l()}return(l,a)=>{const n=le,s=ve,C=te,T=ce,I=re;return d(),y("div",Mn,[o("div",Vn,[o("div",En,[o("div",Ln,[p(n,{"model-value":t.sessionActive,class:"session-panel__btn",title:"Просмотр статистики за сессию",onChange:g},{default:A(()=>[S(" Сессия ")]),_:1},8,["model-value"]),t.hideAutoUpdate===!1?(d(),M(C,{key:0,class:"session-panel__btn",title:"Автоматическое обновление данных",onClick:$},{before:A(()=>[p(s,{name:"refresh-auto"})]),default:A(()=>[r(k)?D("",!0):(d(),y(j,{key:0},[S(" Обновление ")],64)),S(" "+b(r(w).autoUpdateCounter)+" сек. ",1)]),_:1})):D("",!0),p(C,{class:"session-panel__btn",title:"Сброс данных сессии",onClick:f},{default:A(()=>[p(s,{name:"close"})]),_:1})])]),t.updateAt?(d(),y("div",Un,[o("span",Fn,[qn,S(" "+b(l.$formatter.date.toDateTime(t.updateAt)),1)])])):D("",!0)]),p(T,{loading:t.loading},null,8,["loading"]),p(I,{ref_key:"confirmDialogRef",ref:u,title:"Сброс сессии"},{default:A(()=>[Nn,o("div",jn,[p(C,{align:"center",width:"80px",onClick:a[0]||(a[0]=x=>m(!0))},{default:A(()=>[S(" Да ")]),_:1}),p(C,{align:"center",width:"80px",onClick:a[1]||(a[1]=x=>m(!1))},{default:A(()=>[S(" Нет ")]),_:1})])]),_:1},512)])}}}),Gn=["onClick"],zn={class:"achievements-list__item-inner"},Kn={class:"achievements-list__item-img-wrapper"},Wn={key:0,class:"achievements-list__item-count"},Xn={key:0,class:"achievements-list__item-series"},Jn={key:1,class:"achievements-list__item-details"},Qn=F({__name:"AchievementsList",props:{achievements:{type:Array,default:()=>[]},hideName:{type:[Boolean,String],default:!1}},emits:["medal-click"],setup(t,{emit:i}){const c=i;function v(_){c("medal-click",_)}return(_,u)=>{const w=De;return d(),y("div",{class:J(["achievements-list",[t.hideName?"achievements-list--small":""]])},[t.achievements.length?(d(),M(ze,{key:0,tag:"ul",class:"achievements-list__list",name:"achievements-list__item-"},{default:A(()=>[(d(!0),y(j,null,Q(t.achievements,k=>(d(),y("li",{key:k.key,class:J(["achievements-list__item",[!k.count&&!k.series?"achievements-list__item--no-count":""]])},[o("button",{class:"achievements-list__item-btn",onClick:e=>v(k)},[o("span",zn,[o("span",Kn,[p(w,{class:"achievements-list__item-img",src:k.image,alt:k.key,"data-name":k.name},null,8,["src","alt","data-name"])]),k.count||k.series?(d(),y("span",Wn,[S(b(k.count)+" ",1),k.series?(d(),y("span",Xn," / "+b(k.series),1)):D("",!0)])):D("",!0),t.hideName?D("",!0):(d(),y("span",Jn,b(k.name),1))])],8,Gn)],2))),128))]),_:1})):D("",!0)],2)}}}),Yn={key:0,class:"achievements-block__details"},Zn={class:"achievements-block__details-header"},es={class:"achievements-block__details-name"},ts={class:"achievements-block__details-body"},as=["textContent"],ns=["textContent"],ss={class:"achievements-block__details-footer"},os=F({__name:"AchievementsDetails",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t,{expose:i}){const c=fe(t,"modelValue"),v=z(null),_=z(!1);function u(){_.value=!1}function w(){var k;(k=v.value)==null||k.doOpen()}return i({open:w}),(k,e)=>{const f=De,m=te,g=re;return d(),M(g,{ref_key:"detailsRef",ref:v,width:"640px",onOpen:u},{footer:A(()=>[o("div",ss,[p(m,{onClick:e[0]||(e[0]=$=>{var l;return(l=r(v))==null?void 0:l.doClose()})},{default:A(()=>[S(" Закрыть ")]),_:1})])]),default:A(()=>{var $;return[c.value?(d(),y("div",Yn,[o("div",Zn,[p(f,{class:"achievements-block__details-img",src:c.value.image,alt:c.value.key},null,8,["src","alt"]),o("span",es,b(($=c.value)==null?void 0:$.name),1),o("div",ts,[c.value.description?(d(),y("div",{key:0,textContent:b(c.value.description)},null,8,as)):D("",!0),c.value.condition?(d(),y("div",{key:1,textContent:b(c.value.condition)},null,8,ns)):D("",!0)])])])):D("",!0)]}),_:1},512)}}}),is={key:0,class:"achievements-block__inner"},cs={class:"achievements-block__filter"},ls={class:"achievements-block__filter-item"},rs={class:"achievements-block__filter-item"},us={class:"achievements-block__filter-item"},ds={class:"achievements-block__section-title"},_s={key:1,class:"achievements-block__empty"},ms={key:1,class:"achievements-block__empty"},et=F({__name:"AchievementsBlock",props:{achievements:{type:Object,required:!0,default:()=>({})},achievementsInfo:{type:Object,required:!0,default:()=>({})},filters:{type:Object,required:!0,default:()=>Ye.makeAccountFilters()}},emits:["filters-changed"],setup(t,{emit:i}){const c=["markOfMastery","markOfMasteryI","markOfMasteryII","markOfMasteryIII","heroesOfRassenay","medalLafayettePool","medalRadleyWalters","warrior","medalKolobanov","mainGun","sniper","camper","medalBrothersInArms","medalCrucialContribution"],v=["battle","epic","title","commemorative","step","platoon"],_=t,u=z(),w=z(),k=K({currentMedal:null,showAll:!1}),e=U(()=>{const a=Object.keys(_.achievements.achievements),n=Object.keys(_.achievements.achievements);return a.length||n.length}),f=U(()=>{if(_.filters.achievementsShow==="important"){const n=[];return Object.keys(_.achievements.achievements).forEach(s=>{const C=oe.achievementsMedal({key:s,achievements:_.achievements,encyclopedia:_.achievementsInfo});n.push(C)}),c.reduce((s,C)=>{const T=n.find(I=>I.key===C);return T?[...s,T]:s},[])}const a=Object.keys(_.achievementsInfo);return _.filters.achievementsShow==="deserved"?a.map(n=>oe.achievementsMedal({key:n,achievements:_.achievements,encyclopedia:_.achievementsInfo})).filter(n=>_.achievements.achievements[n.key]||_.achievements.max_series[n.key]).sort((n,s)=>n.key.localeCompare(s.key)):a.map(n=>oe.achievementsMedal({key:n,achievements:_.achievements,encyclopedia:_.achievementsInfo})).toSorted((n,s)=>n.key.localeCompare(s.key))}),m=U(()=>{const a={};return f.value.forEach(n=>{a[n.section]||(a[n.section]={name:n.section,items:[]}),a[n.section].items.push(n)}),Object.values(a).sort((n,s)=>v.indexOf(n.name)-v.indexOf(s.name))}),g=i;function $({key:a}){var n;k.currentMedal=f.value.find(s=>s.key===a)??null,(n=w.value)==null||n.open()}function l(a){g("filters-changed",{..._.filters,achievementsShow:a})}return(a,n)=>{const s=le,C=Qn,T=os;return d(),y("div",{ref_key:"mainRef",ref:u,class:"achievements-block"},[r(e)?(d(),y("div",is,[o("div",cs,[o("div",ls,[p(s,{"model-value":t.filters.achievementsShow==="important",onChange:n[0]||(n[0]=I=>l("important"))},{default:A(()=>[S(" Значимые ")]),_:1},8,["model-value"])]),o("div",rs,[p(s,{"model-value":t.filters.achievementsShow==="deserved",onChange:n[1]||(n[1]=I=>l("deserved"))},{default:A(()=>[S(" Заслуженные ")]),_:1},8,["model-value"])]),o("div",us,[p(s,{"model-value":t.filters.achievementsShow===null,onChange:n[2]||(n[2]=I=>l(null))},{default:A(()=>[S(" Все ")]),_:1},8,["model-value"])])]),r(f).length?(d(),y(j,{key:0},[t.filters.achievementsShow==="important"?(d(),M(C,{key:0,achievements:r(f),"hide-name":!0,onMedalClick:$},null,8,["achievements"])):(d(!0),y(j,{key:1},Q(r(m),I=>(d(),y("div",{key:I.name,class:"achievements-block__section"},[o("div",ds,b(a.$formatter.achievements.section(I.name)),1),p(C,{achievements:I.items,"hide-count":r(k).showAll,onMedalClick:$},null,8,["achievements","hide-count"])]))),128))],64)):(d(),y("div",_s," Нет значимых достижений ")),p(T,{ref_key:"detailsRef",ref:w,modelValue:r(k).currentMedal,"onUpdate:modelValue":n[3]||(n[3]=I=>r(k).currentMedal=I)},null,8,["modelValue"])])):(d(),y("div",ms," Нет достижений "))],512)}}}),pe=F({__name:"TankType",props:Ke({size:{type:Number,default:24},isPremium:{type:Boolean,default:!1},isCollectible:{type:[Boolean,String],default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const i={lightTank:Z(()=>ee(()=>import("./light-tank.pgN7Nl4Q.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),mediumTank:Z(()=>ee(()=>import("./medium-tank.aHO1lbCc.js"),__vite__mapDeps([5,1,2,3,4]),import.meta.url)),heavyTank:Z(()=>ee(()=>import("./heavy-tank.C2mkE2ho.js"),__vite__mapDeps([6,1,2,3,4]),import.meta.url)),"AT-SPG":Z(()=>ee(()=>import("./at-spg.CP891UbD.js"),__vite__mapDeps([7,1,2,3,4]),import.meta.url))},c=fe(t,"modelValue"),v=U(()=>["AT-SPG","heavyTank","lightTank","mediumTank"].includes(c.value)?c.value:(console.warn("Not valid tank type - ",c.value),"span"));return(_,u)=>(d(),M(We(i[r(v)]),{filled:!0,"font-controlled":!1,class:J(["tank-type",[t.isPremium?"tank-type--is-premium":"",t.isCollectible?"tank-type--is-collectible":""]]),width:t.size,height:t.size},null,8,["class","width","height"]))}}),fs=["src","alt"],tt=F({__name:"TankNation",props:Ke({size:{type:[Number,String],default:24}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const i=fe(t,"modelValue");return(c,v)=>(d(),y("img",{style:Xe({width:`${t.size}px`,height:`${t.size}px`}),src:`/img/nations/nation-${i.value}.svg`,alt:i.value,class:"tank-nation"},null,12,fs))}}),vs={class:"account-infographics"},ps={class:"account-infographics__filters"},hs={class:"account-infographics__filters-chips"},ks={class:"account-infographics__chart-list"},gs={class:"account-infographics__chart-label"},ys={class:"account-infographics__line-icon"},bs={key:2},As={key:"battles",class:"account-infographics__line-value"},ws={key:"damagePerBattle",class:"account-infographics__line-value"},$s=F({__name:"AccountInfographics",props:{tanks:{type:Array,default:()=>[],required:!0}},setup(t){const i=t,c=z("battles"),v=[{value:"battles",label:B.stat.accountProp("battles")},{value:"winRate",label:B.stat.accountProp("winRate")},{value:"damagePerBattle",label:B.stat.accountProp("damagePerBattle")}],_=U(()=>[{label:"По нации",key:"nation",value:u("nation")},{label:"По уровню",key:"tier",value:u("tier")},{label:"По типу",key:"type",value:u("type")}]);function u(k){var f;const e={};if(!((f=i.tanks)!=null&&f.length))return e;i.tanks.forEach(m=>{const g=m[k];m.tier&&(g in e||(e[g]={key:g,battles:0,winRate:0,damagePerBattle:0,lineHeight:0}),e[g].battles+=m.all.battles,e[g].winRate+=m.all.wins,e[g].damagePerBattle+=m.all.damage_dealt)});for(const m in e){const g=e[m].battles;e[m].winRate=g?e[m].winRate/(g/100):0,e[m].damagePerBattle=g?e[m].damagePerBattle/g:0}for(const m in e){const $=Math.min(...Object.values(e).map(a=>a[c.value])),l=Math.max(...Object.values(e).map(a=>a[c.value]))-$/1.1;e[m].lineHeight=(e[m][c.value]-$/1.1)/(l/100)}return e}function w(k){c.value=k}return(k,e)=>{const f=le,m=pe,g=tt,$=Ie;return d(),y("div",vs,[o("div",ps,[o("div",hs,[(d(),y(j,null,Q(v,l=>p(f,{key:l.value,"model-value":l.value===r(c),onChange:a=>w(l.value)},{default:A(()=>[S(b(l.label),1)]),_:2},1032,["model-value","onChange"])),64))])]),o("div",ks,[(d(!0),y(j,null,Q(r(_),l=>(d(),y("div",{key:l.key,class:J(["account-infographics__chart",[`account-infographics__chart--${l.key}`]])},[o("span",gs,b(l.label),1),(d(!0),y(j,null,Q(l.value,a=>(d(),y("div",{key:a.key,class:"account-infographics__line"},[o("span",ys,[l.key==="type"?(d(),M(m,{key:0,modelValue:a.key,"onUpdate:modelValue":n=>a.key=n},null,8,["modelValue","onUpdate:modelValue"])):l.key==="nation"?(d(),M(g,{key:1,modelValue:a.key,"onUpdate:modelValue":n=>a.key=n,size:"22"},null,8,["modelValue","onUpdate:modelValue"])):l.key==="tier"?(d(),y("span",bs,b(k.$formatter.encyclopedia.tier(a.key)),1)):(d(),y(j,{key:3},[S(b(a.key),1)],64))]),p(ze,{tag:"span",name:"account-infographics__line-value-",class:"account-infographics__line-progress",style:Xe({"--chart-line-width":a.lineHeight/100})},{default:A(()=>[r(c)==="battles"?(d(),y("span",As,b(k.$formatter.number.toInteger(a.battles)),1)):D("",!0),r(c)==="winRate"?(d(),M($,{key:"winRate",modelValue:a.winRate,"onUpdate:modelValue":n=>a.winRate=n,class:"account-infographics__line-value"},null,8,["modelValue","onUpdate:modelValue"])):D("",!0),r(c)==="damagePerBattle"?(d(),y("span",ws,b(k.$formatter.number.toInteger(a.damagePerBattle)),1)):D("",!0)]),_:2},1032,["style"])]))),128))],2))),128))])])}}}),Cs=F({__name:"MarkOfMastery",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t){const i={1:Z(()=>ee(()=>import("./3.727DLLVD.js"),__vite__mapDeps([8,1,2,3,4]),import.meta.url)),2:Z(()=>ee(()=>import("./2.DE7ghF6w.js"),__vite__mapDeps([9,1,2,3,4]),import.meta.url)),3:Z(()=>ee(()=>import("./1.BIjNHrNc.js"),__vite__mapDeps([10,1,2,3,4]),import.meta.url)),4:Z(()=>ee(()=>import("./М.CRj8TX46.js"),__vite__mapDeps([11,1,2,3,4]),import.meta.url))},c=fe(t,"modelValue");return(v,_)=>(d(),M(We(c.value?i[c.value]:"span"),{filled:!0,"font-controlled":!1,class:J(["mark-of-mastery",[c.value?"mark-of-mastery--"+c.value:""]])},null,8,["class"]))}}),Ts={class:"account-tanks-table"},Ss={key:0,class:"account-tanks-table__total"},Ps={class:"account-tanks-table__total-value"},Ds={class:"account-tanks-table__table"},Is=["title"],Bs={class:"account-tanks-table__name-text"},xs={key:0,class:"account-tanks-table__diff"},Rs={key:0,class:"account-tanks-table__diff"},Os={key:0,class:"account-tanks-table__diff"},Ms={key:0,class:"account-tanks-table__diff"},Vs={key:0,class:"account-tanks-table__diff"},Es={key:0,class:"account-tanks-table__diff"},Ls={key:0,class:"account-tanks-table__diff"},Us={key:0,class:"account-tanks-table__diff"},Fs={class:"account-tanks-table__diff"},at=F({__name:"AccountTanksTable",props:{tanks:{type:Array,default:()=>[],required:!0},tanksSessions:{type:Array,default:null,required:!1},showDiff:{type:[Boolean,String],default:!1},noCount:{type:[Boolean,String],default:!1},height:{type:String,default:void 0},maxHeight:{type:String,default:void 0},sort:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["sort","item-click"],setup(t,{emit:i}){const c=t,v=[{key:"type",label:"Тип",width:60,sortable:!0},{key:"name",label:"Название",sortable:!0},{key:"tier",label:"I-X",sortable:!0},{key:"battles",label:"Бои",sortable:!0,sortMethod(e,f){const m=e,g=f;return m.all.battles-g.all.battles},formatter:e=>B.number.toInteger(e)},{key:"winRate",label:"Победы",sortable:!0,sortMethod(e,f){const m=e,g=f;return m.all.winRate-g.all.winRate},formatter:e=>B.number.toFloatPercent(e)},{key:"damagePerBattle",label:"Урон",sortable:!0,sortMethod(e,f){const m=e,g=f;return m.all.damagePerBattle-g.all.damagePerBattle},formatter:e=>B.number.toInteger(e)},{key:"xpPerBattle",label:"Опыт",sortable:!0,sortMethod(e,f){const m=e,g=f;return m.all.xpPerBattle-g.all.xpPerBattle},formatter:e=>B.number.toInteger(e)},{key:"fragPerBattle",label:"Уничт.",tooltip:"Уничтожено За Бой",sortable:!0,sortMethod(e,f){const m=e,g=f;return m.all.fragPerBattle-g.all.fragPerBattle},formatter:e=>B.number.toFloatNumber(e)},{key:"hitRate",label:"Точн.",tooltip:"Точность стрельбы",sortable:!0,sortMethod(e,f){const m=e,g=f;return m.all.hitRate-g.all.hitRate},formatter:e=>B.number.toFloatPercent(e)},{key:"surviveRate",label:"Выж.",tooltip:"Выживаемость",sortable:!0,sortMethod(e,f){const m=e,g=f;return m.all.surviveRate-g.all.surviveRate},formatter:e=>B.number.toFloatPercent(e)},{key:"spottedPerBattle",label:"Обн.",tooltip:"Обнаружено за бой",sortable:!0,sortMethod(e,f){const m=e,g=f;return m.all.spottedPerBattle-g.all.spottedPerBattle},formatter:e=>B.number.toFloatNumber(e)},{key:"mark_of_mastery",label:"M",tooltip:"Знак классности",sortable:!0,formatter:e=>B.stat.markOfMastery(Number(e))||"---"},{key:"last_battle_time",label:"Последний бой",sortable:!0}],_=U(()=>{let e={};return c.tanks.forEach((f,m)=>{m?e=V.sum(e,f.all):e=f.all}),V.tank(e)}),u=i;function w(e){u("item-click",e)}function k(e,f){var n,s,C;const m=e,g=((n=c.tanksSessions)==null?void 0:n.find(T=>T.tank_id===m.tank_id))??null,$=g?V.diff(m.all,V.tank(g.all)):null,l=($==null?void 0:$[f])||0,a=(C=(s=v.find(T=>T.key===f))==null?void 0:s.formatter)==null?void 0:C.call(s,l);return l>0?"+"+a:a}return(e,f)=>{const m=pe,g=te,$=Ie,l=Cs,a=Ze,n=ce;return d(),y("div",Ts,[t.noCount===!1?(d(),y("div",Ss,[S(" Кол-во: "),o("span",Ps,b(t.tanks.length||0),1)])):D("",!0),o("div",Ds,[p(a,{headers:v,data:t.tanks,summary:r(_),"default-sort":t.sort,"scroll-auto-disabling":"","no-wrap":"","row-key":"tank_id",height:t.height,"max-height":t.maxHeight,onSort:f[0]||(f[0]=s=>u("sort",s))},{index:A(({index:s})=>[S(b(s+1),1)]),type:A(({row:s})=>[o("div",{class:"account-tanks-table__type",title:s.is_premium?"Премиум танк":""},[p(m,{modelValue:s.type,"onUpdate:modelValue":C=>s.type=C,"is-premium":s.is_premium,"is-collectible":s.is_collectible},null,8,["modelValue","onUpdate:modelValue","is-premium","is-collectible"])],8,Is)]),name:A(({row:s})=>[p(g,{class:"account-tanks-table__name","is-text":"",onClick:C=>w(s)},{default:A(()=>[o("span",Bs,b(s.name??`Tank ID: ${s.tank_id}`),1)]),_:2},1032,["onClick"])]),battles:A(({row:s})=>[S(b(s.all.battles)+" ",1),t.showDiff!==!1?(d(),y("div",xs,b(k(s,"battles")),1)):D("",!0)]),winRate:A(({row:s})=>[p($,{"model-value":s.all.winRate,class:"account-tanks-table__win-rate"},null,8,["model-value"]),t.showDiff!==!1?(d(),y("div",Rs,b(k(s,"winRate")),1)):D("",!0)]),damagePerBattle:A(({row:s})=>[S(b(s.all.damagePerBattle)+" ",1),t.showDiff!==!1?(d(),y("div",Os,b(k(s,"damagePerBattle")),1)):D("",!0)]),xpPerBattle:A(({row:s})=>[S(b(s.all.xpPerBattle)+" ",1),t.showDiff!==!1?(d(),y("div",Ms,b(k(s,"xpPerBattle")),1)):D("",!0)]),fragPerBattle:A(({row:s})=>[S(b(s.all.fragPerBattle)+" ",1),t.showDiff!==!1?(d(),y("div",Vs,b(k(s,"fragPerBattle")),1)):D("",!0)]),hitRate:A(({row:s})=>[S(b(e.$formatter.number.toFloatPercent(s.all.hitRate))+" ",1),t.showDiff!==!1?(d(),y("div",Es,b(k(s,"hitRate")),1)):D("",!0)]),surviveRate:A(({row:s})=>[S(b(e.$formatter.number.toFloatPercent(s.all.surviveRate))+" ",1),t.showDiff!==!1?(d(),y("div",Ls,b(k(s,"surviveRate")),1)):D("",!0)]),spottedPerBattle:A(({row:s})=>[S(b(s.all.spottedPerBattle)+" ",1),t.showDiff!==!1?(d(),y("div",Us,b(k(s,"spottedPerBattle")),1)):D("",!0)]),mark_of_mastery:A(({row:s})=>[p(l,{"model-value":s.mark_of_mastery,title:"Знак классности",width:"20",height:"20"},null,8,["model-value"])]),last_battle_time:A(({row:s})=>[S(b(e.$formatter.date.toRelativeTime(s.last_battle_time*1e3))+" ",1),o("div",Fs,b(e.$formatter.date.toDateTime(s.last_battle_time*1e3)),1)]),_:1},8,["data","summary","default-sort","height","max-height"]),p(n,{loading:t.loading},null,8,["loading"])])])}}}),qs={class:"account-daily-stat"},Ns={class:"account-daily-stat__count"},js=o("span",{class:"account-daily-stat__count-title"}," Кол-во: ",-1),Hs={class:"account-daily-stat__table"},Gs={style:{display:"flex","justify-content":"flex-end"}},zs=F({__name:"AccountDailyStat",props:{accountId:{type:[Number,String],default:0,required:!0},vehicles:{type:Object,default:()=>({}),required:!0}},emits:["sort"],setup(t,{emit:i}){const c=t,v=z(null),_=K({loading:0,summary:{},items:[],currentItem:null,accounts:[],tanks:[]}),u=K({order:"desc",prop:"last_battle_time"}),w=[{key:"index",label:"#"},{key:"date",label:"Дата"},{key:"tanks",label:"Танков"},{key:"tier",label:"I-X",formatter:l=>X(l)?B.number.toFloatNumber(l):"---"},{key:"battles",label:"Бои",formatter:l=>X(l)?B.number.toInteger(l):"---"},{key:"winRate",label:"Победы",formatter:l=>X(l)?B.number.toFloatPercent(l):"---"},{key:"damagePerBattle",label:"Урон",formatter:l=>X(l)?B.number.toInteger(l):"---"},{key:"xpPerBattle",label:"Опыт",formatter:l=>X(l)?B.number.toInteger(l):"---"},{key:"fragPerBattle",label:"Уничт.",tooltip:"Уничтожено За Бой",formatter:l=>X(l)?B.number.toFloatNumber(l):"---"},{key:"hitRate",label:"Точн.",tooltip:"Точность стрельбы",formatter:l=>X(l)?B.number.toFloatPercent(l):"---"},{key:"surviveRate",label:"Выж.",tooltip:"Выживаемость",formatter:l=>X(l)?B.number.toFloatPercent(l):"---"},{key:"spottedPerBattle",label:"Обн.",tooltip:"Обнаружено за бой",formatter:l=>X(l)?B.number.toFloatNumber(l):"---"}],k=U(()=>_.currentItem?oe.accountTanks(_.currentItem.tanks,c.vehicles,[]):[]);Pe(async()=>{c.accountId&&(await f(c.accountId),m())});const e=i;async function f(l){const a=new Date,n=new Date;a.setDate(a.getDate()-90);const s={id:l,dateStart:a.toISOString(),dateEnd:n.toISOString()};try{const[C,T]=await Promise.all([_e.stat.accounts.getDiff(s),_e.stat.tanks.getDiff(s)]);_.tanks=T.data,_.accounts=C.data}catch(C){H(C,{title:"Получение дневной статистики"})}}function m(){let l=null;_.accounts.forEach(a=>{var T;const n=V.accountAll(a.raw.statistics.all),s=(T=_.tanks.find(I=>{const x=B.date.toDate(I.timestamp),E=B.date.toDate(a.timestamp);return x===E}))==null?void 0:T.raw,C=()=>{const I=(s==null?void 0:s.length)??0;return((s==null?void 0:s.reduce((x,E)=>{var O;return x+((O=c.vehicles[E.tank_id])==null?void 0:O.tier)||0},0))??0)/I};_.items.push({id:a.id,date:B.date.toDate(a.timestamp),battles:n.battles,winRate:n.winRate,damagePerBattle:n.damagePerBattle,xpPerBattle:n.xpPerBattle,fragPerBattle:n.fragPerBattle,hitRate:n.hitRate,surviveRate:n.surviveRate,spottedPerBattle:n.spottedPerBattle,tanks:s||[],tier:C()}),l=l?V.sum(l,n):n}),_.summary=l?V.accountAll(l):{}}async function g(l){var a;_.currentItem=l,await It(),(a=v.value)==null||a.doOpen()}function $(){var l;_.currentItem=null,(l=v.value)==null||l.doClose()}return(l,a)=>{var E;const n=te,s=Ie,C=Ze,T=ce,I=at,x=re;return d(),y("div",qs,[o("div",Ns,[js,S(" "+b(r(_).items.length),1)]),o("div",Hs,[p(C,{headers:w,data:r(_).items,"default-sort":r(u),summary:r(_).summary,"scroll-auto-disabling":"","no-wrap":"","row-key":"timestamp","max-height":"375px",onSort:a[0]||(a[0]=O=>e("sort",O))},{index:A(({index:O})=>[S(b(O+1),1)]),date:A(({row:O})=>[p(n,{"is-text":"",onClick:R=>g(O)},{default:A(()=>[S(b(O.date),1)]),_:2},1032,["onClick"])]),tanks:A(({row:O})=>[S(b(O.tanks?l.$formatter.number.toInteger(O.tanks.length):"---"),1)]),winRate:A(({row:O})=>[p(s,{modelValue:O.winRate,"onUpdate:modelValue":R=>O.winRate=R,class:"account-daily-stat__win-rate"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["data","default-sort","summary"])]),p(T,{loading:r(_).loading>0},null,8,["loading"]),p(x,{ref_key:"tanksDetailsRef",ref:v,width:"1280px",title:"Статистика за "+((E=r(_).currentItem)==null?void 0:E.date),onClosed:a[1]||(a[1]=O=>r(_).currentItem=null)},{footer:A(()=>[o("div",Gs,[p(n,{onClick:$},{default:A(()=>[S(" Закрыть ")]),_:1})])]),default:A(()=>[r(_).currentItem?(d(),M(I,{key:0,tanks:r(k),"max-height":"calc(100vh - 200px)"},null,8,["tanks"])):D("",!0)]),_:1},8,["title"])])}}});var Ks="__lodash_hash_undefined__";function Ws(t){return this.__data__.set(t,Ks),this}var Xs=Ws;function Js(t){return this.__data__.has(t)}var Qs=Js,Ys=zt,Zs=Xs,eo=Qs;function me(t){var i=-1,c=t==null?0:t.length;for(this.__data__=new Ys;++i<c;)this.add(t[i])}me.prototype.add=me.prototype.push=Zs;me.prototype.has=eo;var to=me;function ao(t,i){for(var c=-1,v=t==null?0:t.length;++c<v;)if(i(t[c],c,t))return!0;return!1}var no=ao;function so(t,i){return t.has(i)}var oo=so,io=to,co=no,lo=oo,ro=1,uo=2;function _o(t,i,c,v,_,u){var w=c&ro,k=t.length,e=i.length;if(k!=e&&!(w&&e>k))return!1;var f=u.get(t),m=u.get(i);if(f&&m)return f==i&&m==t;var g=-1,$=!0,l=c&uo?new io:void 0;for(u.set(t,i),u.set(i,t);++g<k;){var a=t[g],n=i[g];if(v)var s=w?v(n,a,g,i,t,u):v(a,n,g,t,i,u);if(s!==void 0){if(s)continue;$=!1;break}if(l){if(!co(i,function(C,T){if(!lo(l,T)&&(a===C||_(a,C,c,v,u)))return l.push(T)})){$=!1;break}}else if(!(a===n||_(a,n,c,v,u))){$=!1;break}}return u.delete(t),u.delete(i),$}var nt=_o;function mo(t){var i=-1,c=Array(t.size);return t.forEach(function(v,_){c[++i]=[_,v]}),c}var fo=mo;function vo(t){var i=-1,c=Array(t.size);return t.forEach(function(v){c[++i]=v}),c}var po=vo,Me=Vt,Ve=Kt,ho=ea,ko=nt,go=fo,yo=po,bo=1,Ao=2,wo="[object Boolean]",$o="[object Date]",Co="[object Error]",To="[object Map]",So="[object Number]",Po="[object RegExp]",Do="[object Set]",Io="[object String]",Bo="[object Symbol]",xo="[object ArrayBuffer]",Ro="[object DataView]",Ee=Me?Me.prototype:void 0,$e=Ee?Ee.valueOf:void 0;function Oo(t,i,c,v,_,u,w){switch(c){case Ro:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case xo:return!(t.byteLength!=i.byteLength||!u(new Ve(t),new Ve(i)));case wo:case $o:case So:return ho(+t,+i);case Co:return t.name==i.name&&t.message==i.message;case Po:case Io:return t==i+"";case To:var k=go;case Do:var e=v&bo;if(k||(k=yo),t.size!=i.size&&!e)return!1;var f=w.get(t);if(f)return f==i;v|=Ao,w.set(t,i);var m=ko(k(t),k(i),v,_,u,w);return w.delete(t),m;case Bo:if($e)return $e.call(t)==$e.call(i)}return!1}var Mo=Oo,Le=Wt,Vo=1,Eo=Object.prototype,Lo=Eo.hasOwnProperty;function Uo(t,i,c,v,_,u){var w=c&Vo,k=Le(t),e=k.length,f=Le(i),m=f.length;if(e!=m&&!w)return!1;for(var g=e;g--;){var $=k[g];if(!(w?$ in i:Lo.call(i,$)))return!1}var l=u.get(t),a=u.get(i);if(l&&a)return l==i&&a==t;var n=!0;u.set(t,i),u.set(i,t);for(var s=w;++g<e;){$=k[g];var C=t[$],T=i[$];if(v)var I=w?v(T,C,$,i,t,u):v(C,T,$,t,i,u);if(!(I===void 0?C===T||_(C,T,c,v,u):I)){n=!1;break}s||(s=$=="constructor")}if(n&&!s){var x=t.constructor,E=i.constructor;x!=E&&"constructor"in t&&"constructor"in i&&!(typeof x=="function"&&x instanceof x&&typeof E=="function"&&E instanceof E)&&(n=!1)}return u.delete(t),u.delete(i),n}var Fo=Uo,Ce=Xt,qo=nt,No=Mo,jo=Fo,Ue=Jt,Fe=Zt,qe=Qt,Ho=Yt,Go=1,Ne="[object Arguments]",je="[object Array]",de="[object Object]",zo=Object.prototype,He=zo.hasOwnProperty;function Ko(t,i,c,v,_,u){var w=Fe(t),k=Fe(i),e=w?je:Ue(t),f=k?je:Ue(i);e=e==Ne?de:e,f=f==Ne?de:f;var m=e==de,g=f==de,$=e==f;if($&&qe(t)){if(!qe(i))return!1;w=!0,m=!1}if($&&!m)return u||(u=new Ce),w||Ho(t)?qo(t,i,c,v,_,u):No(t,i,e,c,v,_,u);if(!(c&Go)){var l=m&&He.call(t,"__wrapped__"),a=g&&He.call(i,"__wrapped__");if(l||a){var n=l?t.value():t,s=a?i.value():i;return u||(u=new Ce),_(n,s,c,v,u)}}return $?(u||(u=new Ce),jo(t,i,c,v,_,u)):!1}var Wo=Ko,Xo=Wo,Ge=Et;function st(t,i,c,v,_){return t===i?!0:t==null||i==null||!Ge(t)&&!Ge(i)?t!==t&&i!==i:Xo(t,i,c,v,st,_)}var Jo=st,Qo=Jo;function Yo(t,i){return Qo(t,i)}var Zo=Yo;const ei=Lt(Zo),ti={class:"account-tanks-filters"},ai={class:"account-tanks-filters__inner"},ni={class:"account-tanks-filters__list"},si={style:{"font-weight":"500",width:"24px","text-align":"center"}},oi={key:0,class:"account-tanks-filters__item"},ii={class:"account-tanks-filters__item"},ci={class:"account-tanks-filters__item"},li=F({__name:"AccountTanksFilters",props:{defaultFilters:{type:Object,default:null,required:!0},filters:{type:Object,default:null,required:!0},isPrivate:{type:[Boolean,String],default:!1,required:!0}},emits:["change","clear"],setup(t,{emit:i}){const c=t,v=["ussr","germany","usa","uk","japan","china","france","european","other"],_=[1,2,3,4,5,6,7,8,9,10].map(n=>({value:n,label:B.encyclopedia.tier(n)})),u=["lightTank","mediumTank","heavyTank","AT-SPG"],w=[{value:null,label:"Премиум: показать"},{value:!0,label:"Премиум: только"},{value:!1,label:"Премиум: спрятать"}],k=[{value:null,label:"В ангаре: все"},{value:1,label:"В ангаре: есть"},{value:0,label:"В ангаре: нет"}],e=U(()=>!ei(c.filters,c.defaultFilters)),f=i;function m(n){let s=c.filters.tankNation;s.includes(n)?s=s.filter(C=>C!==n):s.push(n),f("change",{...c.filters,tankNation:s})}function g(n){let s=c.filters.tankTire;s.includes(n)?s=s.filter(C=>C!==n):s.push(n),f("change",{...c.filters,tankTire:s})}function $(n){let s=c.filters.tankType;s.includes(n)?s=s.filter(C=>C!==n):s.push(n),f("change",{...c.filters,tankType:s})}function l(n){f("change",{...c.filters,tankInGarage:n})}function a(n){f("change",{...c.filters,tankIsPremium:n})}return(n,s)=>{const C=tt,T=le,I=pe,x=Ft,E=ve,O=te;return d(),y("div",ti,[o("div",ai,[o("ul",ni,[o("li",{class:J(["account-tanks-filters__item",["account-tanks-filters__item--overflow"]])},[(d(),y(j,null,Q(v,R=>p(T,{key:R,"model-value":t.filters.tankNation.includes(R),class:"account-tanks-filters__btn",title:n.$formatter.encyclopedia.nation(R),onChange:ae=>m(R)},{default:A(()=>[p(C,{"model-value":R},null,8,["model-value"])]),_:2},1032,["model-value","title","onChange"])),64))]),o("li",{class:J(["account-tanks-filters__item",["account-tanks-filters__item--overflow"]])},[(d(),y(j,null,Q(u,R=>p(T,{key:R,"model-value":t.filters.tankType.includes(R),class:"account-tanks-filters__btn",title:"Тип",onChange:ae=>$(R)},{default:A(()=>[p(I,{"model-value":R},{default:A(()=>[S(" /> ")]),_:2},1032,["model-value"])]),_:2},1032,["model-value","onChange"])),64))]),o("li",{class:J(["account-tanks-filters__item",["account-tanks-filters__item--overflow"]])},[(d(!0),y(j,null,Q(r(_),R=>(d(),M(T,{key:R.value,"model-value":t.filters.tankTire.includes(R.value),class:"account-tanks-filters__btn",title:"Уровень "+R,onChange:ae=>g(R.value)},{default:A(()=>[o("span",si,b(R.label),1)]),_:2},1032,["model-value","title","onChange"]))),128))]),t.isPrivate?(d(),y("li",oi,[p(x,{"model-value":t.filters.tankInGarage,options:k,onChange:l},null,8,["model-value"])])):D("",!0),o("li",ii,[p(x,{"model-value":t.filters.tankIsPremium,options:w,onChange:a},null,8,["model-value"])]),o("li",ci,[p(O,{title:"Очистить фильтры",disabled:!r(e),onClick:s[0]||(s[0]=R=>f("clear"))},{default:A(()=>[p(E,{name:"clear"})]),_:1},8,["disabled"])])])])])}}}),ri={key:0,class:"account-tank"},ui={class:"account-tank__header"},di={class:"account-tank__img-wrapper"},_i={class:"account-tank__tier"},mi={class:"account-tank__props"},fi={class:"account-tank__prop"},vi=o("span",{class:"account-tank__prop-name"}," Нация: ",-1),pi={class:"account-tank__prop"},hi=o("span",{class:"account-tank__prop-name"}," Последний бой: ",-1),ki=o("h4",null,"Статистика",-1),gi=o("h4",null,"Достижения",-1),yi=F({__name:"AccountTank",props:{tank:{type:Object,default:()=>({}),required:!0},tankSession:{type:Object,default:()=>({}),required:!0},achievementsInfo:{type:Object,default:()=>({}),required:!0}},setup(t){const i=t,c=K({showAllMetrics:!1,filters:Gt()}),v=U(()=>ne.tank({tank:i.tank,tankSession:i.tankSession,plates:c.showAllMetrics?null:["battles","winRate","damagePerBattle","surviveRate","fragPerBattle","winsInPlatoon"]}));function _(u){c.filters=u}return(u,w)=>{var $;const k=De,e=pe,f=le,m=Qe,g=et;return t.tank?(d(),y("div",ri,[o("div",ui,[o("div",di,[p(k,{class:"account-tank__img account-tank__img--nation",alt:"tank.nation",src:`/img/nations/nation-${t.tank.nation}.svg`},null,8,["src"]),p(k,{class:"account-tank__img account-tank__img--tank",alt:t.tank.name,src:($=t.tank.images)==null?void 0:$.preview},null,8,["alt","src"]),p(e,{size:28,class:"account-tank__type","model-value":t.tank.type,"is-premium":t.tank.is_premium,"is-collectible":t.tank.is_collectible},null,8,["model-value","is-premium","is-collectible"]),o("div",_i,b(u.$formatter.encyclopedia.tier(t.tank.tier)),1)]),o("div",mi,[o("div",fi,[vi,S(" "+b(u.$formatter.encyclopedia.nation(t.tank.nation)),1)]),o("div",pi,[hi,S(" "+b(u.$formatter.date.toDateTime(t.tank.last_battle_time*1e3)),1)])])]),ki,p(f,{modelValue:r(c).showAllMetrics,"onUpdate:modelValue":w[0]||(w[0]=l=>r(c).showAllMetrics=l),class:"account-tank__show-all-metrics"},{default:A(()=>[S(" Все показатели ")]),_:1},8,["modelValue"]),p(m,{items:r(v)},null,8,["items"]),gi,p(g,{achievements:t.tank.achievements,"achievements-info":t.achievementsInfo,filters:r(c).filters,onFiltersChanged:_},null,8,["achievements","achievements-info","filters"])])):D("",!0)}}}),bi={class:"accounts-metrics"},Ai={class:"accounts-metrics__filters"},wi={class:"accounts-metrics__filters-item"},$i={class:"accounts-metrics__filters-item"},Ci={class:"accounts-metrics__plates"},Ti=F({__name:"AccountsMetrics",props:{metrics:{type:Array,required:!0,default:()=>[]},filters:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filters","is-open"],setup(t,{emit:i}){const c=t,v=K({isOpen:!1}),_=i;Bt(()=>v.isOpen,()=>_("is-open",v.isOpen));function u(){const w=c.filters.battleMode==="random"?"rating":"random";_("filters",{...c.filters,battleMode:w})}return(w,k)=>{const e=le,f=Qe;return d(),y("div",bi,[o("div",Ai,[o("div",wi,[p(e,{"model-value":t.filters.battleMode==="rating",onChange:u},{default:A(()=>[S(" Рейтинг ")]),_:1},8,["model-value"])]),o("div",$i,[p(e,{modelValue:r(v).isOpen,"onUpdate:modelValue":k[0]||(k[0]=m=>r(v).isOpen=m)},{default:A(()=>[S(" Все показатели ")]),_:1},8,["modelValue"])])]),o("div",Ci,[p(f,{loading:t.loading,items:t.metrics},null,8,["loading","items"])])])}}}),Si={key:0,class:"account-view"},Pi={class:"account-view__private"},Di={style:{display:"flex","justify-content":"flex-end"}},Ii={key:1,class:"account-view--no-data"},Bi={key:0,class:"content-area"},xi=o("p",null,"Нет данных.",-1),Ri=o("p",null,"Возможно аккаунт удалён.",-1),Oi=[xi,Ri],ac=F({__name:"AccountView",setup(t){const i=["battles","winRate","damagePerBattle","winsInPlatoon","battlesPerDay","tanksWithMaster"],c=Ye.makeAccountFilters({tankInGarage:1,tankIsPremium:null}),v=z(null),_=xt(),u=ta(),w=jt(),k=K({order:"desc",prop:"last_battle_time"}),e=K({clanAccount:null,account:null,savedAccount:null,accountAchievements:null,savedAccountAchievements:null,tanksStats:null,tanksAchievements:null,savedTanksStats:null,filteredTanks:[],tanks:[],tanksDiff:[],currentTank:null,currentTankSession:null,sessionUpdateAt:0,sessionActive:!1,isMetricsExpanded:!1,loading:0,filters:ie(c)}),f=U(()=>w.vehicles),m=U(()=>w.achievements),g=U(()=>{var h;return u.accountId===((h=e.account)==null?void 0:h.account_id)}),$=U(()=>Number(_.params.id)||u.accountId),l=U(()=>!e.accountAchievements||!e.savedAccountAchievements||!m.value?null:V.achievementsDiff(e.accountAchievements,e.savedAccountAchievements,m.value)),a=U(()=>!e.account||!e.savedAccount||!e.accountAchievements?ne.account({achievements:null,createAt:0,stat:null,tanks:[],plates:e.isMetricsExpanded?null:i}):e.sessionActive?ne.account({stat:V.accountAll(V.diff(e.account.statistics.all,e.savedAccount.statistics.all)),achievements:l.value,tanks:e.tanksDiff,createAt:new Date(e.sessionUpdateAt).valueOf(),plates:e.isMetricsExpanded?null:i}):ne.account({stat:V.accountAll(e.account.statistics.all),statDiff:V.diff(V.accountAll(e.account.statistics.all),V.accountAll(e.savedAccount.statistics.all)),achievements:e.accountAchievements,achievementsDiff:l.value,tanks:e.tanks,tanksDiff:e.tanksDiff,createAt:e.account.created_at*1e3,createAtDiff:new Date(e.sessionUpdateAt).valueOf(),plates:e.isMetricsExpanded?null:i})),n=U(()=>{var h,P;return!((h=e.account)!=null&&h.statistics.rating)||!((P=e.savedAccount)!=null&&P.statistics.rating)?ne.accountRating():e.sessionActive?ne.accountRating({stat:V.accountRating(V.diff(e.account.statistics.rating,e.savedAccount.statistics.rating)),diff:null,showSession:e.sessionActive}):ne.accountRating({stat:V.accountRating(e.account.statistics.rating),diff:V.diff(V.accountRating(e.account.statistics.rating),V.accountRating(e.savedAccount.statistics.rating)),showSession:e.sessionActive})}),s=U(()=>e.filters.battleMode==="random"?a.value:n.value);Rt(()=>{e.loading++}),Pe(()=>{e.loading--,he()});function C(){if(!e.tanksStats||!e.tanksAchievements||!f.value)return;const h=oe.accountTanks(e.tanksStats,f.value,e.tanksAchievements);e.tanks=we.smart(h,{prop:"last_battle_time",order:"desc"});const P=oe.accountTanks(e.savedTanksStats??[],f.value,e.tanksAchievements??[]),L=[];h.forEach(q=>{const W=P.find(ge=>ge.tank_id===q.tank_id);if(!W){L.push(q);return}const N=V.diff(q.all,W.all);N.battles&&L.push({...q,battle_life_time:q.battle_life_time-W.battle_life_time,mark_of_mastery:q.mark_of_mastery-W.mark_of_mastery,all:V.tank(N)})}),e.tanksDiff=we.smart(L,{prop:"last_battle_time",order:"desc"})}async function T(h){try{const{data:P}=await se.tanks.getAchievements({account_id:h});e.tanksAchievements=P[h]??null}catch(P){H(P,{title:"Получение достижений по технике игрока"})}}async function I(h){try{const{data:P}=await se.account.getAchievements({account_id:h});e.accountAchievements=P[h]??null}catch(P){H(P,{title:"Получение достижений по аккаунту игрока"})}}async function x(h){try{const{data:P}=await se.account.getInfo({account_id:h,extra:"statistics.rating"});e.account=(P==null?void 0:P[h])??null}catch(P){H(P,{title:"Получение данных аккаунта"})}}async function E(h){try{const{data:P}=await se.clan.getAccountInfo({account_id:h,extra:"clan"});e.clanAccount=P?P[h]:null}catch(P){H(P,{title:"Получение данных клана"})}}async function O(h){f.value||await ae(),await R(h)}async function R(h){try{const{data:P}=await se.tanks.getStats({account_id:h});e.tanksStats=P?P[h]:null}catch(P){H(P,{title:"Получение статистики по технике игрока"})}}async function ae(){if(!f.value)try{await w.getTanksVehicles()}catch(h){H(h,{title:"Получение данных описания техники"})}}async function G(){if(!m.value)try{await w.getAchievements()}catch(h){H(h,{title:"Получение описания достижений"})}}async function he(h=!1){$.value&&(e.loading++,await Promise.all([G(),x($.value),E($.value),O($.value),T($.value),I($.value)]),h||await mt(),ft(h),C(),ke(e.filters),e.loading--)}function ke(h){let P=e.sessionActive?e.tanksDiff:e.tanks;h.tankInGarage!==null&&(P=P.filter(L=>typeof L.in_garage!="boolean"?!0:L.in_garage===(h.tankInGarage===1))),h.tankNation.length&&(P=P.filter(L=>h.tankNation.includes(L.nation))),h.tankTire.length&&(P=P.filter(L=>h.tankTire.includes(L.tier))),P=P.filter(L=>{const q=h.tankIsPremium;return q===!0?L.is_premium:q===!1?!L.is_premium:!0}),h.tankType.length&&(P=P.filter(L=>h.tankType.includes(L.type))),e.filteredTanks=P}function ot(h){h.order||(e.filteredTanks=we.smart(e.filteredTanks,{prop:"last_battle_time",order:"desc"}))}function ue(h){e.filters=ie(h),ke(e.filters)}function it(){e.filters=ie(c),ke(e.filters),O($.value)}async function ct(){if(!e.account)return;const h=await Y.indexedDB.accountsInfo.get(e.account.account_id);e.savedAccount=(h==null?void 0:h.data)??null,e.sessionUpdateAt=(h==null?void 0:h.timestamp)??0}function lt(){e.account&&(Y.indexedDB.accountsInfo.set(e.account.account_id,Ae(e.account)),e.savedAccount=ie(e.account),e.sessionUpdateAt=Date.now())}async function rt(){if(!e.account)return;const h=await Y.indexedDB.accountsAchievements.get(e.account.account_id);e.savedAccountAchievements=(h==null?void 0:h.data)??null,e.sessionUpdateAt=(h==null?void 0:h.timestamp)??0}function ut(){!e.account||!e.accountAchievements||(Y.indexedDB.accountsAchievements.set(e.account.account_id,Ae(e.accountAchievements)),e.savedAccountAchievements=ie(e.accountAchievements))}async function dt(){if(!e.account)return;const h=await Y.indexedDB.tanksStat.get(e.account.account_id);e.savedTanksStats=(h==null?void 0:h.data)??null}function _t(){!e.account||!e.tanksStats||(Y.indexedDB.tanksStat.set(e.account.account_id,Ae(e.tanksStats)),e.savedTanksStats=ie(e.tanksStats),e.sessionUpdateAt=Date.now())}function mt(){return Promise.all([ct(),dt(),rt()])}function ft(h=!1){(h||!e.savedAccount)&&lt(),(h||!e.savedTanksStats)&&_t(),(h||!e.savedAccountAchievements)&&ut()}async function vt(){await he(!0)}function pt(h){e.sessionActive=h,ue(e.filters)}function ht(){he()}function kt(h){var q,W;const P=e.tanks.find(N=>N.tank_id===h.tank_id);if(!P)return;e.currentTank=P;const L=(q=e.savedTanksStats)==null?void 0:q.find(N=>P.tank_id===N.tank_id);e.currentTankSession=L&&f.value?oe.accountTanks([L],f.value,[])[0]:null,(W=v.value)==null||W.doOpen()}function gt(h){e.isMetricsExpanded=h}return(h,P)=>{const L=Pa,q=Rn,W=Hn,N=Ht,ge=et,yt=$s,bt=zs,At=li,wt=at,$t=yi,Ct=te,Tt=re,St=ce;return r(e).account?(d(),y("div",Si,[p(N,{identity:"preview"},{default:A(()=>[o("div",Pi,[r(e).account.private?(d(),M(L,{key:0,resources:r(e).account.private},null,8,["resources"])):D("",!0)]),p(q,{loading:r(e).loading>0,class:"account-view__preview",account:r(e).account,"clan-account":r(e).clanAccount},null,8,["loading","account","clan-account"]),p(W,{loading:r(e).loading>0,"update-at":r(e).sessionUpdateAt,"session-active":r(e).sessionActive,onReset:vt,onSessionActive:pt,onUpdate:ht},null,8,["loading","update-at","session-active"])]),_:1}),p(N,{title:"Статистика",identity:"statistic"},{default:A(()=>[p(Ti,{filters:r(e).filters,metrics:r(s),loading:r(e).loading>0,onFilters:ue,onIsOpen:gt},null,8,["filters","metrics","loading"])]),_:1}),r(m)?ye((d(),M(N,{key:0,title:"Достижения",identity:"achievements"},{default:A(()=>[r(l)&&r(e).accountAchievements?(d(),M(ge,{key:0,filters:r(e).filters,"achievements-info":r(m),achievements:r(e).sessionActive?r(l):r(e).accountAchievements,onFiltersChanged:ue},null,8,["filters","achievements-info","achievements"])):D("",!0)]),_:1},512)),[[be,r(e).filters.battleMode==="random"]]):D("",!0),!r(e).sessionActive&&r(e).filters.battleMode==="random"?(d(),M(N,{key:1,title:"Инфографика",identity:"tanksBattles"},{default:A(()=>[p(yt,{tanks:r(e).tanks},null,8,["tanks"])]),_:1})):D("",!0),r(e).sessionActive?D("",!0):ye((d(),M(N,{key:2,title:"Статистика по дням",identity:"dailyStat"},{default:A(()=>[r(f)?(d(),M(bt,{key:0,vehicles:r(f),"account-id":r(e).account.account_id},null,8,["vehicles","account-id"])):D("",!0)]),_:1},512)),[[be,r(e).filters.battleMode==="random"]]),ye(p(N,{title:"Техника",identity:"tanks"},{default:A(()=>{var Be;return[p(At,{class:"account-view__filters",filters:r(e).filters,"default-filters":r(c),"is-private":r(g),onChange:ue,onClear:it},null,8,["filters","default-filters","is-private"]),p(wt,{sort:r(k),loading:r(e).loading>0,tanks:r(e).filteredTanks,"tanks-sessions":r(e).savedTanksStats,"show-diff":!r(e).sessionActive,height:"calc(100vh - 112px)",onSort:ot,onItemClick:kt},null,8,["sort","loading","tanks","tanks-sessions","show-diff"]),p(Tt,{ref_key:"tankDetailsRef",ref:v,width:"1100px",title:(Be=r(e).currentTank)==null?void 0:Be.name,onClosed:P[1]||(P[1]=Pt=>r(e).currentTank=null)},{footer:A(()=>[o("div",Di,[p(Ct,{onClick:P[0]||(P[0]=Pt=>{var xe;return(xe=r(v))==null?void 0:xe.doClose()})},{default:A(()=>[S(" Закрыть ")]),_:1})])]),default:A(()=>[r(m)&&r(e).currentTank?(d(),M($t,{key:0,tank:r(e).currentTank,"tank-session":r(e).currentTankSession,"achievements-info":r(m)},null,8,["tank","tank-session","achievements-info"])):D("",!0)]),_:1},8,["title"])]}),_:1},512),[[be,r(e).filters.battleMode==="random"]])])):(d(),y("div",Ii,[r(e).loading?D("",!0):(d(),y("div",Bi,Oi)),p(St,{loading:r(e).loading>0},null,8,["loading"])]))}}});export{ac as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./light-tank.pgN7Nl4Q.js","./nuxt-icon.CmJtK45D.js","./_plugin-vue_export-helper.DlAUqK2U.js","./entry.ctIX2KUb.js","./nuxt-icon.MfBulapQ.css","./medium-tank.aHO1lbCc.js","./heavy-tank.C2mkE2ho.js","./at-spg.CP891UbD.js","./3.727DLLVD.js","./2.DE7ghF6w.js","./1.BIjNHrNc.js","./М.CRj8TX46.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
