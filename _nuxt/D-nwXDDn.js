import{g as z,d as x}from"./DzvMpuXI.js";import{f as W,r as b,a3 as q,y as H,o as r,j as Z,b as J,w as Q,k as X,c as g,a as w,G as h,m as y,K as Y,C as ee,Z as te,as as oe,W as ne,at as ae,N as ie,d as le,t as se}from"./m8Dh55rh.js";var p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function re(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Ne=re,de=typeof p=="object"&&p&&p.Object===Object&&p,fe=de,ce=fe,ue=typeof self=="object"&&self&&self.Object===Object&&self,be=ce||ue||Function("return this")(),ge=be,ye=ge,pe=ye.Symbol,E=pe,C=E,R=Object.prototype,me=R.hasOwnProperty,ve=R.toString,d=C?C.toStringTag:void 0;function we(e){var n=me.call(e,d),a=e[d];try{e[d]=void 0;var i=!0}catch{}var m=ve.call(e);return i&&(n?e[d]=a:delete e[d]),m}var he=we,Se=Object.prototype,je=Se.toString;function Te(e){return je.call(e)}var Oe=Te,L=E,ke=he,_e=Oe,xe="[object Null]",Ce="[object Undefined]",$=L?L.toStringTag:void 0;function Le(e){return e==null?e===void 0?Ce:xe:$&&$ in Object(e)?ke(e):_e(e)}var Ue=Le;function $e(e){return e!=null&&typeof e=="object"}var Ke=$e;const Be=e=>e?!!e.offsetWidth||!!e.offsetHeight||!!e.getClientRects().length:!1,B=e=>{const n=[];return e.querySelectorAll(`a[href]:not([tabindex^="-"]),
    area[href]:not([tabindex^="-"]),
    input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"]),
    input[type="radio"]:not([disabled]):not([tabindex^="-"]):checked,
    select:not([disabled]):not([tabindex^="-"]),
    textarea:not([disabled]):not([tabindex^="-"]),
    button:not([disabled]):not([tabindex^="-"]),
    iframe:not([tabindex^="-"]),
    audio[controls]:not([tabindex^="-"]),
    video[controls]:not([tabindex^="-"]),
    [contenteditable]:not([tabindex^="-"]),
    [tabindex]:not([tabindex^="-"])`).forEach(a=>{a&&Be(a)&&n.push(a)}),n},Ee=["aria-modal"],Re={key:0,class:"ui-dialog__header"},Pe={class:"ui-dialog__title"},De={key:1,class:"ui-dialog__footer"},Ve=W({__name:"UiDialog",props:{identity:{type:String,default:()=>z()},title:{type:String,default:void 0},width:{type:String,default:void 0},position:{type:String,default:void 0},appendToBody:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},hideClose:{type:Boolean,default:!1},modalEnabled:{type:Boolean,default:!1}},emits:["opened","closed","open","close"],setup(e,{expose:n,emit:a}){const i=e,m=b(),l=b(),P=b(),v=b(!1);let f=null,s=t=>{};q(()=>j()),H(()=>s(!1));const c=a,S=(t="default")=>!!ie()[t];function D(){Array.isArray(window.modalsList)||(window.modalsList=[]),window.modalsList.push({id:i.identity,close:u,open:T})}function j(){var t;window.modalsList=(t=window.modalsList)==null?void 0:t.filter(o=>o.id!==i.identity)}function G(){window.modalsList&&window.modalsList.length&&window.modalsList[window.modalsList.length-1].close()}const M=t=>{if(t.key==="Escape"){G(),t.preventDefault(),t.stopPropagation();return}if(t.key==="Tab"){if(!l.value)return;const o=B(l.value),O=document.activeElement,k=o.findIndex(I=>I===O),_=o.length-1;t.shiftKey&&k===0?(o[_].focus(),t.preventDefault()):!t.shiftKey&&k===_&&(o[0].focus(),t.preventDefault())}},A=()=>{if(!l.value)return;const t=B(l.value),o=t==null?void 0:t[0];o==null||o.focus({preventScroll:!0})},N=()=>{A(),c("opened",!0),s(!0)},U=()=>{var t;j(),(t=window.modalsList)!=null&&t.length||x(!1),f==null||f.focus(),s(!1),c("closed",!0)},K=()=>{var t;(t=window.modalsList)!=null&&t.length||x(!0),D(),c("open",!0)},V=()=>{c("close",!0)},F=()=>{i.modalEnabled||u()};function T(){return new Promise(t=>{f=document.activeElement,v.value=!0,s=t})}function u(){return new Promise(t=>{v.value=!1,s=t})}return n({doOpen:T,doClose:u}),(t,o)=>(r(),Z(ae,{to:"body",disabled:!i.appendToBody},[J(ne,oe(t.$attrs,{ref_key:"wrapperRef",ref:m,name:"ui-dialog-",onEnter:K,onAfterEnter:N,onLeave:V,onAfterLeave:U}),{default:Q(()=>[X(v)?(r(),g("div",{key:0,ref_key:"dialogRef",ref:l,class:ee(["ui-dialog",["ui-dialog--"+e.position]]),tabindex:"-1",onClick:te(F,["self"]),onKeydown:M},[w("div",{role:"dialog","aria-modal":e.modalEnabled,class:"ui-dialog__container",style:Y({width:e.fullscreen?"100%":e.width,height:e.fullscreen?"100%":""})},[S("title")||e.title?(r(),g("div",Re,[w("div",Pe,[h(t.$slots,"title",{},()=>[le(se(e.title),1)])])])):y("",!0),w("div",{ref_key:"bodyRef",ref:P,class:"ui-dialog__body"},[h(t.$slots,"default")],512),S("footer")?(r(),g("div",De,[h(t.$slots,"footer")])):y("",!0),e.hideClose?y("",!0):(r(),g("button",{key:2,class:"ui-dialog__close",type:"button",onClick:o[0]||(o[0]=O=>u())}))],12,Ee)],34)):y("",!0)]),_:3},16)],8,["disabled"]))}});export{Ve as _,E as a,Ne as b,ge as c,Ue as d,fe as e,Ae as g,Ke as i};
