import{d as U,aN as z,r as p,z as I,o as s,b as q,g as F,w as H,e as Q,n as y,ap as W,H as B,p as v,a4 as j,ao as G,M as g,q as J,t as X,f as b,Q as Y,aK as Z,b0 as ee,b1 as te}from"./CbpaTVLF.js";import{d as E}from"./DD4asW33.js";const oe=t=>t?!!t.offsetWidth||!!t.offsetHeight||!!t.getClientRects().length:!1,_=t=>{const d=[];return t.querySelectorAll(`a[href]:not([tabindex^="-"]),
    area[href]:not([tabindex^="-"]),
    input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"]),
    input[type="radio"]:not([disabled]):not([tabindex^="-"]):checked,
    select:not([disabled]):not([tabindex^="-"]),
    textarea:not([disabled]):not([tabindex^="-"]),
    button:not([disabled]):not([tabindex^="-"]),
    iframe:not([tabindex^="-"]),
    audio[controls]:not([tabindex^="-"]),
    video[controls]:not([tabindex^="-"]),
    [contenteditable]:not([tabindex^="-"]),
    [tabindex]:not([tabindex^="-"])`).forEach(n=>{n&&oe(n)&&d.push(n)}),d},ae=["aria-modal"],ne={key:0,class:"ui-dialog__header"},le={class:"ui-dialog__title"},ie={key:1,class:"ui-dialog__footer"},re=U({__name:"UiDialog",props:{identity:{type:String,default:()=>te()},title:{type:String,default:void 0},width:{type:String,default:void 0},position:{type:String,default:void 0},appendToBody:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},hideClose:{type:Boolean,default:!1},noScroll:{type:Boolean,default:!1},modalEnabled:{type:Boolean,default:!1}},emits:["opened","closed","open","close"],setup(t,{expose:d,emit:n}){const a=z("modalsList"),r=t,D=p(),l=p(),M=p(),h=p(!1);let u=null,i=e=>{};I(()=>{x(),i(!1)});const f=n,m=(e="default")=>!!G()[e];function R(){Array.isArray(a.value)||(a.value=[]),a.value.push({id:r.identity,close:c,open:k})}function x(){var e;a.value=(e=a.value)==null?void 0:e.filter(o=>o.id!==r.identity)}function A(){var e;(e=a.value)!=null&&e.length&&a.value[a.value.length-1].close()}const T=e=>{if(e.key==="Escape"){A(),e.preventDefault(),e.stopPropagation();return}if(e.key==="Tab"){if(!l.value)return;const o=_(l.value),S=document.activeElement,w=o.findIndex(P=>P===S),C=o.length-1;e.shiftKey&&w===0?(o[C].focus(),e.preventDefault()):!e.shiftKey&&w===C&&(o[0].focus(),e.preventDefault())}},K=()=>{if(!l.value)return;const e=_(l.value),o=e==null?void 0:e[0];o==null||o.focus({preventScroll:!0})},N=()=>{K(),f("opened",!0),i(!0)},V=()=>{var e;x(),(e=a.value)!=null&&e.length||E(!1),u==null||u.focus(),i(!1),f("closed",!0)},$=()=>{var e;(e=a.value)!=null&&e.length||E(!0),R(),f("open",!0)},L=()=>{f("close",!0)},O=()=>{r.modalEnabled||c()};function k(){return new Promise(e=>{u=document.activeElement,h.value=!0,i=e})}function c(){return new Promise(e=>{h.value=!1,i=e})}return d({doOpen:k,doClose:c}),(e,o)=>(s(),q(ee,{to:"#teleports",disabled:!r.appendToBody},[F(Z,Y(e.$attrs,{ref_key:"wrapperRef",ref:D,name:"ui-dialog-",onEnter:$,onAfterEnter:N,onLeave:L,onAfterLeave:V}),{default:H(()=>[Q(h)?(s(),y("div",{key:0,ref_key:"dialogRef",ref:l,class:B(["ui-dialog",[t.position?"ui-dialog--"+t.position:""]]),tabindex:"-1",onClick:W(O,["self"]),onKeydown:T},[v("div",{role:"dialog","aria-modal":t.modalEnabled,class:"ui-dialog__container",style:j({width:t.fullscreen?"100%":t.width,height:t.fullscreen?"100%":""})},[m("title")||t.title?(s(),y("div",ne,[v("div",le,[g(e.$slots,"title",{},()=>[J(X(t.title),1)])])])):b("",!0),v("div",{ref_key:"bodyRef",ref:M,class:B(["ui-dialog__body",[t.noScroll?"ui-dialog__body--no-scroll":""]])},[g(e.$slots,"default")],2),m("footer")?(s(),y("div",ie,[g(e.$slots,"footer")])):b("",!0),t.hideClose?b("",!0):(s(),y("button",{key:2,class:"ui-dialog__close",type:"button",onClick:o[0]||(o[0]=S=>c())}))],12,ae)],34)):b("",!0)]),_:3},16)],8,["disabled"]))}});export{re as _};
