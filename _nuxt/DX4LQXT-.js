import{d as L,r as M,l as K,an as R,m as U,A as W,o as u,q as d,ao as G,N as g,h as _,s as m,a4 as S,F as A,C,I as v,t as $,v as N,j as V,y as J,g as P}from"./Divx9Nzj.js";import{d as j}from"./DD4asW33.js";function Q(a){const b=[],c={...a};if(typeof c.target=="string"){const n=document.querySelectorAll(c.target);Array.prototype.forEach.call(n,i=>{b.push(i)})}else Array.isArray(c.target)?c.target.forEach(n=>{b.push(n)}):b.push(c.target);const r=new IntersectionObserver(n=>{n.forEach(i=>{const{target:y,isIntersecting:h}=i;c.visibleClassName&&y.classList[h?"add":"remove"](c.visibleClassName),c.hiddenSelector&&y.classList[h?"remove":"add"](c.hiddenSelector),typeof a.callback=="function"&&a.callback(i),a.once&&h&&r.unobserve(y)})},{root:a.root,rootMargin:a.rootMargin,threshold:a.threshold});return b.forEach(n=>r.observe(n)),r}const X={key:0,class:"ui-table__header"},Y={class:"ui-table__head"},Z={class:"ui-table__head-row"},ee={class:"ui-table__sort"},te=["title","onClick"],ae={key:0,class:"ui-table__sort-icons"},se={key:0,class:"ui-table__summary"},re={class:"ui-table__body"},oe=["onClick"],le={key:0,class:"ui-table__no-data"},ie={key:1,class:"ui-table__footer"},de=L({__name:"UiTable",props:{data:{type:Array,required:!0,default:()=>[]},headers:{type:Array,required:!0,default:()=>[]},summary:{type:Object,default:void 0},defaultSort:{type:Object,default:void 0},noWrap:{type:Boolean,default:!1},scrollAutoDisabling:{type:Boolean,default:!1},scrollToTop:{type:Boolean,default:!1},isFixed:{type:Boolean,default:!1},height:{type:String,default:void 0},rowKey:{type:String,default:void 0},maxHeight:{type:String,default:void 0},minHeight:{type:String,default:void 0}},emits:["sort","row-click"],setup(a,{expose:b,emit:c}){var E,H;const r=a,n=M(),i=K({order:((E=r.defaultSort)==null?void 0:E.order)??"",prop:((H=r.defaultSort)==null?void 0:H.prop)??""}),y=M([]);R(()=>{var e;y.value=r.data,w(),r.scrollToTop&&((e=n.value)==null||e.scrollTo({top:0}))});let h=null;function O(){n.value&&(h=Q({target:[n.value],visibleClassName:"ui-table__scroll--in-view",threshold:1,callback(e){const o=e.target;e.isIntersecting?j(!1,o):(j(!0,o),o.scrollTo({top:0}))}}))}U(()=>{r.scrollAutoDisabling&&O()}),W(()=>{r.scrollAutoDisabling&&(h==null||h.disconnect())});const T=e=>({textAlign:e.align,width:Number(e.width)?`${e.width}px`:"auto"}),B=(e="default")=>!!G()[e];function w(){var t;let e=i.order,o=i.prop;e===""&&r.defaultSort&&(e=r.defaultSort.order,o=r.defaultSort.prop);const s=(t=r.headers)==null?void 0:t.find(f=>f.key===o);s&&(typeof s.sortMethod=="function"?y.value.sort((f,l)=>{var p,k;return e==="desc"?((p=s.sortMethod)==null?void 0:p.call(s,l,f))||0:((k=s.sortMethod)==null?void 0:k.call(s,f,l))||0}):s.sortable===!0&&y.value.sort((f,l)=>{const p=(e==="desc"?l:f)[o],k=(e==="desc"?f:l)[o];return String(p).localeCompare(String(k),void 0,{numeric:!0,sensitivity:"base"})}))}const I=c;function q(e){let o=e.key,s=i.order;i.prop!==o&&(s=""),s?s==="asc"?s="desc":(s="",o=""):s="asc",i.order=s,i.prop=o}function z(e){e.sortable&&(q(e),w(),I("sort",{...i,column:e}))}function D(e,o){return typeof e.formatter=="function"?e.formatter(o):o}function x(e,o){return i.order===e&&i.prop===o}function F(e){return typeof r.summary!="object"||!Object.keys(r.summary).includes(e.key)?"":typeof e.formatter=="function"?e.formatter(r.summary[e.key]):r.summary[e.key]}return b({sortItems:w}),(e,o)=>{const s=J;return u(),d("div",{class:v(["ui-table",[a.noWrap?"ui-table--no-wrap":""]]),style:S({height:a.height,maxHeight:a.maxHeight,minHeight:a.minHeight})},[B("header")?(u(),d("div",X,[g(e.$slots,"header")])):_("",!0),m("div",{ref_key:"tableScrollRef",ref:n,class:"ui-table__scroll"},[m("table",{class:"ui-table__table",style:S({tableLayout:a.isFixed?"fixed":"auto"})},[m("thead",Y,[m("tr",Z,[(u(!0),d(A,null,C(a.headers,t=>(u(),d("th",{key:t.key,style:S(T(t)),class:"ui-table__cell ui-table__cell--header"},[m("div",ee,[m("button",{title:t.tooltip,class:v(["ui-table__sort-btn",[t.sortable?"ui-table__sort-btn--has-sort":""]]),onClick:f=>z(t)},[g(e.$slots,`${t.key}-header`,{},()=>[$(N(t.label),1)])],10,te),t.sortable?(u(),d("span",ae,[V(s,{size:"16",name:"arrow-up",class:v(["ui-table__sort-icon",[x("asc",t.key)?"is-active":""]])},null,8,["class"]),V(s,{size:"16",name:"arrow-down",class:v(["ui-table__sort-icon",[x("desc",t.key)?"is-active":""]])},null,8,["class"])])):_("",!0)]),a.summary?(u(),d("div",se,[g(e.$slots,`${t.key}-summary`,{},()=>[$(N(F(t)),1)])])):_("",!0)],4))),128))])]),m("tbody",re,[(u(!0),d(A,null,C(P(y),(t,f)=>(u(),d("tr",{key:String(a.rowKey?t[a.rowKey]:f),class:"ui-table__row",onClick:l=>I("row-click",t)},[(u(!0),d(A,null,C(a.headers,l=>(u(),d("td",{key:l.key,class:v(["ui-table__cell",[l.rowClass?l.rowClass:""]]),style:S(T(l))},[t?g(e.$slots,`${l.key}`,{key:0,row:t,data:t[l.key],index:f},()=>[$(N(D(l,t[l.key])),1)]):_("",!0)],6))),128))],8,oe))),128))])],4),Array.isArray(a.data)&&a.data.length?_("",!0):(u(),d("div",le," Нет данных "))],512),B("footer")?(u(),d("div",ie,[g(e.$slots,"footer")])):_("",!0)],6)}}});export{de as _,Q as i};
