import{_ as O}from"./request.BVKHoC5m.js";import{f as Q,o as B,c as w,b as j,w as U,F as X,A as Y,a as H,t as F,K as Z,d as ee,m as te,T as ae,s as t}from"./entry.38LME4ko.js";import{c as R}from"./WinRate.vue.FhVOgqcP.js";import{s as i}from"./index.Cd8-L_Oi.js";const le=e=>{try{const a=document.createElement("textarea");return a.value=e,a.style.top="0",a.style.left="0",a.style.position="fixed",document.body.appendChild(a),a.focus(),a.select(),document.execCommand("copy"),document.body.removeChild(a),!0}catch{return!1}},Pe=async e=>{if(!navigator.clipboard)return le(e);try{return await navigator.clipboard.writeText(e),!0}catch(a){return console.error(a),!1}},ne={class:"metrics-plates"},oe={class:"metrics-plates__item-label"},re={key:0,class:"metrics-plates__item-diff"},ve=Q({__name:"MetricsPlates",props:{items:{type:Array,required:!0,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){return(a,l)=>{const n=O;return B(),w("div",ne,[j(ae,{tag:"ul",class:"metrics-plates__list"},{default:U(()=>[(B(!0),w(X,null,Y(e.items,o=>(B(),w("li",{key:o.key,class:"metrics-plates__item"},[H("span",oe,F(o.label),1),H("b",{class:"metrics-plates__item-value",style:Z({color:o.color?`var(--color-${o.color})`:null})},[ee(F(o.value)+" ",1),o.diff?(B(),w("span",re,F(o.diff),1)):te("",!0)],4),j(n,{loading:e.loading},null,8,["loading"])]))),128))]),_:1})])}}}),J=(e,a)=>{if(!(!e||!a))return e.reduce((l,n)=>l+n.battle_life_time,0)/a.battles},ie=(e={})=>{var c,f,b,g,k,y,_,h,d,x,I,D,N,T,M,C,p,L,A,$,S,V,E,q,z,G,K;const a=[];a.push({label:"",key:"battles",value:((c=e.stat)==null?void 0:c.battles)||0,diff:t.number.toInteger((f=e.statDiff)==null?void 0:f.battles,!0)},{label:"",key:"winRate",value:t.number.toFloatPercent(((b=e.stat)==null?void 0:b.winRate)||0),diff:t.number.toFloatPercent((g=e.statDiff)==null?void 0:g.winRate,!0),color:R.winRate(((k=e.stat)==null?void 0:k.winRate)||0)},{label:"",key:"damagePerBattle",value:((y=e.stat)==null?void 0:y.damagePerBattle)||0,diff:t.number.toInteger((_=e.statDiff)==null?void 0:_.damagePerBattle,!0)});const l=e.achievements?i.winsInPlatoon({wins:((h=e.stat)==null?void 0:h.wins)??0,achievements:e.achievements}):void 0,n=e.achievementsDiff?i.winsInPlatoon({wins:((d=e.statDiff)==null?void 0:d.wins)??0,achievements:e.achievementsDiff})-(l||0):void 0;a.push({label:"",key:"winsInPlatoon",value:t.number.toFloatPercent(l||0),diff:t.number.toFloatPercent(n,!0)});const o=i.battlesPerDay({battles:((x=e.stat)==null?void 0:x.battles)||0,createAt:e.createAt||0}),u=i.battlesPerDay({battles:((I=e.statDiff)==null?void 0:I.battles)||0,createAt:e.createAtSnapshot||0});a.push({label:"",key:"battlesPerDay",value:o,diff:e.statDiff?t.number.toInteger(u-o,!0):""});const r=i.totalMasters(e.tanks??[]),v=i.totalMasters(e.tanksDiff??[]);a.push({label:"",key:"tanksWithMaster",value:`${r} / ${((D=e.tanks)==null?void 0:D.length)??0}`,diff:e.tanksDiff?`${v} / ${((N=e.tanksDiff)==null?void 0:N.length)??0}`:""}),a.push({label:"",key:"fragPerBattle",value:t.number.toFloatNumber(((T=e.stat)==null?void 0:T.fragPerBattle)||0),diff:t.number.toFloatNumber((M=e.statDiff)==null?void 0:M.fragPerBattle,!0)},{label:"",key:"surviveRate",value:t.number.toFloatPercent(((C=e.stat)==null?void 0:C.surviveRate)||0),diff:t.number.toFloatPercent((p=e.statDiff)==null?void 0:p.surviveRate,!0)},{label:"",key:"hitRate",value:t.number.toFloatPercent(((L=e.stat)==null?void 0:L.hitRate)||0),diff:t.number.toFloatPercent((A=e.statDiff)==null?void 0:A.hitRate,!0)},{label:"",key:"spottedPerBattle",value:t.number.toFloatNumber((($=e.stat)==null?void 0:$.spottedPerBattle)||0),diff:t.number.toFloatNumber((S=e.statDiff)==null?void 0:S.spottedPerBattle,!0)},{label:"",key:"xpPerBattle",value:t.number.toInteger(((V=e.stat)==null?void 0:V.xpPerBattle)||0),diff:t.number.toInteger((E=e.statDiff)==null?void 0:E.xpPerBattle,!0)},{label:"",key:"max_frags",value:((q=e.stat)==null?void 0:q.max_frags)||0,diff:t.number.toInteger((z=e.statDiff)==null?void 0:z.max_frags,!0)},{label:"",key:"max_xp",value:((G=e.stat)==null?void 0:G.max_xp)||0,diff:t.number.toInteger((K=e.statDiff)==null?void 0:K.max_xp,!0)});const m=J(e.tanks,e.stat)??0,s=J(e.tanksDiff,e.statDiff)??null,P=(s||0)-m;return a.push({key:"battle_life_time",label:"Время жизни в минутах",value:t.number.toFloatNumber(m/60||0),diff:s?t.number.toFloatNumber(P/60||0,!0):void 0}),a.forEach(W=>{W.label=t.stat.accountProp(W.key)}),a},ue=(e=[],a)=>{const l=e.length;let n;a&&l&&(n=i.accountAll(a.all,l));const o=Math.floor(e.reduce((u,r)=>Math.floor(u+i.battlesPerDay({createAt:r.created_at*1e3,battles:r.statistics.all.battles})),0)/l);return[{key:"battles",label:"Боёв",value:(n==null?void 0:n.battles)||0},{key:"winRate",label:"Побед",value:t.number.toFloatPercent((n==null?void 0:n.winRate)||0),color:R.winRate((n==null?void 0:n.winRate)||0)},{key:"damagePerBattle",label:"Урон",value:(n==null?void 0:n.damagePerBattle)||0},{key:"activity",label:"Боёв в день",value:t.number.toInteger(o)}]},se=e=>{var s,P,c,f,b;const a=e.tank.all,l=e.tankDiff?e.tankDiff.all:null,n=[{key:"battles",label:t.stat.accountProp("battles"),value:t.number.toInteger(a.battles||0),diff:t.number.toInteger(l==null?void 0:l.battles,!0)},{key:"winRate",label:t.stat.accountProp("winRate"),value:t.number.toFloatPercent(a.winRate||0),diff:t.number.toFloatPercent(l==null?void 0:l.winRate,!0),color:R.winRate(a.winRate||0)},{key:"damagePerBattle",label:t.stat.accountProp("damagePerBattle"),value:t.number.toInteger(a.damagePerBattle||0),diff:t.number.toInteger((l==null?void 0:l.damagePerBattle)||0,!0)},{key:"fragPerBattle",label:t.stat.accountProp("fragPerBattle"),value:t.number.toFloatNumber(a.fragPerBattle||0),diff:t.number.toFloatNumber(l==null?void 0:l.fragPerBattle,!0)},{key:"surviveRate",label:t.stat.accountProp("surviveRate"),value:t.number.toFloatPercent(a.surviveRate||0),diff:t.number.toFloatPercent(l==null?void 0:l.surviveRate,!0)},{key:"hitRate",label:t.stat.accountProp("hitRate"),value:t.number.toFloatPercent(a.hitRate||0),diff:t.number.toFloatPercent(l==null?void 0:l.hitRate,!0)},{key:"spottedPerBattle",label:t.stat.accountProp("spottedPerBattle"),value:t.number.toFloatNumber(a.spottedPerBattle||0),diff:t.number.toFloatNumber(l==null?void 0:l.spottedPerBattle,!0)},{key:"xpPerBattle",label:t.stat.accountProp("xpPerBattle"),value:t.number.toInteger(a.xpPerBattle||0),diff:t.number.toInteger(l==null?void 0:l.xpPerBattle,!0)},{key:"max_frags",label:t.stat.accountProp("max_frags"),value:t.number.toInteger(a.max_frags||0),diff:t.number.toInteger((s=e.tankDiff)==null?void 0:s.max_frags)},{key:"max_xp",label:t.stat.accountProp("max_xp"),value:t.number.toInteger(a.max_xp||0),diff:t.number.toInteger((P=e.tankDiff)==null?void 0:P.max_xp)}],o=e.tank.achievements?i.winsInPlatoon({wins:e.tank.all.wins??0,achievements:e.tank.achievements}):void 0,u=(c=e.tankDiff)!=null&&c.achievements?i.winsInPlatoon({wins:e.tankDiff.all.wins??0,achievements:e.tankDiff.achievements})-(o||0):void 0;n.push({key:"winsInPlatoon",label:t.stat.accountProp("winsInPlatoon"),value:t.number.toFloatPercent(o||0),diff:t.number.toFloatPercent(u,!0)});const r=e.tank.battle_life_time/a.battles,v=(((f=e.tankDiff)==null?void 0:f.battle_life_time)??NaN)/(((b=e.tankDiff)==null?void 0:b.all.battles)??NaN),m=r-v;return n.push({key:"lifeTime",label:t.stat.accountProp("lifeTime"),value:t.number.toFloatNumber(r/60||0),diff:t.number.toFloatNumber(m/60||0,!0)}),n},ce=(e={})=>{var l,n,o,u,r,v,m,s,P,c,f,b,g,k,y,_,h;const a=[{key:"battles",label:"Боёв",value:((l=e.stat)==null?void 0:l.battles)||0,diff:t.number.toInteger((n=e.diff)==null?void 0:n.battles,!0)},{key:"winRate",label:"Побед",value:t.number.toFloatPercent(((o=e.stat)==null?void 0:o.winRate)||0),diff:t.number.toFloatPercent((u=e.diff)==null?void 0:u.winRate,!0),color:R.winRate(((r=e.stat)==null?void 0:r.winRate)||0)},{key:"damagePerBattle",label:"Урон",value:((v=e.stat)==null?void 0:v.damagePerBattle)||0,diff:t.number.toInteger((m=e.diff)==null?void 0:m.damagePerBattle,!0)},{key:"fragPerBattle",label:"Уничтожено",value:t.number.toFloatNumber(((s=e.stat)==null?void 0:s.fragPerBattle)||0),diff:t.number.toFloatNumber((P=e.diff)==null?void 0:P.fragPerBattle,!0)},{key:"surviveRate",label:"Выживаемость",value:t.number.toFloatPercent(((c=e.stat)==null?void 0:c.surviveRate)||0),diff:t.number.toFloatPercent((f=e.diff)==null?void 0:f.surviveRate,!0)},{key:"hitRate",label:"Меткость",value:t.number.toFloatPercent(((b=e.stat)==null?void 0:b.hitRate)||0),diff:t.number.toFloatPercent((g=e.diff)==null?void 0:g.hitRate,!0)},{key:"spottedPerBattle",label:"Обнаружено",value:t.number.toFloatNumber(((k=e.stat)==null?void 0:k.spottedPerBattle)||0),diff:t.number.toFloatNumber((y=e.diff)==null?void 0:y.spottedPerBattle,!0)}];if((_=e.stat)!=null&&_.mm_rating){const d=(e.stat.mm_rating||0)*10+3e3;a.push({key:"mm_rating",label:"Рейтинг",value:t.number.toInteger(d)})}else{const d=10-(((h=e.stat)==null?void 0:h.calibration_battles_left)||0);a.push({key:"calibration_battles_left",label:d<10?"Калибровочные бои":"Рейтинг",value:d<10?`${t.number.toInteger(d)}/10`:"---"})}return a},ge={account:ie,accountRating:ce,tank:se,clan:ue};export{ve as _,Pe as c,ge as m};
