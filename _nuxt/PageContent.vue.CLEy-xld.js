import{u as G,_ as B,a as E,d as J}from"./disableScroll.DUPiWzNJ.js";import{_ as A}from"./nuxt-link.BEP6SH5y.js";import{f as w,g as P,i as h,o as s,c as m,a as e,k as o,t as C,j as p,w as u,d as M,F,m as y,r as I,b as l,C as U,K as Y,D as Q,X as ee,A as te,Y as ne,z as j,Z as oe,$ as ae,a0 as se,s as T,q as ie,E as re}from"./entry.CiLr91Wg.js";import{a as ce,_ as X}from"./ContentBox.vue.CXIsIDnv.js";import{_ as le,g as _e,b as de}from"./CDialog.vue.CAe_H11n.js";import{a as N,u as O,b as V}from"./index.CCZU5IUk.js";import{u as ue}from"./user.DP2m5fhC.js";import{s as D,a as z}from"./request.DLwZlOwo.js";import{a as ge}from"./index.DckVOxso.js";import me from"./leader.BewdLDxQ.js";import{_ as Z}from"./client-only.BKegTxbq.js";import pe from"./dark-mode.DXWXGq7Q.js";import he from"./light-mode.3ww4vHhL.js";import{a as fe}from"./debounce.B98QxhRz.js";const be={class:"breadcrumbs-navigation"},ve={class:"breadcrumbs-navigation__inner"},ye={key:0,class:"breadcrumbs-navigation__root"},ke=e("span",{class:"breadcrumbs-navigation__separator"},null,-1),$e={class:"breadcrumbs-navigation__current"},Se=w({__name:"BreadcrumbsNavigation",setup(g){const i=P(),t=h(()=>{var _;return((_=String(i.name).split("-"))==null?void 0:_[0])??"index"}),r=h(()=>String(i.name??"")),n=h(()=>r===t);return(_,d)=>{const a=A;return s(),m("div",be,[e("div",ve,[o(n)?(s(),m("span",ye,C(_.$formatter.route.getTitle(o(t))),1)):(s(),p(a,{key:1,class:"breadcrumbs-navigation__root link",to:{name:o(t)}},{default:u(()=>[M(C(_.$formatter.route.getTitle(o(t))),1)]),_:1},8,["to"])),o(n)?y("",!0):(s(),m(F,{key:2},[ke,e("span",$e,C(_.$formatter.route.getTitle(o(r))),1)],64))])])}}}),we={class:"login-switcher"},xe={key:0,class:"login-switcher__username"},Ce={class:"login-switcher__username-text"},Te=e("div",{style:{margin:"0 0 1em"}}," Вы уверены, что хотите выйти из аккаунта? ",-1),Me={style:{"text-align":"right"}},Be=w({__name:"LoginSwitcher",setup(g){const i=I(null),t=ue(),r=G(),n=N(),_=O(),d=h(()=>t.accountId!==0),a=h(()=>_.isTablet||n.isTablet||n.isMobile);async function v(){try{const{data:c}=await z.auth.login({redirect_uri:location.href,nofollow:1});c&&(window.location.href=c.location)}catch(c){console.error(c),this.notify.add({type:"error",title:"Вход в аккаунт",message:c instanceof Error?c==null?void 0:c.message:"Неизвестная ошибка"})}}async function f(){await z.auth.logout()}async function b(){await ge.auth.logout(),D.storage.removeUser(),t.resetUser(),location.assign("/")}async function x(){try{await f(),await b()}catch(c){console.error(c),r.add({type:"error",title:"Вход из аккаунта",message:c instanceof Error?c==null?void 0:c.message:"Неизвестная ошибка"})}}function $(c){D.storage.getUser()&&(c&&x(),i.value.doClose())}async function S(){D.storage.getUser()?await i.value.doOpen():await v()}return(c,k)=>{const q=B,L=E,H=le;return s(),m("div",we,[o(a)?y("",!0):(s(),m("div",xe,[e("span",Ce,C(o(t).name),1)])),l(L,{class:"login-switcher__btn","is-text":"","is-square":"",align:"center",title:o(d)?"Выйти":"Войти",onClick:S},{default:u(()=>[l(q,{name:o(d)?"logout":"login"},null,8,["name"])]),_:1},8,["title"]),l(H,{ref_key:"logoutConfirmRef",ref:i,title:"Выход из аккаунта","append-to-body":""},{default:u(()=>[Te,e("div",Me,[l(L,{align:"center",width:"80px",onClick:k[0]||(k[0]=R=>$(!0))},{default:u(()=>[M(" Да ")]),_:1}),l(L,{align:"center",width:"80px",onClick:k[1]||(k[1]=R=>$(!1))},{default:u(()=>[M(" Нет ")]),_:1})])]),_:1},512)])}}}),Ne={class:"page-header__inner"},Oe={class:"page-header__col page-header__col--left"},Le={key:0,class:"page-header__col-item"},Re={class:"page-header__col-item"},Ie={class:"page-header__col page-header__col--right"},Ee={class:"page-header__col-item"},Pe={class:"page-header__col page-header__col--right"},qe={class:"page-header__col-item"},He={class:"page-header__col-item"},De=w({__name:"PageHeader",props:{height:{type:Number,required:!0},isSticky:{type:Boolean,default:!1}},setup(g){const i=N(),t=O(),r=V(),n=h(()=>t.isTablet||i.isTablet||i.isMobile);function _(){r.toggleMainSearch(!0)}function d(){r.toggleMobileMenu(),J(!0)}return(a,v)=>{const f=B,b=E,x=Se,$=ce,S=Be;return s(),m("div",{class:U(["page-header",[g.isSticky?"page-header--is-sticky":"",o(n)?"page-header--is-mobile-view":""]]),style:Y({height:g.height+"px"})},[e("div",Ne,[e("div",Oe,[o(n)?(s(),m("div",Le,[l(b,{"is-square":"","is-text":"",onClick:d},{default:u(()=>[l(f,{name:"menu"})]),_:1})])):y("",!0),e("div",Re,[l(x)])]),e("div",Ie,[e("div",Ee,[o(n)?y("",!0):(s(),p($,{key:0,class:"page-header__search"}))])]),e("div",Pe,[e("div",qe,[o(n)?(s(),p(b,{key:0,"is-square":"","is-text":"",onClick:_},{default:u(()=>[l(f,{name:"search"})]),_:1})):y("",!0)]),e("div",He,[l(S)])])])],6)}}}),je={class:"page-sidebar-header"},Ue={class:"page-sidebar-header__inner"},Ve={class:"page-sidebar-header__logo-icon"},ze=e("span",{class:"page-sidebar-header__logo-text"}," Blitz Commander ",-1),Ae=w({__name:"PageSidebarHeader",emits:["close"],setup(g,{emit:i}){const t=O(),r=N(),n=i,_=h(()=>t.isTablet||r.isTablet||r.isMobile);return(d,a)=>{const v=B,f=E;return s(),m("div",je,[e("div",Ue,[(s(),p(Q((d._.provides[ee]||d.$route).name==="index"?"span":"nuxt-link"),{class:"page-sidebar-header__logo",to:"/"},{default:u(()=>[e("span",Ve,[l(o(me),{style:{width:"24px",height:"24px"}})]),ze]),_:1})),o(_)?(s(),p(f,{key:0,"is-square":"","is-text":"",class:"page-sidebar-header__close",onClick:a[0]||(a[0]=b=>n("close"))},{default:u(()=>[l(v,{name:"close"})]),_:1})):y("",!0)])])}}}),Fe={class:"navigation-list"},Ye={class:"navigation-list__list"},Xe={key:0,class:"navigation-list__link navigation-list__link--is-active"},Ze=w({__name:"NavigationList",props:{navigation:{type:Array,required:!0,default:()=>[]}},setup(g){const i=P();function t(r){return i.matched.some(n=>{const _=String(n.name).split("-")[0]??"index",d=String(r.to.name).split("-")[0]??"index";return _===d})}return(r,n)=>{const _=B,d=A;return s(),m("nav",Fe,[e("ul",Ye,[(s(!0),m(F,null,te(g.navigation.filter(a=>!a.isHidden),a=>(s(),m("li",{key:a.key,class:"navigation-list__item"},[t(a)?(s(),m("span",Xe,[a.icon?(s(),p(_,{key:0,name:a.icon,class:"navigation-list__icon"},null,8,["name"])):y("",!0),M(" "+C(a.label),1)])):(s(),p(d,{key:1,class:"navigation-list__link",to:a.to},{default:u(()=>[a.icon?(s(),p(_,{key:0,name:a.icon,class:"navigation-list__icon"},null,8,["name"])):y("",!0),M(" "+C(a.label),1)]),_:2},1032,["to"]))]))),128))])])}}}),Ke=()=>ne("color-mode").value,We=w({__name:"ThemeSwitcher",setup(g){const i=Ke(),t=h(()=>i.value==="system"?"":i.value==="dark"?"light":"dark");function r(){const n=i.value==="light";i.preference=n?"dark":"light"}return(n,_)=>{const d=Z,a=E;return s(),p(a,{class:"theme-switcher","is-text":"","is-square":"",title:"Переключить тему",onClick:r},{default:u(()=>[l(d,null,{default:u(()=>[o(t)==="dark"?(s(),p(o(pe),{key:0,class:"theme-switcher__icon"})):o(t)==="light"?(s(),p(o(he),{key:1,class:"theme-switcher__icon"})):y("",!0)]),_:1})]),_:1})}}}),Ge={class:"page-sidebar__body"},Je={class:"page-sidebar__footer"},Qe={class:"page-sidebar__prop"},et=e("span",{class:"page-sidebar__prop-title"},"Тема",-1),tt={target:"_blank",href:"https://t.me/+kpbNPjc8nyZlMmIy",class:"page-sidebar__prop link"},nt=e("span",{class:"page-sidebar__prop-title"},"Комьюнити",-1),ot={target:"_blank",href:"https://yoomoney.ru/to/4100118432687922",class:"page-sidebar__prop link"},at=e("span",{class:"page-sidebar__prop-title"},"Поблагодарить",-1),st={class:"page-sidebar__version"},it=w({__name:"PageSidebar",props:{isOpen:{type:Boolean,default:!1},navigation:{type:Array,default:()=>[]},headerHeight:{type:Number,default:0}},setup(g){const i=se(),t=V(),r=O(),n=N(),_=P(),d=h(()=>r.isTablet||n.isTablet||n.isMobile),a=h(()=>i.public.clientVersion);j(d,()=>{d.value||t.toggleMobileMenu(!1)}),j(()=>_.name,(f,b)=>{f!==b&&setTimeout(()=>t.toggleMobileMenu(!1),300)},{immediate:!0});function v(){t.toggleMobileMenu(!1)}return(f,b)=>{const x=Ae,$=Ze,S=We,c=B,k=X;return s(),p(ae,{name:"page-sidebar-",duration:600},{default:u(()=>[g.isOpen?(s(),m("div",{key:0,class:U(["page-sidebar",[o(d)?"page-sidebar--mobile-view":""]]),onClick:oe(v,["self"])},[l(k,{class:"page-sidebar__panel","inner-class":"page-sidebar__inner"},{default:u(()=>[l(x,{class:"page-sidebar__header",style:Y({height:g.headerHeight+"px"}),onClose:v},null,8,["style"]),e("div",Ge,[l($,{class:"page-sidebar__navigation",navigation:g.navigation},null,8,["navigation"])]),e("div",Je,[e("label",Qe,[l(S),et]),e("a",tt,[l(c,{name:"telegram",style:{margin:"6px"}}),nt]),e("a",ot,[l(c,{name:"savings",style:{margin:"6px"}}),at]),e("div",st," v"+C(o(a)),1)])]),_:1})],2)):y("",!0)]),_:1})}}});var rt=fe,ct=de,lt="Expected a function";function _t(g,i,t){var r=!0,n=!0;if(typeof g!="function")throw new TypeError(lt);return ct(t)&&(r="leading"in t?!!t.leading:r,n="trailing"in t?!!t.trailing:n),rt(g,i,{leading:r,maxWait:i,trailing:n})}var dt=_t;const ut=_e(dt),gt={class:"page-content__header"},mt={class:"page-content__main"},pt={class:"page-content__sidebar"},Nt=w({__name:"PageContent",emits:["scroll"],setup(g,{emit:i}){const t=P(),r=N(),n=V(),_=O(),d=I(!1),a=I(!1),v=I(54),f=[{label:T.route.getTitle("index"),key:"main",to:{name:"index"},icon:"home"},{label:T.route.getTitle("account"),key:"account",to:{name:"account"},icon:"person"},{label:T.route.getTitle("clan"),key:"clan",to:{name:"clan"},icon:"groups"},{label:T.route.getTitle("leaderboards"),key:"leaderboards",to:{name:"leaderboards"},icon:"leaderboard"},{label:T.route.getTitle("tournaments"),key:"tournaments",to:{name:"tournaments"},icon:"emoji-events"},{label:T.route.getTitle("widgets"),key:"widgets",to:{name:"widgets"},icon:"widgets"}],b=h(()=>_.isTablet||r.isMobileOrTablet),x=h(()=>!b.value||n.mobileMenuOpened),$=i;j(()=>t,()=>{n.toggleMobileMenu(!1)}),ie(()=>{d.value=!0,window==null||window.addEventListener("scroll",S),S()});const S=ut(c,60);function c(){$("scroll",window.scrollY),k()}function k(){return a.value=window.scrollY>10}return(q,L)=>{const H=De,R=X,K=it,W=Z;return s(),p(W,null,{default:u(()=>[e("div",{class:U(["page-content",[{"page-content--is-scrolled":o(a),"page-content--mobile-view":o(b)}]])},[e("header",gt,[l(R,null,{default:u(()=>[l(H,{"is-sticky":o(a),height:o(v)},null,8,["is-sticky","height"])]),_:1})]),e("main",mt,[l(R,null,{default:u(()=>[re(q.$slots,"default")]),_:3})]),e("aside",pt,[l(K,{navigation:f,"is-open":o(x),"header-height":o(v)},null,8,["is-open","header-height"])])],2)]),_:3})}}});export{Nt as _};
