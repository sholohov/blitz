(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{765:function(e,t,n){var content=n(818);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(75).default)("73ecea1a",content,!0,{sourceMap:!1})},817:function(e,t,n){"use strict";n(765)},818:function(e,t,n){var o=n(74)((function(i){return i[1]}));o.push([e.i,".clan-events{display:inline-flex}.clan-events__inner{position:relative}.clan-events__panel{align-items:center;display:flex;justify-content:space-between}.clan-events__prop{align-items:center;display:flex;flex-wrap:wrap}.clan-events__prop:not(:last-child){margin:0 0 4px}.clan-events__prop-title{color:var(--color-text-light);font-size:14px;margin:0 10px 0 0}.clan-events__prop-value{margin:0 4px 0 0}.clan-events__btn{color:var(--color-text);position:relative}.clan-events__btn--has-unread{color:var(--color-text-link)}.clan-events__count{background-color:var(--bg-color);border:1px solid var(--border-color-light);bottom:0;display:inline-flex;font-size:10px;justify-content:center;left:0;line-height:1.4;min-width:14px;padding:0 2px;pointer-events:none;position:absolute}",""]),o.locals={},e.exports=o},843:function(e,t,n){"use strict";n.r(t);n(83);var o=n(35),l=n(36),c=n(40),r=n(41),v=n(25),d=n(21),_=(n(3),n(1),n(34),n(6),n(152),n(129),n(130),n(17)),f=n(113),h=n(151),m=n(363),y=n.n(m);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(v.a)(e);if(t){var l=Object(v.a)(this).constructor;n=Reflect.construct(o,arguments,l)}else n=o.apply(this,arguments);return Object(r.a)(this,n)}}var j=function(e,t,n,desc){var o,l=arguments.length,c=l<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(l<3?o(c):l>3?o(t,n,c):o(t,n))||c);return l>3&&c&&Object.defineProperty(t,n,c),c},x=function(e){Object(c.a)(n,e);var t=C(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).name="ClanEvents",e}return Object(l.a)(n,[{key:"changesCount",get:function(){return this.joinedMembers.length+this.leftMembers.length}},{key:"leftMembers",get:function(){var e,t,n,o,l=null!==(e=null===(t=this.clan)||void 0===t?void 0:t.members_ids)&&void 0!==e?e:[],c=null!==(n=null===(o=this.savedClan)||void 0===o?void 0:o.members)&&void 0!==n?n:[];return Object.values(c).filter((function(i){return!l.includes(i.account_id)}))}},{key:"joinedMembers",get:function(){var e,t,n,o,l=null!==(e=null===(t=this.clan)||void 0===t?void 0:t.members)&&void 0!==e?e:[],c=null!==(n=null===(o=this.savedClan)||void 0===o?void 0:o.members_ids)&&void 0!==n?n:[];return Object.values(l).filter((function(i){return!c.includes(i.account_id)}))}},{key:"reset",value:function(){}},{key:"handleResetBtn",value:function(){this.reset(),this.dialogRef.doClose()}},{key:"handleClickEventsBtn",value:function(){this.dialogRef.doOpen()}},{key:"handleCloseBtn",value:function(){this.dialogRef.doClose()}}]),n}(_.Vue);j([Object(_.Prop)({required:!0})],x.prototype,"savedAt",void 0),j([Object(_.Prop)({required:!0})],x.prototype,"clan",void 0),j([Object(_.Prop)({required:!0})],x.prototype,"savedClan",void 0),j([Object(_.Ref)("dialog")],x.prototype,"dialogRef",void 0),j([Object(_.Emit)("reset")],x.prototype,"reset",null);var k=x=j([Object(_.Component)({components:{CDialog:h.default,CButton:f.default,MailIcon:y.a}})],x),O=(n(817),n(37)),component=Object(O.a)(k,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"clan-events"},[t("div",{staticClass:"clan-events__inner"},[t("CButton",{staticClass:"clan-events__btn",class:[e.changesCount?"clan-events__btn--has-unread":""],attrs:{disabled:!e.changesCount,"is-text":"","is-square":"",title:"События клана"},on:{click:e.handleClickEventsBtn}},[t("MailIcon")],1),e._v(" "),t("div",{staticClass:"clan-events__count"},[e._v("\n      "+e._s(e.changesCount>99?"99+":e.changesCount)+"\n    ")])],1),e._v(" "),t("CDialog",{ref:"dialog",attrs:{width:"640px"},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"clan-events__prop"},[t("span",{staticClass:"clan-events__prop-title"},[e._v("\n          События от\n        ")]),e._v("\n        "+e._s(e.$formatter.date.toLocaleDateTime(e.savedAt))+" ("+e._s(e.$formatter.date.toDaysPassed(e.savedAt,Date.now()))+")\n      ")])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div"),e._v(" "),t("div",[t("CButton",{on:{click:e.handleResetBtn}},[e._v("\n            Прочитано\n          ")]),e._v(" "),t("CButton",{on:{click:e.handleCloseBtn}},[e._v("\n            Закрыть\n          ")])],1)])]},proxy:!0}])},[e._v(" "),e.leftMembers.length?t("div",{staticClass:"clan-events__prop"},[t("span",{staticClass:"clan-events__prop-title"},[e._v("\n        Покинули ("+e._s(e.leftMembers.length)+")\n      ")]),e._v(" "),e._l(e.leftMembers,(function(n,o){return t("span",{key:n.account_id,staticClass:"clan-events__prop-value"},[t("nuxt-link",{staticClass:"link",attrs:{to:{name:"account-id",params:{id:n.account_id}}}},[e._v("\n          "+e._s(n.account_name)+"\n        ")]),e._v(e._s(o+1!==e.leftMembers.length?", ":"")+"\n      ")],1)}))],2):e._e(),e._v(" "),e.joinedMembers.length?t("div",{staticClass:"clan-events__prop"},[t("span",{staticClass:"clan-events__prop-title"},[e._v("\n        Вступили ("+e._s(e.joinedMembers.length)+")\n      ")]),e._v(" "),e._l(e.joinedMembers,(function(n,o){return t("span",{key:n.account_id,staticClass:"clan-events__prop-value"},[t("nuxt-link",{staticClass:"link",attrs:{to:{name:"account-id",params:{id:n.account_id}}}},[e._v("\n          "+e._s(n.account_name)+"\n        ")]),e._v(e._s(o+1!==e.joinedMembers.length?", ":"")+"\n      ")],1)}))],2):e._e(),e._v(" "),e.changesCount?e._e():t("span",[e._v("\n      Пока всё тихо ...\n    ")])])],1)}),[],!1,null,null,null);t.default=component.exports}}]);