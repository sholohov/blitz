import{g as K}from"./RPJY7rI9.js";import{d as N,r as u,ap as O,z,o as s,e as I,h as q,w as F,f as H,l as m,m as h,J as b,g as p,R as J,E as W,aa as j,M as G,ak as Q,aP as X,a9 as Y,q as Z,t as ee}from"./DJlEGeV1.js";import{d as L}from"./DD4asW33.js";const te=t=>t?!!t.offsetWidth||!!t.offsetHeight||!!t.getClientRects().length:!1,B=t=>{const l=[];return t.querySelectorAll(`a[href]:not([tabindex^="-"]),
    area[href]:not([tabindex^="-"]),
    input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"]),
    input[type="radio"]:not([disabled]):not([tabindex^="-"]):checked,
    select:not([disabled]):not([tabindex^="-"]),
    textarea:not([disabled]):not([tabindex^="-"]),
    button:not([disabled]):not([tabindex^="-"]),
    iframe:not([tabindex^="-"]),
    audio[controls]:not([tabindex^="-"]),
    video[controls]:not([tabindex^="-"]),
    [contenteditable]:not([tabindex^="-"]),
    [tabindex]:not([tabindex^="-"])`).forEach(n=>{n&&te(n)&&l.push(n)}),l},oe=["aria-modal"],ne={key:0,class:"ui-dialog__header"},ae={class:"ui-dialog__title"},ie={key:1,class:"ui-dialog__footer"},re=N({__name:"UiDialog",props:{identity:{type:String,default:()=>K()},title:{type:String,default:void 0},width:{type:String,default:void 0},position:{type:String,default:void 0},appendToBody:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},hideClose:{type:Boolean,default:!1},modalEnabled:{type:Boolean,default:!1}},emits:["opened","closed","open","close"],setup(t,{expose:l,emit:n}){const d=t,E=u(),a=u(),S=u(),y=u(!1);let r=null,i=e=>{};O(()=>g()),z(()=>i(!1));const f=n,w=(e="default")=>!!Y()[e];function _(){Array.isArray(window.modalsList)||(window.modalsList=[]),window.modalsList.push({id:d.identity,close:c,open:v})}function g(){var e;window.modalsList=(e=window.modalsList)==null?void 0:e.filter(o=>o.id!==d.identity)}function R(){window.modalsList&&window.modalsList.length&&window.modalsList[window.modalsList.length-1].close()}const D=e=>{if(e.key==="Escape"){R(),e.preventDefault(),e.stopPropagation();return}if(e.key==="Tab"){if(!a.value)return;const o=B(a.value),x=document.activeElement,k=o.findIndex($=>$===x),C=o.length-1;e.shiftKey&&k===0?(o[C].focus(),e.preventDefault()):!e.shiftKey&&k===C&&(o[0].focus(),e.preventDefault())}},M=()=>{if(!a.value)return;const e=B(a.value),o=e==null?void 0:e[0];o==null||o.focus({preventScroll:!0})},A=()=>{M(),f("opened",!0),i(!0)},T=()=>{var e;g(),(e=window.modalsList)!=null&&e.length||L(!1),r==null||r.focus(),i(!1),f("closed",!0)},P=()=>{var e;(e=window.modalsList)!=null&&e.length||L(!0),_(),f("open",!0)},U=()=>{f("close",!0)},V=()=>{d.modalEnabled||c()};function v(){return new Promise(e=>{r=document.activeElement,y.value=!0,i=e})}function c(){return new Promise(e=>{y.value=!1,i=e})}return l({doOpen:v,doClose:c}),(e,o)=>(s(),I(X,{to:"body",disabled:!d.appendToBody},[q(Q,G(e.$attrs,{ref_key:"wrapperRef",ref:E,name:"ui-dialog-",onEnter:P,onAfterEnter:A,onLeave:U,onAfterLeave:T}),{default:F(()=>[H(y)?(s(),m("div",{key:0,ref_key:"dialogRef",ref:a,class:W(["ui-dialog",["ui-dialog--"+t.position]]),tabindex:"-1",onClick:j(V,["self"]),onKeydown:D},[h("div",{role:"dialog","aria-modal":t.modalEnabled,class:"ui-dialog__container",style:J({width:t.fullscreen?"100%":t.width,height:t.fullscreen?"100%":""})},[w("title")||t.title?(s(),m("div",ne,[h("div",ae,[b(e.$slots,"title",{},()=>[Z(ee(t.title),1)])])])):p("",!0),h("div",{ref_key:"bodyRef",ref:S,class:"ui-dialog__body"},[b(e.$slots,"default")],512),w("footer")?(s(),m("div",ie,[b(e.$slots,"footer")])):p("",!0),t.hideClose?p("",!0):(s(),m("button",{key:2,class:"ui-dialog__close",type:"button",onClick:o[0]||(o[0]=x=>c())}))],12,oe)],34)):p("",!0)]),_:3},16)],8,["disabled"]))}});export{re as _};
